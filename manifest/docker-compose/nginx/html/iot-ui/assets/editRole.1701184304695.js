import{_ as R,b as D,E as V,r as N}from"./index.1701184304695.js";import{L as x,h as b,a2 as I,ab as L,a as v,_ as t,T as o,e as U,ai as s,o as A,b as w,Y as B,Z as k,X as K}from"./vue.1701184304695.js";const S={id:0,parentId:-1,name:"",status:1,listOrder:0,remark:""},M=x({name:"systemEditRole",props:{list:Array},setup(l,{emit:u}){const _=b(null),i=b(),a=I({loading:!1,isShowDialog:!1,formData:{...S},rules:{name:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},menuData:[],menuExpand:!1,menuNodeAll:!1,menuCheckStrictly:!1,menuProps:{children:"children",label:"title"}}),y=e=>{g(),p(),e&&D.role.getRole(e.id).then(n=>{a.formData=n}),a.isShowDialog=!0},m=()=>{a.isShowDialog=!1},r=()=>{m()},d=()=>{const e=U(_);!e||e.validate(n=>{n&&(a.loading=!0,a.formData.parentId||(a.formData.parentId=-1),a.formData.id===0?D.role.addRole(a.formData).then(()=>{V.success("\u6DFB\u52A0\u6210\u529F"),m(),f(),u("getList")}).finally(()=>{a.loading=!1}):D.role.editRole(a.formData).then(()=>{V.success("\u4FEE\u6539\u6210\u529F"),m(),f(),u("getList")}).finally(()=>{a.loading=!1}))})},p=()=>{D.menu.getList({status:-1}).then(e=>{a.menuData=e})},g=()=>{a.menuCheckStrictly=!1,a.menuExpand=!1,a.menuNodeAll=!1,a.formData={...S}},h=e=>{let n=a.menuData;for(let E=0;E<n.length;E++)i.value.store.nodesMap[n[E].id].expanded=e},F=e=>{i.value.setCheckedNodes(e?a.menuData:[])},C=e=>{a.menuCheckStrictly=!!e};function c(){let e=i.value.getCheckedKeys(),n=i.value.getHalfCheckedKeys();return e.unshift.apply(e,n),e}const f=()=>{N()};return{openDialog:y,closeDialog:m,onCancel:r,onSubmit:d,menuRef:i,formRef:_,handleCheckedTreeExpand:h,getMenuAllCheckedKeys:c,handleCheckedTreeNodeAll:F,handleCheckedTreeConnect:C,resetMenuSession:f,...L(a)}}}),T={class:"system-edit-role-container"},$={key:0},z={class:"dialog-footer"},O=B("\u53D6 \u6D88");function P(l,u,_,i,a,y){const m=s("el-cascader"),r=s("el-form-item"),d=s("el-col"),p=s("el-input"),g=s("el-input-number"),h=s("el-switch"),F=s("el-row"),C=s("el-form"),c=s("el-button"),f=s("el-dialog");return A(),v("div",T,[t(f,{title:(l.formData.id===0?"\u6DFB\u52A0":"\u4FEE\u6539")+"\u89D2\u8272",modelValue:l.isShowDialog,"onUpdate:modelValue":u[5]||(u[5]=e=>l.isShowDialog=e),width:"769px"},{footer:o(()=>[w("span",z,[t(c,{onClick:l.onCancel,size:"default"},{default:o(()=>[O]),_:1},8,["onClick"]),t(c,{type:"primary",onClick:l.onSubmit,size:"default",loading:l.loading},{default:o(()=>[B(k(l.formData.id===0?"\u65B0 \u589E":"\u4FEE \u6539"),1)]),_:1},8,["onClick","loading"])])]),default:o(()=>[t(C,{ref:"formRef",model:l.formData,rules:l.rules,size:"default","label-width":"90px"},{default:o(()=>[t(F,{gutter:35},{default:o(()=>[t(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(r,{label:"\u4E0A\u7EA7\u89D2\u8272"},{default:o(()=>[t(m,{options:l.list,props:{label:"name",value:"id",checkStrictly:!0,emitPath:!1},placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u89D2\u8272",clearable:"",class:"w100",modelValue:l.formData.parentId,"onUpdate:modelValue":u[0]||(u[0]=e=>l.formData.parentId=e)},{default:o(({node:e,data:n})=>[w("span",null,k(n.name),1),e.isLeaf?K("",!0):(A(),v("span",$," ("+k(n.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[t(r,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:o(()=>[t(p,{modelValue:l.formData.name,"onUpdate:modelValue":u[1]||(u[1]=e=>l.formData.name=e),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[t(r,{label:"\u6392\u5E8F"},{default:o(()=>[t(g,{modelValue:l.formData.listOrder,"onUpdate:modelValue":u[2]||(u[2]=e=>l.formData.listOrder=e),min:0,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[t(r,{label:"\u89D2\u8272\u72B6\u6001"},{default:o(()=>[t(h,{modelValue:l.formData.status,"onUpdate:modelValue":u[3]||(u[3]=e=>l.formData.status=e),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"\u542F","inactive-text":"\u7981"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[t(r,{label:"\u89D2\u8272\u63CF\u8FF0"},{default:o(()=>[t(p,{modelValue:l.formData.remark,"onUpdate:modelValue":u[4]||(u[4]=e=>l.formData.remark=e),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0",maxlength:"150"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var W=R(M,[["render",P],["__scopeId","data-v-01df4c93"]]);export{W as default};
