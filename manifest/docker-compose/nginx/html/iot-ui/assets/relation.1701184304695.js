import{a as E}from"./index.17011843046957.js";import{_ as k,E as N}from"./index.1701184304695.js";import{L as V,h as C,a2 as I,ab as v,a as h,_ as s,T as a,e as w,ai as n,o as i,b as m,F,a8 as b,S,Z as p,Y as D}from"./vue.1701184304695.js";const z=V({name:"relation",setup(o,{emit:u}){const _=C(null),l=I({isShowDialog:!1,data:[],nodeData:[],ruleForm:{id:0,mainSourceId:"",sourceNodeKey:""},rules:{mainSourceId:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",trigger:"blur"}],sourceNodeKey:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90\u8282\u70B9",trigger:"blur"}]}}),y=t=>{B(),E.template.source_list(t.id).then(e=>{l.data=e.List}),t&&(l.ruleForm=t),l.isShowDialog=!0},B=()=>{l.ruleForm={id:0,mainSourceId:"",sourceNodeKey:""}},r=()=>{l.isShowDialog=!1},c=()=>{r()},f=t=>{d(t)},g=()=>{const t=w(_);!t||t.validate(e=>{e&&E.template.relation(l.ruleForm).then(()=>{N.success("\u8BBE\u7F6E\u6210\u529F"),r(),u("typeList")})})},d=t=>{E.node.getList({pageNum:1,pageSize:50,sourceId:t}).then(e=>{l.nodeData=e.list})};return{getNodeList:d,setNode:f,openDialog:y,closeDialog:r,onCancel:c,onSubmit:g,formRef:_,...v(l)}}}),K={class:"system-edit-dic-container"},L={style:{float:"left"}},R={style:{float:"right","font-size":"13px"}},$={style:{float:"left"}},U={style:{float:"right","font-size":"13px"}},q={class:"dialog-footer"},T=D("\u53D6 \u6D88"),M=D("\u8BBE\u7F6E");function W(o,u,_,l,y,B){const r=n("el-option"),c=n("el-select"),f=n("el-form-item"),g=n("el-form"),d=n("el-button"),t=n("el-dialog");return i(),h("div",K,[s(t,{title:"\u8BBE\u7F6E\u4E3B\u6E90\u3001\u5173\u8054\u5B57\u6BB5",modelValue:o.isShowDialog,"onUpdate:modelValue":u[2]||(u[2]=e=>o.isShowDialog=e),width:"769px"},{footer:a(()=>[m("span",q,[s(d,{onClick:o.onCancel,size:"default"},{default:a(()=>[T]),_:1},8,["onClick"]),s(d,{type:"primary",onClick:o.onSubmit,size:"default"},{default:a(()=>[M]),_:1},8,["onClick"])])]),default:a(()=>[s(g,{model:o.ruleForm,ref:"formRef",rules:o.rules,size:"default","label-width":"110px"},{default:a(()=>[s(f,{label:"\u6570\u636E\u6E90\u8282\u70B9",prop:"mainSourceId"},{default:a(()=>[s(c,{modelValue:o.ruleForm.mainSourceId,"onUpdate:modelValue":u[0]||(u[0]=e=>o.ruleForm.mainSourceId=e),filterable:"",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",onChange:o.setNode},{default:a(()=>[(i(!0),h(F,null,b(o.data,e=>(i(),S(r,{key:e.sourceId,label:e.key,value:e.sourceId},{default:a(()=>[m("span",L,p(e.key),1),m("span",R,p(e.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),s(f,{label:"\u6570\u636E\u6E90\u8282\u70B9",prop:"sourceNodeKey"},{default:a(()=>[s(c,{modelValue:o.ruleForm.sourceNodeKey,"onUpdate:modelValue":u[1]||(u[1]=e=>o.ruleForm.sourceNodeKey=e),filterable:"",placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90"},{default:a(()=>[(i(!0),h(F,null,b(o.nodeData,e=>(i(),S(r,{key:e.nodeId,label:e.key,value:e.key},{default:a(()=>[m("span",$,p(e.key),1),m("span",U,p(e.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}var A=k(z,[["render",W]]);export{A as default};
