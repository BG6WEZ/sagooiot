import{a as h}from"./index.170118430469519.js";import N from"./tag.1701184304695.js";import{_ as q,E as S}from"./index.1701184304695.js";import{L as M,h as C,a2 as Z,ab as W,a as m,_ as l,T as t,e as G,n as X,ai as d,o as n,b as k,Y as p,Z as b,F as c,a8 as w,S as y,X as Y,aB as j,aC as H}from"./vue.1701184304695.js";const L={id:0,key:"",name:"",productId:"",tags:[],lng:"",lat:"",version:"",authType:0,authUser:"",authPasswd:"",accessToken:"",certificateId:"",desc:""},J=M({name:"deviceEditPro",components:{tagVue:N},setup(u,{emit:a}){const _=C(null),v=C(null),f=C(!1),I=C([]),o=Z({isShowDialog:!1,product:{},productData:[],ruleForm:{...L},rules:{name:[{required:!0,message:"\u8BBE\u5907\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u8BBE\u5907\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],productId:[{required:!0,message:"\u6240\u5C5E\u4EA7\u54C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),r=e=>{B(),h.product.getLists({status:1}).then(s=>{o.productData=s.product||[]}),e&&(o.ruleForm=e,o.ruleForm.tags=e.tags||[],V(e.productId)),o.isShowDialog=!0},B=()=>{o.ruleForm={...L}},i=()=>{o.isShowDialog=!1},F=()=>{i()},D=()=>{const e=G(_);!e||e.validate(s=>{s&&(o.ruleForm.id!==0?h.instance.edit(o.ruleForm).then(()=>{S.success("\u8BBE\u5907\u7C7B\u578B\u4FEE\u6539\u6210\u529F"),i(),a("typeList")}):h.instance.add(o.ruleForm).then(()=>{S.success("\u8BBE\u5907\u7C7B\u578B\u6DFB\u52A0\u6210\u529F"),i(),a("typeList")}))})};function g(){v.value.addRow()}function A(e){console.log(e),o.ruleForm.tags.push(e)}function T(e){o.ruleForm.tags.splice(e,1)}function E(){f.value=!0,X(()=>{var e=new BMapGL.Map("map-container-conpany");e.centerAndZoom("\u6C88\u9633\u5E02",8),e.enableScrollWheelZoom(!0),e.addEventListener("click",s=>{console.log("\u70B9\u51FB\u4F4D\u7F6E\u7ECF\u7EAC\u5EA6\uFF1A"+s.latlng.lng+","+s.latlng.lat),o.ruleForm.lng=s.latlng.lng.toFixed(5),o.ruleForm.lat=s.latlng.lat.toFixed(5),f.value=!1})})}const V=e=>{h.product.detail(e).then(s=>{const{authType:U,authUser:P,authPasswd:R,accessToken:$,certificateId:z}=s.data;o.product=s.data,o.ruleForm.authType=U,o.ruleForm.authUser=P,o.ruleForm.authPasswd=R,o.ruleForm.accessToken=$,o.ruleForm.certificateId=z})};return{certList:I,productIdChange:V,tagRef:v,delTagRow:T,toAddTag:g,addTag:A,mapVisible:f,selectPosition:E,openDialog:r,closeDialog:i,onCancel:F,onSubmit:D,formRef:_,...W(o)}}}),K=u=>(j("data-v-b0b4db42"),u=u(),H(),u),O={class:"system-edit-dic-container"},Q={class:"tags-wrapper"},x=p("\u6DFB\u52A0\u6807\u7B7E"),ee={class:"tags"},ue={class:"tag flex"},le=p("\u5220\u9664"),oe=p("Basic"),ae=p("AccessToken"),te={class:"dialog-footer"},re=p("\u53D6 \u6D88"),se=K(()=>k("div",{class:"map",id:"map-container-conpany",style:{height:"65vh"}},null,-1));function de(u,a,_,v,f,I){const o=d("el-input"),r=d("el-form-item"),B=d("el-option"),i=d("el-select"),F=d("el-button"),D=d("el-tag"),g=d("el-radio"),A=d("el-radio-group"),T=d("el-form"),E=d("el-dialog"),V=d("tagVue");return n(),m("div",O,[l(E,{title:(u.ruleForm.id!==0?"\u4FEE\u6539":"\u6DFB\u52A0")+"\u8BBE\u5907",modelValue:u.isShowDialog,"onUpdate:modelValue":a[10]||(a[10]=e=>u.isShowDialog=e),width:"769px"},{footer:t(()=>[k("span",te,[l(F,{onClick:u.onCancel,size:"default"},{default:t(()=>[re]),_:1},8,["onClick"]),l(F,{type:"primary",onClick:u.onSubmit,size:"default"},{default:t(()=>[p(b(u.ruleForm.id!==0?"\u4FEE \u6539":"\u6DFB \u52A0"),1)]),_:1},8,["onClick"])])]),default:t(()=>[l(T,{model:u.ruleForm,ref:"formRef",rules:u.rules,size:"default","label-width":"110px"},{default:t(()=>[l(r,{label:"\u8BBE\u5907\u6807\u8BC6",prop:"key"},{default:t(()=>[l(o,{modelValue:u.ruleForm.key,"onUpdate:modelValue":a[0]||(a[0]=e=>u.ruleForm.key=e),placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907\u6807\u8BC6",disabled:u.ruleForm.id},null,8,["modelValue","disabled"])]),_:1}),l(r,{label:"\u8BBE\u5907\u540D\u79F0",prop:"name"},{default:t(()=>[l(o,{modelValue:u.ruleForm.name,"onUpdate:modelValue":a[1]||(a[1]=e=>u.ruleForm.name=e),placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(r,{label:"\u6240\u5C5E\u4EA7\u54C1",prop:"productId"},{default:t(()=>[l(i,{modelValue:u.ruleForm.productId,"onUpdate:modelValue":a[2]||(a[2]=e=>u.ruleForm.productId=e),onChange:u.productIdChange,disabled:u.ruleForm.id,placeholder:"\u8BF7\u9009\u62E9\u6240\u5C5E\u4EA7\u54C1",class:"w100"},{default:t(()=>[(n(!0),m(c,null,w(u.productData,e=>(n(),y(B,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange","disabled"])]),_:1}),l(r,{label:"\u8BBE\u5907\u5750\u6807",prop:"lng"},{default:t(()=>[l(o,{value:u.ruleForm.lng?u.ruleForm.lng+" , "+u.ruleForm.lat:"",placeholder:"\u9009\u62E9\u8BBE\u5907\u5750\u6807",onClick:u.selectPosition,"read-only":""},null,8,["value","onClick"])]),_:1}),l(r,{label:"\u6807\u7B7E\u8BBE\u7F6E",prop:"lng"},{default:t(()=>[k("div",Q,[l(F,{type:"primary",size:"small",onClick:u.toAddTag},{default:t(()=>[x]),_:1},8,["onClick"]),k("div",ee,[(n(!0),m(c,null,w(u.ruleForm.tags,(e,s)=>(n(),m("div",ue,[l(D,null,{default:t(()=>[p(b(e.key)+" : "+b(e.name)+" : "+b(e.value),1)]),_:2},1024),l(F,{type:"danger",size:"small",onClick:U=>u.delTagRow(s)},{default:t(()=>[le]),_:2},1032,["onClick"])]))),256))])])]),_:1}),u.ruleForm.authType===1||u.ruleForm.authType===2?(n(),m(c,{key:0},[l(r,{label:"\u8BA4\u8BC1\u65B9\u5F0F",prop:""},{default:t(()=>[l(A,{modelValue:u.ruleForm.authType,"onUpdate:modelValue":a[3]||(a[3]=e=>u.ruleForm.authType=e)},{default:t(()=>[l(g,{label:1},{default:t(()=>[oe]),_:1}),l(g,{label:2},{default:t(()=>[ae]),_:1})]),_:1},8,["modelValue"])]),_:1}),u.ruleForm.authType===1?(n(),m(c,{key:0},[l(r,{label:"\u7528\u6237\u540D",prop:"authUser"},{default:t(()=>[l(o,{modelValue:u.ruleForm.authUser,"onUpdate:modelValue":a[4]||(a[4]=e=>u.ruleForm.authUser=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,8,["modelValue"])]),_:1}),l(r,{label:"\u5BC6\u7801",prop:"authPasswd"},{default:t(()=>[l(o,{type:"password",modelValue:u.ruleForm.authPasswd,"onUpdate:modelValue":a[5]||(a[5]=e=>u.ruleForm.authPasswd=e),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1})],64)):(n(),y(r,{key:1,label:"Aceess Token",prop:"accessToken"},{default:t(()=>[l(o,{modelValue:u.ruleForm.accessToken,"onUpdate:modelValue":a[6]||(a[6]=e=>u.ruleForm.accessToken=e),placeholder:"\u8BF7\u8F93\u5165Aceess Token"},null,8,["modelValue"])]),_:1}))],64)):u.ruleForm.authType===3?(n(),y(r,{key:1,label:"\u8BA4\u8BC1\u8BC1\u4E66",prop:"certificateId"},{default:t(()=>[l(i,{modelValue:u.ruleForm.certificateId,"onUpdate:modelValue":a[7]||(a[7]=e=>u.ruleForm.certificateId=e),placeholder:"\u8BF7\u9009\u62E9\u8BC1\u4E66"},{default:t(()=>[(n(!0),m(c,null,w(u.certList,e=>(n(),y(B,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):Y("",!0),l(r,{label:"\u56FA\u4EF6\u7248\u672C\u53F7",prop:"version"},{default:t(()=>[l(o,{modelValue:u.ruleForm.version,"onUpdate:modelValue":a[8]||(a[8]=e=>u.ruleForm.version=e),placeholder:"\u8BF7\u8F93\u5165\u56FA\u4EF6\u7248\u672C\u53F7"},null,8,["modelValue"])]),_:1}),l(r,{label:"\u5907\u6CE8",prop:"desc"},{default:t(()=>[l(o,{modelValue:u.ruleForm.desc,"onUpdate:modelValue":a[9]||(a[9]=e=>u.ruleForm.desc=e),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l(E,{title:"\u5730\u56FE\u9009\u70B9\uFF08\u70B9\u51FB\u5730\u56FE\u5373\u53EF\uFF09",modelValue:u.mapVisible,"onUpdate:modelValue":a[11]||(a[11]=e=>u.mapVisible=e),width:"1000px","append-to-body":""},{default:t(()=>[se]),_:1},8,["modelValue"]),l(V,{ref:"tagRef"},null,512)])}var Fe=q(J,[["render",de],["__scopeId","data-v-b0b4db42"]]);export{Fe as default};
