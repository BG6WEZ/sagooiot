import{L as O,h as k,a2 as q,k as K,ab as M,a as T,_ as a,T as u,j as Q,e as P,ai as l,as as w,o as i,b as Y,aa as H,F as J,a8 as W,S as m,U as s,V as X,Y as f}from"./vue.1701184304695.js";import Z from"./editConfig.17011843046952.js";import{_ as x,b as E,E as v,h as V}from"./index.1701184304695.js";const ee=O({name:"apiV1SystemDictDataList",components:{EditConfig:Z},setup(){const{proxy:t}=Q(),n=k(),C=k(),R=k(),{sys_yes_no:S,sys_job_group:y}=t.useDict("sys_yes_no","sys_job_group"),r=q({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,jobName:"",jobGroup:"",status:null}}}),_=()=>{d()},d=()=>{r.tableData.loading=!0,E.task.getList(r.tableData.param).then(e=>{r.tableData.data=e.list,r.tableData.total=e.total}).finally(()=>r.tableData.loading=!1)},B=()=>{C.value.openDialog()},j=e=>{C.value.openDialog(e)},D=e=>{let c="\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6240\u9009\u6570\u636E\uFF1F",F=[];if(e?(c=`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u4EFB\u52A1\u540D\u79F0\uFF1A\u201C${e.jobName}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,F=[e.jobId]):F=r.ids,F.length===0){v.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E\u3002");return}V.confirm(c,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{E.task.del(F).then(()=>{v.success("\u5220\u9664\u6210\u529F"),d()})}).catch(()=>{})},p=e=>{V.confirm("\u662F\u5426\u786E\u8BA4\u7ACB\u5373\u6267\u884C\u4E00\u6B21\u8BE5\u4EFB\u52A1?","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{E.task.run(e.jobId).then(()=>{v.success("\u64CD\u4F5C\u6210\u529F"),d()})})},A=e=>{let c=e.status===0?"\u542F\u7528":"\u505C\u7528";V.confirm('\u786E\u8BA4\u8981"'+c+'"\uFF1A"'+e.jobName+'"\u4EFB\u52A1\u5417?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(function(){return e.status===0?E.task.start(e.jobId):E.task.stop(e.jobId)}).then(()=>{v.success(c+"\u6210\u529F")}).catch(function(){e.status=e.status===0?1:0})};return K(()=>{_()}),{addDicRef:n,editDicRef:C,queryRef:R,sys_yes_no:S,sys_job_group:y,onOpenAddDic:B,onOpenEditDic:j,onRowDel:D,onRowRun:p,handleStatusChange:A,dataList:d,resetQuery:e=>{!e||(e.resetFields(),d())},handleSelectionChange:e=>{r.ids=e.map(c=>c.jobId)},jobGroupFormat:e=>t.selectDictLabel(P(y),e.jobGroup),...M(r)}}}),te={class:"system-dic-container"},ae={class:"system-user-search mb15"},oe=f(" \u67E5\u8BE2 "),ue=f(" \u91CD\u7F6E "),le=f(" \u65B0\u589E\u4EFB\u52A1 "),ne=f(" \u5220\u9664\u4EFB\u52A1 "),se=f("\u4FEE\u6539"),ie=f("\u5220\u9664"),re=f("\u6267\u884C\u4E00\u6B21");function de(t,n,C,R,S,y){const r=l("el-input"),_=l("el-form-item"),d=l("el-option"),B=l("el-select"),j=l("ele-Search"),D=l("el-icon"),p=l("el-button"),A=l("ele-Refresh"),N=l("ele-FolderAdd"),z=l("ele-Delete"),L=l("el-form"),e=l("el-table-column"),c=l("el-switch"),F=l("el-table"),$=l("pagination"),G=l("el-card"),I=l("EditConfig"),g=w("auth"),b=w("col"),U=w("loading");return i(),T("div",te,[a(G,{shadow:"hover"},{default:u(()=>[Y("div",ae,[a(L,{model:t.tableData.param,ref:"queryRef",inline:!0,"label-width":"68px"},{default:u(()=>[a(_,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"jobName"},{default:u(()=>[a(r,{modelValue:t.tableData.param.jobName,"onUpdate:modelValue":n[0]||(n[0]=o=>t.tableData.param.jobName=o),placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\u540D\u79F0",clearable:"",size:"default",onKeyup:H(t.dataList,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(_,{label:"\u4EFB\u52A1\u7EC4\u540D",prop:"jobGroup"},{default:u(()=>[a(B,{modelValue:t.tableData.param.jobGroup,"onUpdate:modelValue":n[1]||(n[1]=o=>t.tableData.param.jobGroup=o),size:"mini",placeholder:"\u8BF7\u9009\u62E9"},{default:u(()=>[(i(!0),T(J,null,W(t.sys_job_group,o=>(i(),m(d,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(_,{label:"\u4EFB\u52A1\u72B6\u6001",prop:"status",style:{width:"200px"}},{default:u(()=>[a(B,{modelValue:t.tableData.param.status,"onUpdate:modelValue":n[2]||(n[2]=o=>t.tableData.param.status=o),size:"mini",placeholder:"\u8BF7\u9009\u62E9"},{default:u(()=>[a(d,{label:"\u6B63\u5E38",value:0}),a(d,{label:"\u6682\u505C",value:1})]),_:1},8,["modelValue"])]),_:1}),a(_,null,{default:u(()=>[a(p,{size:"default",type:"primary",class:"ml10",onClick:t.dataList},{default:u(()=>[a(D,null,{default:u(()=>[a(j)]),_:1}),oe]),_:1},8,["onClick"]),a(p,{size:"default",onClick:n[3]||(n[3]=o=>t.resetQuery(t.queryRef))},{default:u(()=>[a(D,null,{default:u(()=>[a(A)]),_:1}),ue]),_:1}),s((i(),m(p,{size:"default",type:"success",class:"ml10",onClick:t.onOpenAddDic},{default:u(()=>[a(D,null,{default:u(()=>[a(N)]),_:1}),le]),_:1},8,["onClick"])),[[g,"add"]]),s((i(),m(p,{size:"default",type:"danger",class:"ml10",onClick:n[4]||(n[4]=o=>t.onRowDel(null))},{default:u(()=>[a(D,null,{default:u(()=>[a(z)]),_:1}),ne]),_:1})),[[g,"del"]])]),_:1})]),_:1},8,["model"])]),s((i(),m(F,{data:t.tableData.data,style:{width:"100%"},onSelectionChange:t.handleSelectionChange},{default:u(()=>[a(e,{type:"selection",width:"55",align:"center"}),s(a(e,{label:"ID",align:"center",prop:"jobId",width:"60"},null,512),[[b,"jobId"]]),s(a(e,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"jobName","show-overflow-tooltip":!0},null,512),[[b,"jobName"]]),s(a(e,{label:"\u4EFB\u52A1\u63CF\u8FF0",prop:"remark","show-overflow-tooltip":""},null,512),[[b,"remark"]]),s(a(e,{label:"\u4EFB\u52A1\u5206\u7EC4",prop:"jobGroup",width:"120",formatter:t.jobGroupFormat},null,8,["formatter"]),[[b,"jobGroup"]]),s(a(e,{label:"\u4EFB\u52A1\u65B9\u6CD5\u540D",prop:"invokeTarget"},null,512),[[b,"invokeTarget"]]),s(a(e,{label:"cron\u6267\u884C\u8868\u8FBE\u5F0F",prop:"cronExpression"},null,512),[[b,"cronExpression"]]),s((i(),m(e,{label:"\u72B6\u6001",align:"center",prop:"status",width:"100"},{default:u(o=>[a(c,{modelValue:o.row.status,"onUpdate:modelValue":h=>o.row.status=h,"inline-prompt":"","active-value":0,"inactive-value":1,"active-text":"\u542F","inactive-text":"\u7981",onChange:h=>t.handleStatusChange(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})),[[b,"status"]]),s((i(),m(e,{label:"\u64CD\u4F5C",width:"180",align:"center",fixed:"right"},{default:u(o=>[s((i(),m(p,{size:"small",text:"",type:"warning",onClick:h=>t.onOpenEditDic(o.row)},{default:u(()=>[se]),_:2},1032,["onClick"])),[[g,"edit"]]),s((i(),m(p,{size:"small",text:"",type:"danger",onClick:h=>t.onRowDel(o.row)},{default:u(()=>[ie]),_:2},1032,["onClick"])),[[g,"del"]]),s((i(),m(p,{size:"small",text:"",type:"primary",onClick:h=>t.onRowRun(o.row)},{default:u(()=>[re]),_:2},1032,["onClick"])),[[g,"do"]])]),_:1})),[[b,"handle"]])]),_:1},8,["data","onSelectionChange"])),[[U,t.tableData.loading]]),s(a($,{total:t.tableData.total,page:t.tableData.param.pageNum,"onUpdate:page":n[5]||(n[5]=o=>t.tableData.param.pageNum=o),limit:t.tableData.param.pageSize,"onUpdate:limit":n[6]||(n[6]=o=>t.tableData.param.pageSize=o),onPagination:t.dataList},null,8,["total","page","limit","onPagination"]),[[X,t.tableData.total>0]])]),_:1}),a(I,{ref:"editDicRef",onDataList:t.dataList},null,8,["onDataList"])])}var be=x(ee,[["render",de]]);export{be as default};
