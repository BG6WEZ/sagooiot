import N from"./btn-form.1701184304695.js";import{b as F,E as w,r as v,h as b}from"./index.1701184304695.js";import{L as U,h as c,a as M,_ as e,T as t,F as P,ai as o,o as S,b as G,Y as n}from"./vue.1701184304695.js";import"./validator.1701184304695.js";const Y={class:"p-3"},j=n(" \u65B0\u589E\u6309\u94AE "),q=n("\u5E38\u7528\u6309\u94AE\u6743\u9650 "),H=n("\u65B0\u589E"),J=n("\u7F16\u8F91"),K=n("\u8BE6\u60C5"),O=n("\u5220\u9664"),Q=n("\u5BFC\u5165"),W=n("\u5BFC\u51FA"),X=n("\u91CD\u7F6E"),Z=n("\u66F4\u591A"),ee=n("\u4FEE\u6539"),te=n("\u5220\u9664"),se=U({__name:"btn",setup(ue,{expose:A}){const B=c("\u6309\u94AE\u6743\u9650"),h=c(!1),i=c([]),_=c(),C=c(),m=async()=>{i.value=[];let u=await F.menu.btn.getList({menuId:_.value.id,status:-1});i.value=u||[]},y=async u=>{B.value="\u6309\u94AE\u6743\u9650 - "+u.title,h.value=!0,_.value=u,m()},x=()=>{C.value.open({menuId:_.value.id})},D=u=>{C.value.open(u)},g=async u=>{const[s,E]=u.split("-"),r={parentId:-1,menuId:_.value.id,name:E,types:s,description:"",status:1};await F.menu.btn.add(r),w.success("\u64CD\u4F5C\u6210\u529F"),m(),v()},k=u=>{let s=u.status===1?"\u542F\u7528":"\u505C\u7528";b.confirm('\u786E\u8BA4\u8981"'+s+'"\uFF1A"'+u.name+'"\u6309\u94AE\u5417?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async function(){await F.menu.btn.setStatus(u.id,u.menuId,u.status),w.success("\u64CD\u4F5C\u6210\u529F"),v()}).catch(function(){u.status=u.status===0?1:0})},V=u=>{b.confirm(`\u6B64\u64CD\u4F5C\u5C06\u5220\u9664\u6309\u94AE\uFF1A\u201C${u.name}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{await F.menu.btn.del(u.id),w.success("\u5220\u9664\u6210\u529F"),m(),v()})};return A({open:y}),(u,s)=>{const E=o("ele-FolderAdd"),r=o("el-icon"),p=o("el-button"),T=o("ele-Plus"),a=o("el-dropdown-item"),I=o("el-dropdown-menu"),R=o("el-dropdown"),d=o("el-table-column"),$=o("el-switch"),z=o("el-table"),L=o("el-drawer");return S(),M(P,null,[e(L,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=l=>h.value=l),title:B.value,direction:"rtl",size:"700px"},{default:t(()=>[G("div",Y,[e(p,{size:"default",type:"success",class:"mr-3",onClick:x},{default:t(()=>[e(r,null,{default:t(()=>[e(E)]),_:1}),j]),_:1}),e(R,{onCommand:g},{dropdown:t(()=>[e(I,null,{default:t(()=>[e(a,{command:"add-\u65B0\u589E"},{default:t(()=>[H]),_:1}),e(a,{command:"edit-\u7F16\u8F91"},{default:t(()=>[J]),_:1}),e(a,{command:"detail-\u8BE6\u60C5"},{default:t(()=>[K]),_:1}),e(a,{command:"del-\u5220\u9664"},{default:t(()=>[O]),_:1}),e(a,{command:"upload-\u5BFC\u5165"},{default:t(()=>[Q]),_:1}),e(a,{command:"download-\u5BFC\u51FA"},{default:t(()=>[W]),_:1}),e(a,{command:"reset-\u91CD\u7F6E"},{default:t(()=>[X]),_:1}),e(a,{command:"more-\u66F4\u591A"},{default:t(()=>[Z]),_:1})]),_:1})]),default:t(()=>[e(p,{text:"",type:"primary"},{default:t(()=>[e(r,null,{default:t(()=>[e(T)]),_:1}),q]),_:1})]),_:1})]),e(z,{data:i.value,style:{width:"100%"},"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:t(()=>[e(d,{type:"index",label:"\u5E8F\u53F7",width:"60",align:"center"}),e(d,{prop:"name",label:"\u6309\u94AE\u540D\u79F0",width:"220","show-overflow-tooltip":""}),e(d,{prop:"types",label:"\u6309\u94AE\u7F16\u7801","show-overflow-tooltip":""}),e(d,{prop:"status",label:"\u72B6\u6001",width:"100",align:"center"},{default:t(l=>[e($,{modelValue:l.row.status,"onUpdate:modelValue":f=>l.row.status=f,"inline-prompt":"","active-value":1,"inactive-value":0,"active-text":"\u542F","inactive-text":"\u7981",onChange:f=>k(l.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(d,{label:"\u64CD\u4F5C",width:"100",align:"center"},{default:t(l=>[e(p,{size:"small",text:"",type:"warning",onClick:f=>D(l.row)},{default:t(()=>[ee]),_:2},1032,["onClick"]),e(p,{size:"small",text:"",type:"danger",onClick:f=>V(l.row)},{default:t(()=>[te]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue","title"]),e(N,{ref_key:"btnFormRef",ref:C,"parent-data":i.value,onGetList:m},null,8,["parent-data"])],64)}}});export{se as default};
