import{L as J,h as K,a2 as q,k as U,ab as M,a as d,b,Z as o,O as X,Y as u,U as c,_ as t,T as a,aD as Y,ai as f,as as A,o as i,X as _,F as O,a8 as T,S as V,V as Z}from"./vue.1701184304695.js";import{_ as G,F as H,E as N,h as Q}from"./index.1701184304695.js";/* empty css                    */import W from"./editNode.17011843046952.js";import{a as C}from"./index.17011843046957.js";const x=J({name:"dataDetail",components:{EditDic:W},setup(e,E){const D=K(),v=Y(),n=q({config:{},jsonData:{},ruledata:[{expression:"",params:{}}],rule:[{expression:"",params:{name:"",value:""}}],requestParams:[{type:"",key:"",name:"",value:""}],isShowDialog:!1,detail:[],activeName:"1",developer_status:0,tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,sourceId:v.params&&v.params.sourceId,status:"",dateRange:[]}}});U(()=>{const s=v.params&&v.params.sourceId;C.common.detail(s).then(m=>{n.detail=m.data,n.developer_status=m.data.status,n.config=m.data.apiConfig,n.requestParams=m.data.apiConfig.requestParams}),h()});const h=()=>{n.tableData.loading=!0,C.node.getList(n.tableData.param).then(s=>{n.tableData.data=s.list,n.tableData.total=s.Total}).finally(()=>n.tableData.loading=!1)};return{Edit:H,editDicRef:D,typeList:h,onRowDel:s=>{let m="\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6240\u9009\u6570\u636E\uFF1F",r=[];if(s?(m=`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u6570\u636E\u8282\u70B9\uFF1A\u201C${s.name}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,r=s.nodeId):r=n.ids,r.length===0){N.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E\u3002");return}Q.confirm(m,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{C.node.delete(r).then(()=>{N.success("\u5220\u9664\u6210\u529F"),h()})}).catch(()=>{})},onOpenEdit:()=>{D.value.openDialog({sourceId:v.params.sourceId,nodeId:0,isPk:0})},onOpenEdit1:s=>{D.value.openDialog(s)},handleClick:(s,m)=>{console.log(s.props.name,m),s.props.name==3&&(n.detail.from==1?C.common.api(n.detail.sourceId).then(r=>{n.jsonData=JSON.parse(r.data),console.log(r)}):n.detail.from==4?C.common.devapi(n.detail.sourceId).then(r=>{n.jsonData=JSON.parse(r.data),console.log(r)}):n.detail.from==2&&C.common.devdb(n.detail.sourceId).then(r=>{n.jsonData=JSON.parse(r.data),console.log(r)}))},CkOption:()=>{n.developer_status==1?C.common.undeploy({sourceId:v.params.sourceId}).then(s=>{N.success("\u64CD\u4F5C\u6210\u529F"),n.developer_status=0}):C.common.deploy({sourceId:v.params.sourceId}).then(s=>{N.success("\u64CD\u4F5C\u6210\u529F"),n.developer_status=1})},...M(n)}}}),ee={class:"system-dic-container"},te={class:"content"},ae={class:"cont_box"},ue={class:"title"},oe={class:"pro-status"},le={class:"content-box"},ne=u("\u57FA\u672C\u4FE1\u606F"),se={key:0},ie={key:1},de={key:2},re={key:3},pe={key:0},ce=u("\u6570\u636E\u6E90\u914D\u7F6E"),me={key:1},fe=u("\u6570\u636E\u6E90\u914D\u7F6E"),_e={key:2},be=u("\u89C4\u5219\u8868\u8FBE\u5F0F"),Ee=u("\u6570\u636E\u6E90\u914D\u7F6E"),ve=u("\u8BF7\u6C42\u53C2\u6570"),Ce={class:"wu-box"},Fe={class:"wu-title"},ge=b("div",{class:"title"},"\u6570\u636E\u8282\u70B9",-1),De={key:0},he=u("\u6DFB\u52A0"),ye=u("\u4FEE\u6539"),ke=u("\u5220\u9664"),Be={class:"wu-box"};function we(e,E,D,v,n,h){const F=f("el-divider"),l=f("el-form-item"),L=f("el-form"),y=f("el-tab-pane"),k=f("el-button"),s=f("el-table-column"),m=f("el-table"),r=f("pagination"),R=f("JsonViewer"),S=f("el-tabs"),$=f("EditDic"),B=A("auth"),g=A("col"),P=A("loading");return i(),d("div",ee,[b("div",te,[b("div",ae,[b("div",ue,"\u6570\u636E\u6E90\u540D\u79F0\uFF1A"+o(e.detail.name),1),b("div",oe,[b("span",{class:X(e.developer_status==1?"on":"off")},null,2),u(o(e.developer_status==1?"\u5DF2\u53D1\u5E03":"\u672A\u53D1\u5E03"),1)]),c((i(),d("div",{class:"pro-option",onClick:E[0]||(E[0]=(...p)=>e.CkOption&&e.CkOption(...p))},[u(o(e.developer_status==1?"\u505C\u7528":"\u53D1\u5E03"),1)])),[[B,"pro-status"]])])]),b("div",le,[t(S,{modelValue:e.activeName,"onUpdate:modelValue":E[3]||(E[3]=p=>e.activeName=p),class:"demo-tabs",onTabClick:e.handleClick},{default:a(()=>[t(y,{label:"\u6570\u636E\u6E90\u4FE1\u606F",name:"1"},{default:a(()=>[t(L,{size:"default","label-width":"110px",inline:!0},{default:a(()=>[t(F,{"content-position":"left"},{default:a(()=>[ne]),_:1}),t(l,{label:"\u6570\u636E\u6E90\u6807\u8BC6:"},{default:a(()=>[u(o(e.detail.key),1)]),_:1}),t(l,{label:"\u6570\u636E\u6E90\u540D\u79F0:"},{default:a(()=>[u(o(e.detail.name),1)]),_:1}),t(l,{label:"\u6570\u636E\u6E90\u63CF\u8FF0:"},{default:a(()=>[u(o(e.detail.desc),1)]),_:1}),t(l,{label:"\u6570\u636E\u6765\u6E90:"},{default:a(()=>[e.detail.from==1?(i(),d("span",se,"api\u5BFC\u5165")):_("",!0),e.detail.from==2?(i(),d("span",ie,"\u6570\u636E\u5E93")):_("",!0),e.detail.from==3?(i(),d("span",de,"\u6587\u4EF6")):_("",!0),e.detail.from==4?(i(),d("span",re,"\u8BBE\u5907")):_("",!0)]),_:1}),e.detail.from==4?(i(),d("div",pe,[t(F,{"content-position":"left"},{default:a(()=>[ce]),_:1}),t(l,{label:"\u8BBE\u5907key:",prop:"deviceKey"},{default:a(()=>[u(o(e.detail.deviceConfig.deviceKey),1)]),_:1}),t(l,{label:"\u4EA7\u54C1key:",prop:"productKey"},{default:a(()=>[u(o(e.detail.deviceConfig.productKey),1)]),_:1})])):_("",!0),e.detail.from==2?(i(),d("div",me,[t(F,{"content-position":"left"},{default:a(()=>[fe]),_:1}),t(l,{label:"\u6570\u636E\u6765\u6E90:",prop:"type"},{default:a(()=>[u(o(e.detail.dbConfig.type),1)]),_:1}),t(l,{label:"\u4E3B\u673A\u5730\u5740:",prop:"host"},{default:a(()=>[u(o(e.detail.dbConfig.host),1)]),_:1}),t(l,{label:"\u7AEF\u53E3\u53F7:",prop:"port"},{default:a(()=>[u(o(e.detail.dbConfig.port),1)]),_:1}),t(l,{label:"\u7528\u6237\u540D:",prop:"user"},{default:a(()=>[u(o(e.detail.dbConfig.user),1)]),_:1}),t(l,{label:"\u5BC6\u7801:",prop:"passwd"},{default:a(()=>[u(o(e.detail.dbConfig.passwd),1)]),_:1}),t(l,{label:"\u6570\u636E\u5E93\u540D\u79F0:",prop:"dbName"},{default:a(()=>[u(o(e.detail.dbConfig.dbName),1)]),_:1}),t(l,{label:"\u8868\u540D\u79F0:",prop:"tableName"},{default:a(()=>[u(o(e.detail.dbConfig.tableName),1)]),_:1}),t(l,{label:"\u4E3B\u952E\u5B57\u6BB5:",prop:"pk"},{default:a(()=>[u(o(e.detail.dbConfig.pk),1)]),_:1}),t(l,{label:"\u6BCF\u6B21\u83B7\u53D6\u6570\u91CF:",prop:"num"},{default:a(()=>[u(o(e.detail.dbConfig.num),1)]),_:1}),t(l,{label:"\u4EFB\u52A1\u8868\u8FBE\u5F0F:",prop:"cronExpression"},{default:a(()=>[u(o(e.detail.dbConfig.cronExpression),1)]),_:1})])):_("",!0),e.detail.from==1?(i(),d("div",_e,[t(F,{"content-position":"left"},{default:a(()=>[be]),_:1}),(i(!0),d(O,null,T(e.rule,(p,I)=>(i(),d("div",{key:I},[t(l,{label:"\u8868\u8FBE\u5F0F:"},{default:a(()=>[u(o(p.expression),1)]),_:2},1024),t(l,{label:"\u53C2\u6570:"},{default:a(()=>[u(o(p.params.name)+"~ "+o(p.params.value),1)]),_:2},1024),t(F,{"content-position":"left"},{default:a(()=>[Ee]),_:1}),t(l,{label:"\u8BF7\u6C42\u65B9\u6CD5:",prop:"method"},{default:a(()=>[u(o(e.config.method),1)]),_:1}),t(l,{label:"\u8BF7\u6C42\u5730\u5740:",prop:"method"},{default:a(()=>[u(o(e.config.url),1)]),_:1}),t(l,{label:"\u66F4\u65B0\u65F6\u95F4:",prop:"method"},{default:a(()=>[u(o(e.config.interval)+" "+o(e.config.intervalUnit),1)]),_:1}),t(F,{"content-position":"left"},{default:a(()=>[ve]),_:1}),(i(!0),d(O,null,T(e.requestParams,(j,z)=>(i(),d("div",{class:"content-f",key:z,style:{border:"1px solid #d9d9d9",padding:"10px","margin-bottom":"10px"}},[(i(!0),d(O,null,T(j,(w,Ne)=>(i(),d("div",{key:e.inbbdex},[t(l,{label:"\u53C2\u6570\u7C7B\u578B:"},{default:a(()=>[u(o(w.type),1)]),_:2},1024),t(l,{label:"\u53C2\u6570\u6807\u9898:"},{default:a(()=>[u(o(w.name),1)]),_:2},1024),t(l,{label:"\u53C2\u6570\u540D:"},{default:a(()=>[u(o(w.key),1)]),_:2},1024),t(l,{label:"\u53C2\u6570\u503C:"},{default:a(()=>[u(o(w.value),1)]),_:2},1024)]))),128))]))),128))]))),128))])):_("",!0)]),_:1})]),_:1}),t(y,{label:"\u6570\u636E\u8282\u70B9",name:"2"},{default:a(()=>[b("div",Ce,[b("div",Fe,[ge,e.developer_status==0?c((i(),d("div",De,[t(k,{type:"primary",onClick:E[1]||(E[1]=p=>e.onOpenEdit())},{default:a(()=>[he]),_:1})])),[[B,"add"]]):_("",!0)]),c((i(),V(m,{data:e.tableData.data,style:{width:"100%"}},{default:a(()=>[c(t(s,{label:"ID",align:"center",prop:"nodeId",width:"80"},null,512),[[g,"id"]]),c(t(s,{label:"\u6570\u636E\u6807\u8BC6",prop:"key","show-overflow-tooltip":!0},null,512),[[g,"key"]]),c(t(s,{label:"\u6570\u636E\u540D\u79F0",prop:"name","show-overflow-tooltip":!0},null,512),[[g,"name"]]),c(t(s,{label:"\u6570\u636E\u7C7B\u578B",prop:"dataType","show-overflow-tooltip":!0},null,512),[[g,"dataType"]]),c(t(s,{label:"\u6570\u636E\u53D6\u503C\u9879",prop:"value","show-overflow-tooltip":!0},null,512),[[g,"value"]]),c(t(s,{prop:"createdAt",label:"\u521B\u5EFA\u65F6\u95F4",align:"center",width:"180"},null,512),[[g,"createdAt"]]),t(s,{label:"\u64CD\u4F5C",width:"200",align:"center",fixed:"right"},{default:a(p=>[e.developer_status==0?c((i(),V(k,{key:0,size:"small",text:"",type:"warning",onClick:I=>e.onOpenEdit1(p.row)},{default:a(()=>[ye]),_:2},1032,["onClick"])),[[B,"edit"]]):_("",!0),e.developer_status==0?c((i(),V(k,{key:1,size:"small",text:"",type:"danger",onClick:I=>e.onRowDel(p.row)},{default:a(()=>[ke]),_:2},1032,["onClick"])),[[B,"del"]]):_("",!0)]),_:1})]),_:1},8,["data"])),[[P,e.tableData.loading]]),c(t(r,{total:e.tableData.total,page:e.tableData.param.pageNum,"onUpdate:page":E[2]||(E[2]=p=>e.tableData.param.pageNum=p),onPagination:e.typeList},null,8,["total","page","onPagination"]),[[Z,e.tableData.total>0]])])]),_:1}),t(y,{label:"\u67E5\u770B\u6570\u636E",name:"3"},{default:a(()=>[b("div",Be,[t(R,{value:e.jsonData,boxed:"",sort:"",theme:"jv-dark",onClick:e.onKeyclick},null,8,["value","onClick"])])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),t($,{ref:"editDicRef",onTypeList:e.typeList},null,8,["onTypeList"])])}var Le=G(x,[["render",we]]);export{Le as default};
