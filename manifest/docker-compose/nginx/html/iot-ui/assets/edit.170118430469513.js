import{_ as y,b as i,E as b}from"./index.1701184304695.js";import{p as w}from"./validator.1701184304695.js";import{L as S,h as k,a2 as U,ab as L,a as _,_ as e,T as u,e as z,ai as s,o as V,b as B,Y as A,Z as g,X as $}from"./vue.1701184304695.js";const h={parentId:-1,deptName:"",organizationId:1,orderNum:0,leader:"",phone:"",email:"",status:1},q=S({name:"systemEditDept",setup(l,{emit:o}){const F=k(null),t=U({isShowDialog:!1,ruleForm:{...h},deptData:[],orgData:[],rules:{organizationId:[{required:!0,message:"\u7EC4\u7EC7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],deptName:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],leader:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],phone:[{validator:w,trigger:"blur"}],email:[{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u90AE\u7BB1",trigger:"blur"}]}}),E=r=>{n(),i.dept.getList({status:1}).then(m=>{t.deptData=m||[]}),i.org.getList({status:1}).then(m=>{t.orgData=m||[]}),r&&typeof r=="object"?t.ruleForm=r:r&&typeof r=="number"&&(t.ruleForm.parentId=r),t.isShowDialog=!0},p=()=>{t.isShowDialog=!1},f=()=>{p()},d=()=>{console.log(t.ruleForm.parentId);const r=z(F);!r||r.validate(m=>{m&&(console.log(t.ruleForm),console.log(t.ruleForm.parentId),t.ruleForm.parentId||(t.ruleForm.parentId=-1),console.log(t.ruleForm.parentId),t.ruleForm.deptId?i.dept.edit(t.ruleForm).then(()=>{b.success("\u4FEE\u6539\u6210\u529F"),p(),o("deptList")}):i.dept.add(t.ruleForm).then(()=>{b.success("\u6DFB\u52A0\u6210\u529F"),p(),o("deptList")}))})},n=()=>{t.ruleForm={...h}};return{openDialog:E,closeDialog:p,onCancel:f,onSubmit:d,formRef:F,...L(t)}}}),R={class:"system-edit-dept-container"},T={key:0},j={class:"dialog-footer"},x=A("\u53D6 \u6D88");function M(l,o,F,t,E,p){const f=s("el-cascader"),d=s("el-form-item"),n=s("el-col"),r=s("el-input"),m=s("el-input-number"),I=s("el-switch"),N=s("el-row"),v=s("el-form"),c=s("el-button"),C=s("el-dialog");return V(),_("div",R,[e(C,{title:(l.ruleForm.deptId?"\u4FEE\u6539":"\u6DFB\u52A0")+"\u90E8\u95E8",modelValue:l.isShowDialog,"onUpdate:modelValue":o[7]||(o[7]=a=>l.isShowDialog=a),width:"769px"},{footer:u(()=>[B("span",j,[e(c,{onClick:l.onCancel,size:"default"},{default:u(()=>[x]),_:1},8,["onClick"]),e(c,{type:"primary",onClick:l.onSubmit,size:"default"},{default:u(()=>[A(g(l.ruleForm.deptId?"\u4FEE \u6539":"\u6DFB \u52A0"),1)]),_:1},8,["onClick"])])]),default:u(()=>[e(v,{ref:"formRef",model:l.ruleForm,rules:l.rules,size:"default","label-width":"90px"},{default:u(()=>[e(N,{gutter:35},{default:u(()=>[e(n,{xs:24,sm:24,md:24,lg:24,xl:24},{default:u(()=>[e(d,{label:"\u4E0A\u7EA7\u90E8\u95E8"},{default:u(()=>[e(f,{options:l.deptData,props:{checkStrictly:!0,emitPath:!1,value:"deptId",label:"deptName"},placeholder:"\u8BF7\u9009\u62E9\u90E8\u95E8",clearable:"",class:"w100",modelValue:l.ruleForm.parentId,"onUpdate:modelValue":o[0]||(o[0]=a=>l.ruleForm.parentId=a)},{default:u(({node:a,data:D})=>[B("span",null,g(D.deptName),1),a.isLeaf?$("",!0):(V(),_("span",T," ("+g(D.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[e(d,{label:"\u90E8\u95E8\u540D\u79F0",prop:"deptName"},{default:u(()=>[e(r,{modelValue:l.ruleForm.deptName,"onUpdate:modelValue":o[1]||(o[1]=a=>l.ruleForm.deptName=a),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[e(d,{label:"\u8D1F\u8D23\u4EBA",prop:"leader"},{default:u(()=>[e(r,{modelValue:l.ruleForm.leader,"onUpdate:modelValue":o[2]||(o[2]=a=>l.ruleForm.leader=a),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[e(d,{label:"\u624B\u673A\u53F7",prop:"phone"},{default:u(()=>[e(r,{modelValue:l.ruleForm.phone,"onUpdate:modelValue":o[3]||(o[3]=a=>l.ruleForm.phone=a),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[e(d,{label:"\u90AE\u7BB1",prop:"email"},{default:u(()=>[e(r,{modelValue:l.ruleForm.email,"onUpdate:modelValue":o[4]||(o[4]=a=>l.ruleForm.email=a),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[e(d,{label:"\u6392\u5E8F"},{default:u(()=>[e(m,{modelValue:l.ruleForm.orderNum,"onUpdate:modelValue":o[5]||(o[5]=a=>l.ruleForm.orderNum=a),min:0,max:999,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[e(d,{label:"\u90E8\u95E8\u72B6\u6001"},{default:u(()=>[e(I,{modelValue:l.ruleForm.status,"onUpdate:modelValue":o[6]||(o[6]=a=>l.ruleForm.status=a),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"\u542F","inactive-text":"\u7981"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var Y=y(q,[["render",M]]);export{Y as default};
