import{L as M,h as O,a2 as U,k as q,ab as I,a as T,b as p,Z as y,O as Q,Y as v,_ as t,T as o,U as i,S as B,aD as X,ai as d,as as A,o as _,aa as V,X as E}from"./vue.1701184304695.js";import{_ as Y,F as Z,E as w,h as j}from"./index.1701184304695.js";import G from"./editNode.1701184304695.js";import H from"./relation.1701184304695.js";import{a as h}from"./index.17011843046957.js";const J=M({name:"dataDetail",components:{EditDic:G,RelationDic:H},setup(e,c){const b=O(),g=O(),r=X(),u=U({config:{},isShowDialog:!1,detail:[],developer_status:0,tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,tid:r.params&&r.params.id,status:"",dateRange:[]}}});q(()=>{const a=r.params&&r.params.id;h.template.detail(a).then(s=>{u.detail=s.data,u.developer_status=s.data.status}),f()});const f=()=>{u.tableData.loading=!0,h.tnode.getList(u.tableData.param).then(a=>{u.tableData.data=a.list}).finally(()=>u.tableData.loading=!1)};return{Edit:Z,CkOption:()=>{h.template.relation_check(r.params.id).then(a=>{if(a.yes&&u.developer_status==0){let s={id:r.params.id};g.value.openDialog(s)}else u.developer_status==1?h.tnode.undeploy({id:r.params.id}).then(s=>{w.success("\u64CD\u4F5C\u6210\u529F"),u.developer_status=0}):h.tnode.deploy({id:r.params.id}).then(s=>{w.success("\u64CD\u4F5C\u6210\u529F"),u.developer_status=1})})},relationRef:g,editDicRef:b,onOpenAdd:()=>{b.value.openDialog({tid:r.params.id,id:0,from:1,isSorting:0,isDesc:1})},typeList:f,onRowDel:a=>{let s="\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6240\u9009\u6570\u636E\uFF1F",l=[];if(a?(s=`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u6570\u636E\u8282\u70B9\uFF1A\u201C${a.name}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,l=a.id):l=u.ids,l.length===0){w.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E\u3002");return}j.confirm(s,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{h.tnode.delete(l).then(()=>{w.success("\u5220\u9664\u6210\u529F"),f()})}).catch(()=>{})},onOpenEdit:a=>{b.value.openDialog(a)},handleClick:(a,s)=>{console.log(a,s)},...I(u)}}}),P={class:"system-dic-container"},W={class:"content"},x={class:"cont_box"},ee={class:"title"},te={class:"title",style:{"margin-left":"20px"}},ae={class:"pro-status"},oe={class:"content-box"},le={class:"wu-box"},ue={class:"system-user-search mb15"},se=v(" \u67E5\u8BE2 "),ne=v(" \u91CD\u7F6E "),ie=v(" \u65B0\u589E\u5B57\u6BB5\u8282\u70B9 "),de={key:0},re=v("\u4FEE\u6539"),pe=v("\u5220\u9664");function ce(e,c,b,g,r,u){const f=d("el-input"),C=d("el-form-item"),R=d("ele-Search"),F=d("el-icon"),D=d("el-button"),L=d("ele-Refresh"),a=d("ele-FolderAdd"),s=d("el-form"),l=d("el-table-column"),z=d("el-table"),$=d("EditDic"),S=d("RelationDic"),k=A("auth"),m=A("col"),K=A("loading");return _(),T("div",P,[p("div",W,[p("div",x,[p("div",ee,"\u6A21\u578B\u6807\u8BC6\uFF1A"+y(e.detail.key),1),p("div",te,"\u6A21\u578B\u8868\u540D\uFF1A"+y(e.detail.name),1),p("div",ae,[p("span",{class:Q(e.developer_status==1?"on":"off")},null,2),v(y(e.developer_status==1?"\u5DF2\u53D1\u5E03":"\u672A\u53D1\u5E03"),1)]),p("div",{class:"pro-option",onClick:c[0]||(c[0]=(...n)=>e.CkOption&&e.CkOption(...n))},y(e.developer_status==1?"\u505C\u7528":"\u53D1\u5E03"),1)])]),p("div",oe,[p("div",le,[p("div",ue,[t(s,{model:e.tableData.param,ref:"queryRef",inline:!0,"label-width":"130px"},{default:o(()=>[t(C,{label:"\u5B57\u6BB5\u6807\u9898",prop:"key"},{default:o(()=>[t(f,{modelValue:e.tableData.param.key,"onUpdate:modelValue":c[1]||(c[1]=n=>e.tableData.param.key=n),placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u6807\u9898",clearable:"",size:"default",style:{width:"240px"},onKeyup:V(e.typeList,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),t(C,{label:"\u5B57\u6BB5\u540D\u79F0",prop:"name"},{default:o(()=>[t(f,{modelValue:e.tableData.param.name,"onUpdate:modelValue":c[2]||(c[2]=n=>e.tableData.param.name=n),placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0",clearable:"",size:"default",style:{width:"240px"},onKeyup:V(e.typeList,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),t(C,null,{default:o(()=>[t(D,{size:"default",type:"primary",class:"ml10",onClick:e.typeList},{default:o(()=>[t(F,null,{default:o(()=>[t(R)]),_:1}),se]),_:1},8,["onClick"]),t(D,{size:"default",onClick:c[3]||(c[3]=n=>e.resetQuery(e.queryRef))},{default:o(()=>[t(F,null,{default:o(()=>[t(L)]),_:1}),ne]),_:1}),e.developer_status==0?i((_(),B(D,{key:0,size:"default",type:"success",class:"ml10",onClick:e.onOpenAdd},{default:o(()=>[t(F,null,{default:o(()=>[t(a)]),_:1}),ie]),_:1},8,["onClick"])),[[k,"add"]]):E("",!0)]),_:1})]),_:1},8,["model"])]),i((_(),B(z,{data:e.tableData.data,style:{width:"100%"}},{default:o(()=>[i(t(l,{label:"ID",align:"center",prop:"id",width:"60"},null,512),[[m,"id"]]),i(t(l,{label:"\u5B57\u6BB5\u540D\u79F0",prop:"key",width:"120","show-overflow-tooltip":!0},null,512),[[m,"key"]]),i(t(l,{label:"\u5B57\u6BB5\u6807\u9898",prop:"name",width:"120","show-overflow-tooltip":!0},null,512),[[m,"name"]]),i(t(l,{label:"\u7C7B\u578B",prop:"dataType",width:"85","show-overflow-tooltip":!0},null,512),[[m,"dataType"]]),i((_(),B(l,{label:"\u6570\u636E\u6E90\u540D\u79F0",align:"center"},{default:o(n=>[n.row.from==2?(_(),T("span",de,y(n.row.source.name),1)):E("",!0)]),_:1})),[[m,"from"]]),i(t(l,{label:"\u9ED8\u8BA4\u503C",prop:"default",width:"80","show-overflow-tooltip":!0},null,512),[[m,"default"]]),i(t(l,{label:"\u5907\u6CE8\u8BF4\u660E",prop:"value",width:"100","show-overflow-tooltip":!0},null,512),[[m,"value"]]),i(t(l,{prop:"createdAt",label:"\u521B\u5EFA\u65F6\u95F4",align:"center",width:"160"},null,512),[[m,"createdAt"]]),t(l,{label:"\u64CD\u4F5C",width:"100",align:"center",fixed:"right"},{default:o(n=>[e.developer_status==0?i((_(),B(D,{key:0,size:"small",text:"",type:"warning",onClick:N=>e.onOpenEdit(n.row)},{default:o(()=>[re]),_:2},1032,["onClick"])),[[k,"edit"]]):E("",!0),e.developer_status==0?i((_(),B(D,{key:1,size:"small",text:"",type:"danger",onClick:N=>e.onRowDel(n.row)},{default:o(()=>[pe]),_:2},1032,["onClick"])),[[k,"del"]]):E("",!0)]),_:1})]),_:1},8,["data"])),[[K,e.tableData.loading]])])]),t($,{ref:"editDicRef",onTypeList:e.typeList},null,8,["onTypeList"]),t(S,{ref:"relationRef",onTypeList:e.typeList},null,8,["onTypeList"])])}var ve=Y(J,[["render",ce]]);export{ve as default};
