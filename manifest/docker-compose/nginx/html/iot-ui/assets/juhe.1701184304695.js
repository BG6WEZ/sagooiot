import{a as y}from"./index.17011843046957.js";import{_ as v,E as k}from"./index.1701184304695.js";import{L as A,h as C,a2 as K,ab as T,a as c,_ as r,T as l,e as U,ai as s,o as i,b as m,F as _,a8 as b,S as E,Z as g,Y as N}from"./vue.1701184304695.js";const S=A({name:"Edit",setup(u,{emit:a}){const D=C(null),t=K({isShowDialog:!1,sourceData:[],unitData:[{label:"\u79D2",value:1},{label:"\u5206",value:2},{label:"\u65F6",value:3},{label:"\u5929",value:4}],ruleForm:{id:0,GroupNodeKey:"",TimeNodeKey:"",Duration:"",TimeUnit:""},rules:{GroupNodeKey:[{required:!0,message:"\u5206\u7EC4\u8282\u70B9key\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],TimeNodeKey:[{required:!0,message:"\u65F6\u95F4\u7A97\u53E3\u8282\u70B9key\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],Duration:[{required:!0,message:"\u65F6\u95F4\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],TimeUnit:[{required:!0,message:"\u65F6\u95F4\u5355\u4F4D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),B=o=>{h(),o&&(t.ruleForm.id=o.id,y.template.aggregate_from(o.id).then(d=>{y.node.getList({sourceId:d.id}).then(F=>{t.sourceData=F.list,t.ruleForm.GroupNodeKey=o.groupNodeKey,t.ruleForm.TimeNodeKey=o.timeNodeKey,o.duration>0&&(t.ruleForm.Duration=o.duration,t.ruleForm.TimeUnit=o.timeUnit)})})),t.isShowDialog=!0},h=()=>{t.ruleForm={id:0,GroupNodeKey:"",TimeNodeKey:"",Duration:"",TimeUnit:""}},n=()=>{t.isShowDialog=!1};return{openDialog:B,closeDialog:n,onCancel:()=>{n()},onSubmit:()=>{const o=U(D);!o||o.validate(d=>{d&&y.template.aggregate(t.ruleForm).then(()=>{k.success("\u8BBE\u7F6E\u6210\u529F"),n(),a("typeList")})})},formRef:D,...T(t)}}}),G={class:"system-edit-dic-container"},z={style:{float:"left"}},q={style:{float:"right","font-size":"13px"}},w={style:{float:"left"}},L={style:{float:"right","font-size":"13px"}},$={class:"dialog-footer"},R=N("\u53D6 \u6D88"),I=N("\u8BBE\u7F6E");function J(u,a,D,t,B,h){const n=s("el-option"),p=s("el-select"),f=s("el-form-item"),o=s("el-input"),d=s("el-form"),F=s("el-button"),V=s("el-dialog");return i(),c("div",G,[r(V,{title:"\u8BBE\u7F6E\u805A\u5408",modelValue:u.isShowDialog,"onUpdate:modelValue":a[4]||(a[4]=e=>u.isShowDialog=e),width:"769px"},{footer:l(()=>[m("span",$,[r(F,{onClick:u.onCancel,size:"default"},{default:l(()=>[R]),_:1},8,["onClick"]),r(F,{type:"primary",onClick:u.onSubmit,size:"default"},{default:l(()=>[I]),_:1},8,["onClick"])])]),default:l(()=>[r(d,{model:u.ruleForm,ref:"formRef",rules:u.rules,size:"default","label-width":"110px"},{default:l(()=>[r(f,{label:"\u5206\u7EC4\u8282\u70B9",prop:"GroupNodeKey"},{default:l(()=>[r(p,{modelValue:u.ruleForm.GroupNodeKey,"onUpdate:modelValue":a[0]||(a[0]=e=>u.ruleForm.GroupNodeKey=e),filterable:"",placeholder:"\u8BF7\u9009\u62E9\u5206\u7EC4\u8282\u70B9",class:"w100"},{default:l(()=>[(i(!0),c(_,null,b(u.sourceData,e=>(i(),E(n,{key:e.id,label:e.name,value:e.key},{default:l(()=>[m("span",z,g(e.name),1),m("span",q,g(e.key),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(f,{label:"\u65F6\u95F4\u7A97\u53E3\u8282\u70B9",prop:"TimeNodeKey"},{default:l(()=>[r(p,{modelValue:u.ruleForm.TimeNodeKey,"onUpdate:modelValue":a[1]||(a[1]=e=>u.ruleForm.TimeNodeKey=e),filterable:"",placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4\u7A97\u53E3\u8282\u70B9",class:"w100"},{default:l(()=>[(i(!0),c(_,null,b(u.sourceData,e=>(i(),E(n,{key:e.id,label:e.name,value:e.key},{default:l(()=>[m("span",w,g(e.name),1),m("span",L,g(e.key),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(f,{label:"\u65F6\u95F4\u503C",prop:"Duration"},{default:l(()=>[r(o,{modelValue:u.ruleForm.Duration,"onUpdate:modelValue":a[2]||(a[2]=e=>u.ruleForm.Duration=e),placeholder:"\u8BF7\u8F93\u5165\u65F6\u95F4\u503C",class:"w-35"},null,8,["modelValue"]),r(p,{modelValue:u.ruleForm.TimeUnit,"onUpdate:modelValue":a[3]||(a[3]=e=>u.ruleForm.TimeUnit=e),placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D"},{default:l(()=>[(i(!0),c(_,null,b(u.unitData,e=>(i(),E(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}var Z=v(S,[["render",J]]);export{Z as default};
