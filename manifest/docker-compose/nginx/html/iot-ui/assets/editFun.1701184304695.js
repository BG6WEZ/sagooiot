import{a as T}from"./index.170118430469519.js";import{_ as R,v as S,x as $,y as I,E as j}from"./index.1701184304695.js";import J from"./editOption.1701184304695.js";import{L as P,h as V,a2 as U,ab as q,a as F,_ as o,T as a,e as z,ai as d,o as c,b as n,Y as E,Z as f,F as L,a8 as w}from"./vue.1701184304695.js";const N=P({name:"deviceEditPro",components:{Plus:S,Minus:$,Right:I,EditOption:J},setup(t,{emit:l}){const B=V(null),C=V(),k=V(),e=U({isShowDialog:!1,typeData:[],type:"",types:"",productId:0,valueType:{type:"",maxLength:"",trueText:"\u662F",trueValue:"true",falseText:"\u5426",falseValue:"false"},elementType:{type:"",maxLength:""},enumdata:[{text:"",value:""}],jsondata:[],inputsdata:[],outputsdata:[],ruleForm:{productId:0,name:"",key:"",inputs:[],outputs:[],valueType:{type:"",maxLength:""},desc:""},rules:{name:[{required:!0,message:"\u529F\u80FD\u5B9A\u4E49\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u529F\u80FD\u5B9A\u4E49\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B",trigger:"blur"}]}}),m=(u,i)=>{p(),e.ruleForm=u,e.productId=i,e.inputsdata=u.inputs||[],e.outputsdata=u.outputs||[],e.isShowDialog=!0},p=()=>{e.ruleForm={name:"",key:"",status:1,valueType:{type:"",maxLength:""},desc:""},e.type="",e.types="",e.inputsdata=[],e.outputsdata=[],e.elementType=[],e.valueType={}},_=u=>{e.type=u,e.ruleForm.type=u,console.log(u)},y=u=>{console.log(u),e.types=u,console.log(u)},D=()=>{e.enumdata.push({text:"",value:""})},A=u=>{e.enumdata.splice(u,1)},g=(u,i)=>{i=="fun"?e.inputsdata.splice(u,1):e.jsondata.splice(u,1)},O=(u,i)=>{i=="fun",e.outputsdata.splice(u,1)},h=u=>{C.value.openDialog({product_id:0,id:0,type_data:u})},s=u=>{k.value.openDialog({product_id:0,id:0,type_data:u})},r=(u,i)=>{i=="fun"?e.inputsdata.push(u):e.jsondata.push(u)},b=(u,i)=>{i=="fun",e.outputsdata.push(u)},v=()=>{e.isShowDialog=!1};return{editOptionRef:C,editOptionOutRef:k,getOptionData:r,getOptionDataOut:b,openDialog:m,deljson:g,deljsonOut:O,addEnum:D,delEnum:A,addJson:h,addJsonOut:s,seletChange:_,seletChanges:y,closeDialog:v,onCancel:()=>{v()},onSubmit:()=>{const u=z(B);!u||u.validate(i=>{i&&(e.ruleForm.inputs=e.inputsdata,e.ruleForm.outputs=e.outputsdata,e.ruleForm.id!==0?(e.ruleForm.productId=e.productId,T.model.functionedit(e.ruleForm).then(()=>{j.success("\u529F\u80FD\u5B9A\u4E49\u7C7B\u578B\u4FEE\u6539\u6210\u529F"),v(),l("typeList")})):T.model.functionadd(e.ruleForm).then(()=>{j.success("\u529F\u80FD\u5B9A\u4E49\u7C7B\u578B\u6DFB\u52A0\u6210\u529F"),v(),l("typeList")}))})},formRef:B,...q(e)}}}),M={class:"system-edit-dic-container"},W={class:"jsonlist"},Y=n("div",null,"\u53C2\u6570\u540D\u79F0\uFF1A",-1),Z={style:{width:"60%"}},G={class:"jsonoption"},H=E("\u5220\u9664"),K={style:{display:"block",width:"100%"}},Q=n("div",null,"\u6DFB\u52A0\u53C2\u6570",-1),X={class:"jsonlist"},x=n("div",null,"\u53C2\u6570\u540D\u79F0\uFF1A",-1),ee={style:{width:"60%"}},ue={class:"jsonoption"},te=E("\u5220\u9664"),oe={style:{display:"block",width:"100%"}},se=n("div",null,"\u6DFB\u52A0\u53C2\u6570",-1),le={class:"dialog-footer"},ne=E("\u53D6 \u6D88");function ae(t,l,B,C,k,e){const m=d("el-input"),p=d("el-form-item"),_=d("el-link"),y=d("Plus"),D=d("el-icon"),A=d("el-form"),g=d("el-button"),O=d("el-dialog"),h=d("EditOption");return c(),F("div",M,[o(O,{title:(t.ruleForm.id!==0?"\u4FEE\u6539":"\u6DFB\u52A0")+"\u529F\u80FD\u5B9A\u4E49",modelValue:t.isShowDialog,"onUpdate:modelValue":l[5]||(l[5]=s=>t.isShowDialog=s),width:"769px"},{footer:a(()=>[n("span",le,[o(g,{onClick:t.onCancel,size:"default"},{default:a(()=>[ne]),_:1},8,["onClick"]),o(g,{type:"primary",onClick:t.onSubmit,size:"default"},{default:a(()=>[E(f(t.ruleForm.id!==0?"\u4FEE \u6539":"\u6DFB \u52A0"),1)]),_:1},8,["onClick"])])]),default:a(()=>[o(A,{model:t.ruleForm,ref:"formRef",rules:t.rules,size:"default","label-width":"120px"},{default:a(()=>[o(p,{label:"\u529F\u80FD\u5B9A\u4E49\u6807\u8BC6",prop:"key"},{default:a(()=>[o(m,{modelValue:t.ruleForm.key,"onUpdate:modelValue":l[0]||(l[0]=s=>t.ruleForm.key=s),placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u5B9A\u4E49\u6807\u8BC6",disabled:t.ruleForm.id!==0},null,8,["modelValue","disabled"])]),_:1}),o(p,{label:"\u529F\u80FD\u5B9A\u4E49\u540D\u79F0",prop:"name"},{default:a(()=>[o(m,{modelValue:t.ruleForm.name,"onUpdate:modelValue":l[1]||(l[1]=s=>t.ruleForm.name=s),placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u5B9A\u4E49\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(p,{label:"\u8F93\u5165\u53C2\u6570",prop:"maxLength"},{default:a(()=>[(c(!0),F(L,null,w(t.inputsdata,(s,r)=>(c(),F("div",{key:r,class:"jslist"},[n("div",W,[Y,n("div",Z,f(s.name)+" ("+f(s.key)+")",1),n("div",G,[o(_,{type:"primary",onClick:b=>t.deljson(r,"fun")},{default:a(()=>[H]),_:2},1032,["onClick"])])])]))),128)),n("div",K,[n("div",{class:"input-options",onClick:l[2]||(l[2]=s=>t.addJson("fun"))},[o(D,null,{default:a(()=>[o(y)]),_:1}),Q])])]),_:1}),o(p,{label:"\u8F93\u51FA\u53C2\u6570",prop:""},{default:a(()=>[(c(!0),F(L,null,w(t.outputsdata,(s,r)=>(c(),F("div",{key:r,class:"jslist"},[n("div",X,[x,n("div",ee,f(s.name)+" ("+f(s.key)+")",1),n("div",ue,[o(_,{type:"primary",onClick:b=>t.deljsonOut(r,"fun")},{default:a(()=>[te]),_:2},1032,["onClick"])])])]))),128)),n("div",oe,[n("div",{class:"input-options",onClick:l[3]||(l[3]=s=>t.addJsonOut("fun"))},[o(D,null,{default:a(()=>[o(y)]),_:1}),se])])]),_:1}),o(p,{label:"\u529F\u80FD\u5B9A\u4E49\u63CF\u8FF0	",prop:"desc"},{default:a(()=>[o(m,{modelValue:t.ruleForm.desc,"onUpdate:modelValue":l[4]||(l[4]=s=>t.ruleForm.desc=s),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u529F\u80FD\u5B9A\u4E49\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),o(h,{ref:"editOptionRef",key:"editOptionRef",onTypeList:t.getOptionData},null,8,["onTypeList"]),o(h,{ref:"editOptionOutRef",key:"editOptionOutRef",onTypeList:t.getOptionDataOut},null,8,["onTypeList"])])}var ce=R(N,[["render",ae]]);export{ce as default};
