import{n as A,L as U,h as L,a2 as O,l as q,k as x,i as M,ab as z,ai as c,o as V,a as _,_ as l,T as o,S as w,O as S,$ as N,U as H,V as j,b,Z as v,X as B,F as X,a8 as Y,e as Z,Y as C}from"./vue.1701184304695.js";import{q as G,_ as W,b as k,E as P,r as J}from"./index.1701184304695.js";const K=()=>new Promise((e,n)=>{A(()=>{const i=document.styleSheets;let t=[],u=[];for(let s=0;s<i.length;s++)i[s].href&&i[s].href.indexOf("at.alicdn.com")>-1&&t.push(i[s]);for(let s=0;s<t.length;s++)for(let r=0;r<t[s].cssRules.length;r++)t[s].cssRules[r].selectorText&&t[s].cssRules[r].selectorText.indexOf(".icon-")>-1&&u.push(`${t[s].cssRules[r].selectorText.substring(1,t[s].cssRules[r].selectorText.length).replace(/\:\:before/gi,"")}`);u.length>0?e(u):n("\u672A\u83B7\u53D6\u5230\u503C\uFF0C\u8BF7\u5237\u65B0\u91CD\u8BD5")})}),Q=()=>new Promise((e,n)=>{A(()=>{const i=G,t=[];for(const u in i)t.push(`ele-${i[u].name}`);t.length>0?e(t):n("\u672A\u83B7\u53D6\u5230\u503C\uFF0C\u8BF7\u5237\u65B0\u91CD\u8BD5")})}),ee=()=>new Promise((e,n)=>{A(()=>{const i=document.styleSheets;let t=[],u=[];for(let s=0;s<i.length;s++)i[s].href&&i[s].href.indexOf("netdna.bootstrapcdn.com")>-1&&t.push(i[s]);for(let s=0;s<t.length;s++)for(let r=0;r<t[s].cssRules.length;r++)t[s].cssRules[r].selectorText&&t[s].cssRules[r].selectorText.indexOf(".fa-")===0&&t[s].cssRules[r].selectorText.indexOf(",")===-1&&/::before/.test(t[s].cssRules[r].selectorText)&&u.push(`${t[s].cssRules[r].selectorText.substring(1,t[s].cssRules[r].selectorText.length).replace(/\:\:before/gi,"")}`);u.length>0?e(u.reverse()):n("\u672A\u83B7\u53D6\u5230\u503C\uFF0C\u8BF7\u5237\u65B0\u91CD\u8BD5")})}),T={ali:()=>K(),ele:()=>Q(),awe:()=>ee()},le=U({name:"iconSelector",emits:["update:modelValue","get","clear"],props:{prepend:{type:String,default:()=>"ele-Pointer"},placeholder:{type:String,default:()=>"\u8BF7\u8F93\u5165\u5185\u5BB9\u641C\u7D22\u56FE\u6807\u6216\u8005\u9009\u62E9\u56FE\u6807"},size:{type:String,default:()=>"default"},title:{type:String,default:()=>"\u8BF7\u9009\u62E9\u56FE\u6807"},type:{type:String,default:()=>"ele"},disabled:{type:Boolean,default:()=>!1},clearable:{type:Boolean,default:()=>!0},emptyDescription:{type:String,default:()=>"\u65E0\u76F8\u5173\u56FE\u6807"},modelValue:String},setup(e,{emit:n}){const i=L(),t=L(),u=O({fontIconPrefix:"",fontIconVisible:!1,fontIconWidth:0,fontIconSearch:"",fontIconTabsIndex:0,fontIconSheetsList:[],fontIconPlaceholder:"",fontIconType:"ali",fontIconShow:!0}),s=()=>{if(u.fontIconVisible=!0,!e.modelValue)return!1;u.fontIconSearch="",u.fontIconPlaceholder=e.modelValue},r=()=>{setTimeout(()=>{u.fontIconSheetsList.filter(h=>h===u.fontIconSearch).length<=0&&(u.fontIconSearch="")},300)},d=()=>{if(e.modelValue==="")return!1;u.fontIconPlaceholder=e.modelValue,u.fontIconPrefix=e.modelValue},f=q(()=>{if(!u.fontIconSearch)return u.fontIconSheetsList;let p=u.fontIconSearch.trim().toLowerCase();return u.fontIconSheetsList.filter(h=>{if(h.toLowerCase().indexOf(p)!==-1)return h})}),m=()=>{A(()=>{u.fontIconWidth=i.value.$el.offsetWidth})},E=()=>{window.addEventListener("resize",()=>{m()})},g=async p=>{u.fontIconSheetsList=[],p==="ali"?await T.ali().then(h=>{u.fontIconSheetsList=h.map(y=>`iconfont ${y}`)}):p==="ele"?await T.ele().then(h=>{u.fontIconSheetsList=h}):p==="awe"&&await T.awe().then(h=>{u.fontIconSheetsList=h.map(y=>`fa ${y}`)}),u.fontIconPlaceholder=e.placeholder,d(),t.value.wrap$.scrollTop=0},I=p=>{u.fontIconType=p,g(p)},F=p=>{u.fontIconPlaceholder=p,u.fontIconVisible=!1,u.fontIconPrefix=p,n("get",u.fontIconPrefix),n("update:modelValue",u.fontIconPrefix)},D=()=>{u.fontIconPrefix="",n("clear",u.fontIconPrefix),n("update:modelValue",u.fontIconPrefix)};return x(()=>{var p,h,y;e.type==="all"?((p=e.modelValue)==null?void 0:p.indexOf("iconfont"))>-1?I("ali"):((h=e.modelValue)==null?void 0:h.indexOf("ele-"))>-1?I("ele"):((y=e.modelValue)==null?void 0:y.indexOf("fa"))>-1?I("awe"):I("ali"):I(e.type),E(),m()}),M(()=>e.modelValue,()=>{d()}),{inputWidthRef:i,selectorScrollbarRef:t,fontIconSheetsFilterList:f,onColClick:F,onIconChange:I,onClearFontIcon:D,onIconFocus:s,onIconBlur:r,...z(u)}}}),oe={class:"icon-selector"},ne={class:"icon-selector-warp"},te={class:"icon-selector-warp-title flex"},ue={class:"flex-auto"},se={key:0,class:"icon-selector-warp-title-tab"},ae={class:"icon-selector-warp-row"},re={class:"flex-margin"},ie={class:"icon-selector-warp-item-value"};function de(e,n,i,t,u,s){const r=c("SvgIcon"),d=c("el-input"),f=c("el-col"),m=c("el-row"),E=c("el-empty"),g=c("el-scrollbar"),I=c("el-popover");return V(),_("div",oe,[l(I,{placement:"bottom",width:e.fontIconWidth,visible:e.fontIconVisible,"onUpdate:visible":n[4]||(n[4]=F=>e.fontIconVisible=F),"popper-class":"icon-selector-popper"},{reference:o(()=>[l(d,{modelValue:e.fontIconSearch,"onUpdate:modelValue":n[0]||(n[0]=F=>e.fontIconSearch=F),placeholder:e.fontIconPlaceholder,clearable:e.clearable,disabled:e.disabled,size:e.size,ref:"inputWidthRef",onClear:e.onClearFontIcon,onFocus:e.onIconFocus,onBlur:e.onIconBlur},{prepend:o(()=>{var F,D;return[(e.fontIconPrefix===""?((F=e.prepend)==null?void 0:F.indexOf("ele-"))>-1:((D=e.fontIconPrefix)==null?void 0:D.indexOf("ele-"))>-1)?(V(),w(r,{key:0,name:e.fontIconPrefix===""?e.prepend:e.fontIconPrefix,class:"font14"},null,8,["name"])):(V(),_("i",{key:1,class:S([e.fontIconPrefix===""?e.prepend:e.fontIconPrefix,"font14"])},null,2))]}),_:1},8,["modelValue","placeholder","clearable","disabled","size","onClear","onFocus","onBlur"])]),default:o(()=>[l(N,{name:"el-zoom-in-top"},{default:o(()=>[H(b("div",ne,[b("div",te,[b("div",ue,v(e.title),1),e.type==="all"?(V(),_("div",se,[b("span",{class:S([{"span-active":e.fontIconType==="ali"},"ml10"]),onClick:n[1]||(n[1]=F=>e.onIconChange("ali")),title:"iconfont \u56FE\u6807"},"ali",2),b("span",{class:S([{"span-active":e.fontIconType==="ele"},"ml10"]),onClick:n[2]||(n[2]=F=>e.onIconChange("ele")),title:"elementPlus \u56FE\u6807"},"ele",2),b("span",{class:S([{"span-active":e.fontIconType==="awe"},"ml10"]),onClick:n[3]||(n[3]=F=>e.onIconChange("awe")),title:"fontawesome \u56FE\u6807"},"awe",2)])):B("",!0)]),b("div",ae,[l(g,{ref:"selectorScrollbarRef"},{default:o(()=>[e.fontIconSheetsFilterList.length>0?(V(),w(m,{key:0,gutter:10},{default:o(()=>[(V(!0),_(X,null,Y(e.fontIconSheetsFilterList,(F,D)=>(V(),w(f,{xs:6,sm:4,md:4,lg:4,xl:4,onClick:p=>e.onColClick(F),key:D},{default:o(()=>[b("div",{class:S(["icon-selector-warp-item",{"icon-selector-active":e.fontIconPrefix===F}])},[b("div",re,[b("div",ie,[l(r,{name:F},null,8,["name"])])])],2)]),_:2},1032,["onClick"]))),128))]),_:1})):B("",!0),e.fontIconSheetsFilterList.length<=0?(V(),w(E,{key:1,"image-size":100,description:e.emptyDescription},null,8,["description"])):B("",!0)]),_:1},512)])],512),[[j,e.fontIconVisible]])]),_:1})]),_:1},8,["width","visible"])])}var fe=W(le,[["render",de]]);const R={id:void 0,parentId:-1,menuType:0,title:"",name:"",component:"",isLink:0,weigh:0,path:"",redirect:"",icon:"",isHide:0,isAffix:0,linkUrl:"",isIframe:0,status:1},me=U({name:"systemEditMenu",components:{IconSelector:fe},props:{visibleOptions:{type:Array,default:()=>[]},menu:{type:Array,default:()=>[]},acType:{type:String,default:()=>"add"}},setup(e,{emit:n}){const i=L(null),t=O({loading:!1,isShowDialog:!1,roles:[],ruleForm:{...R},rules:{parentId:[{required:!0,message:"\u7236\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],component:[{required:!0,message:"\u7EC4\u4EF6\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],path:[{required:!0,message:"\u8DEF\u7531\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],title:[{required:!0,message:"\u83DC\u5355\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u83DC\u5355\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],menuType:[{required:!0,message:"\u83DC\u5355\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),u=g=>{E(),A(()=>{g&&(e.acType==="add"?t.ruleForm.parentId=g.id:e.acType==="edit"&&k.menu.detail(g.id).then(I=>{t.ruleForm=I})),t.isShowDialog=!0,t.loading=!1})},s=()=>{t.isShowDialog=!1},r=()=>{t.ruleForm.isIframe===1?t.ruleForm.isLink=1:t.ruleForm.isLink=0},d=()=>{s()},f=()=>{const g=Z(i);!g||g.validate(I=>{I&&(t.loading=!0,t.ruleForm.parentId||(t.ruleForm.parentId=-1),e.acType==="add"?k.menu.add(t.ruleForm).then(()=>{P.success("\u83DC\u5355\u6DFB\u52A0\u6210\u529F"),s(),m(),n("menuList")}).finally(()=>{t.loading=!1}):k.menu.edit(t.ruleForm).then(()=>{P.success("\u83DC\u5355\u4FEE\u6539\u6210\u529F"),s(),m(),n("menuList")}).finally(()=>{t.loading=!1}))})},m=()=>{J()},E=()=>{t.ruleForm={...R}};return{ruleFormRef:i,openDialog:u,closeDialog:s,onSelectIframeChange:r,onCancel:d,onSubmit:f,resetMenuSession:m,...z(t)}}}),ce={class:"system-edit-menu-container"},pe={key:0},Fe=C("\u76EE\u5F55"),ge=C("\u83DC\u5355"),he=C("\u663E\u793A"),Ie=C("\u9690\u85CF"),be=C("\u662F"),Ce=C("\u5426"),Ee=C("\u662F"),Ve=C("\u5426"),De=C("\u56FA\u5B9A"),ye=C("\u4E0D\u56FA\u5B9A"),_e={class:"dialog-footer"},Se=C("\u53D6 \u6D88");function we(e,n,i,t,u,s){const r=c("el-cascader"),d=c("el-form-item"),f=c("el-col"),m=c("el-radio"),E=c("el-radio-group"),g=c("el-input"),I=c("IconSelector"),F=c("el-input-number"),D=c("el-row"),p=c("el-form"),h=c("el-button"),y=c("el-dialog");return V(),_("div",ce,[l(y,{title:(e.acType==="add"?"\u65B0\u589E":"\u4FEE\u6539")+"\u83DC\u5355",modelValue:e.isShowDialog,"onUpdate:modelValue":n[13]||(n[13]=a=>e.isShowDialog=a),width:"769px","close-on-click-modal":!1},{footer:o(()=>[b("span",_e,[l(h,{onClick:e.onCancel,size:"default"},{default:o(()=>[Se]),_:1},8,["onClick"]),l(h,{type:"primary",onClick:e.onSubmit,size:"default",loading:e.loading},{default:o(()=>[C(v(e.acType==="add"?"\u65B0 \u589E":"\u4FEE \u6539"),1)]),_:1},8,["onClick","loading"])])]),default:o(()=>[l(p,{model:e.ruleForm,rules:e.rules,ref:"ruleFormRef",size:"default","label-width":"80px"},{default:o(()=>[l(D,{gutter:35},{default:o(()=>[l(f,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(d,{label:"\u4E0A\u7EA7\u83DC\u5355",prop:"parentId"},{default:o(()=>[l(r,{options:[{id:-1,title:"\u4E3B\u7C7B\u76EE",children:e.menu}],props:{label:"title",value:"id",checkStrictly:!0,emitPath:!1},placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u83DC\u5355",clearable:!1,class:"w100",modelValue:e.ruleForm.parentId,"onUpdate:modelValue":n[0]||(n[0]=a=>e.ruleForm.parentId=a)},{default:o(({node:a,data:$})=>[b("span",null,v($.title),1),a.isLeaf?B("",!0):(V(),_("span",pe," ("+v($.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(d,{label:"\u83DC\u5355\u7C7B\u578B",prop:"menuType"},{default:o(()=>[l(E,{modelValue:e.ruleForm.menuType,"onUpdate:modelValue":n[1]||(n[1]=a=>e.ruleForm.menuType=a)},{default:o(()=>[l(m,{label:0},{default:o(()=>[Fe]),_:1}),l(m,{label:1},{default:o(()=>[ge]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u83DC\u5355\u540D\u79F0",prop:"title"},{default:o(()=>[l(g,{modelValue:e.ruleForm.title,"onUpdate:modelValue":n[2]||(n[2]=a=>e.ruleForm.title=a),placeholder:"\u8BF7\u586B\u5199\u83DC\u5355\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u89C4\u5219\u540D\u79F0",prop:"name"},{default:o(()=>[l(g,{modelValue:e.ruleForm.name,"onUpdate:modelValue":n[3]||(n[3]=a=>e.ruleForm.name=a),placeholder:"\u8BF7\u586B\u5199\u89C4\u5219\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u8DEF\u7531\u8DEF\u5F84",prop:"path"},{default:o(()=>[l(g,{modelValue:e.ruleForm.path,"onUpdate:modelValue":n[4]||(n[4]=a=>e.ruleForm.path=a),placeholder:"\u8DEF\u7531\u4E2D\u7684 path \u503C",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:o(()=>[l(g,{modelValue:e.ruleForm.component,"onUpdate:modelValue":n[5]||(n[5]=a=>e.ruleForm.component=a),placeholder:"\u7EC4\u4EF6\u8DEF\u5F84",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u83DC\u5355\u56FE\u6807"},{default:o(()=>[l(I,{placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u56FE\u6807",modelValue:e.ruleForm.icon,"onUpdate:modelValue":n[6]||(n[6]=a=>e.ruleForm.icon=a),type:"all"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u94FE\u63A5\u5730\u5740"},{default:o(()=>[l(g,{modelValue:e.ruleForm.linkUrl,"onUpdate:modelValue":n[7]||(n[7]=a=>e.ruleForm.linkUrl=a),placeholder:"\u5916\u94FE/\u5185\u5D4C\u65F6\u94FE\u63A5\u5730\u5740\uFF08http:xxx.com\uFF09",clearable:"",disabled:e.ruleForm.isLink===0},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u83DC\u5355\u6392\u5E8F"},{default:o(()=>[l(F,{modelValue:e.ruleForm.weigh,"onUpdate:modelValue":n[8]||(n[8]=a=>e.ruleForm.weigh=a),"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u662F\u5426\u9690\u85CF"},{default:o(()=>[l(E,{modelValue:e.ruleForm.isHide,"onUpdate:modelValue":n[9]||(n[9]=a=>e.ruleForm.isHide=a)},{default:o(()=>[l(m,{label:0},{default:o(()=>[he]),_:1}),l(m,{label:1},{default:o(()=>[Ie]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u662F\u5426\u5916\u94FE"},{default:o(()=>[l(E,{modelValue:e.ruleForm.isLink,"onUpdate:modelValue":n[10]||(n[10]=a=>e.ruleForm.isLink=a),disabled:e.ruleForm.isIframe===1},{default:o(()=>[l(m,{label:1},{default:o(()=>[be]),_:1}),l(m,{label:0},{default:o(()=>[Ce]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(f,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u662F\u5426\u5185\u5D4C"},{default:o(()=>[l(E,{modelValue:e.ruleForm.isIframe,"onUpdate:modelValue":n[11]||(n[11]=a=>e.ruleForm.isIframe=a),onChange:e.onSelectIframeChange},{default:o(()=>[l(m,{label:1},{default:o(()=>[Ee]),_:1}),l(m,{label:0},{default:o(()=>[Ve]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1}),e.ruleForm.menuType===1?(V(),w(f,{key:0,xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(d,{label:"\u662F\u5426\u56FA\u5B9A"},{default:o(()=>[l(E,{modelValue:e.ruleForm.isAffix,"onUpdate:modelValue":n[12]||(n[12]=a=>e.ruleForm.isAffix=a)},{default:o(()=>[l(m,{label:1},{default:o(()=>[De]),_:1}),l(m,{label:0},{default:o(()=>[ye]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):B("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var ve=W(me,[["render",we]]);export{ve as default};
