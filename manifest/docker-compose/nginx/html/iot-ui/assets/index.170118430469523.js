import{L as P,h as B,a2 as I,k as X,ab as j,a as G,_ as t,T as a,ai as u,as as V,o as i,b as T,aa as N,U as s,S as d,X as C,V as H,Y as r}from"./vue.1701184304695.js";import J from"./edit.17011843046956.js";import{a as E}from"./index.170118430469519.js";import{_ as W,E as v,h as Z}from"./index.1701184304695.js";import"./tag.1701184304695.js";const x=P({name:"deviceInstance",components:{EditDic:J},setup(){const e=B(),n=B(),w=B(),S=B(),c=I({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,name:"",key:"",status:"",dateRange:[]}}}),$=()=>{m()},m=()=>{c.tableData.loading=!0,E.instance.getList(c.tableData.param).then(o=>{console.log(o),c.tableData.data=o.device,c.tableData.total=o.total}).finally(()=>c.tableData.loading=!1)},D=o=>{w.value.openDialog(o)},h=()=>{n.value.openDialog()},k=o=>{n.value.openDialog(o)},z=o=>{let p="\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6240\u9009\u6570\u636E\uFF1F",g=[];if(o?(p=`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BBE\u5907\uFF1A\u201C${o.name}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,g=[o.id]):g=c.ids,g.length===0){v.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E\u3002");return}Z.confirm(p,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{E.instance.del(g).then(()=>{v.success("\u5220\u9664\u6210\u529F"),m()})}).catch(()=>{})};return X(()=>{$()}),{addDicRef:e,editDicRef:n,detailRef:w,queryRef:S,onActionStatus:o=>{o.status==0?E.instance.devdeploy({id:o.id}).then(p=>{m(),v.success(p.message||"\u64CD\u4F5C\u6210\u529F")}):E.instance.devundeploy({id:o.id}).then(p=>{m(),v.success(p.message||"\u64CD\u4F5C\u6210\u529F")})},onOpenDetail:D,onOpenAddDic:h,onOpenEditDic:k,onRowDel:z,typeList:m,resetQuery:o=>{!o||(o.resetFields(),m())},handleSelectionChange:o=>{c.ids=o.map(p=>p.id)},...j(c)}}}),ee={class:"system-dic-container"},te={class:"system-user-search mb15"},ae=r(" \u67E5\u8BE2 "),le=r(" \u91CD\u7F6E "),oe=r(" \u65B0\u589E\u8BBE\u5907 "),ne=r(" \u5220\u9664 "),ue=r("\u79BB\u7EBF"),se=r("\u5728\u7EBF"),ie=r("\u672A\u542F\u7528"),de=T("span",null,"\u8BE6\u60C5",-1),re=r("\u4FEE\u6539"),pe=r("\u542F\u7528"),ce=r("\u505C\u7528"),me=r("\u5220\u9664");function _e(e,n,w,S,c,$){const m=u("el-input"),D=u("el-form-item"),h=u("el-option"),k=u("el-select"),z=u("el-date-picker"),L=u("ele-Search"),F=u("el-icon"),_=u("el-button"),o=u("ele-Refresh"),p=u("ele-FolderAdd"),g=u("ele-Delete"),U=u("el-form"),f=u("el-table-column"),A=u("el-tag"),K=u("router-link"),M=u("el-table"),O=u("pagination"),Y=u("el-card"),q=u("EditDic"),y=V("auth"),b=V("col"),Q=V("loading");return i(),G("div",ee,[t(Y,{shadow:"hover"},{default:a(()=>[T("div",te,[t(U,{model:e.tableData.param,ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[t(D,{label:"\u8BBE\u5907\u540D\u79F0",prop:"name"},{default:a(()=>[t(m,{modelValue:e.tableData.param.name,"onUpdate:modelValue":n[0]||(n[0]=l=>e.tableData.param.name=l),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0",clearable:"",size:"default",style:{width:"240px"},onKeyup:N(e.typeList,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),t(D,{label:"\u8BBE\u5907\u6807\u8BC6",prop:"key"},{default:a(()=>[t(m,{modelValue:e.tableData.param.key,"onUpdate:modelValue":n[1]||(n[1]=l=>e.tableData.param.key=l),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0",clearable:"",size:"default",style:{width:"240px"},onKeyup:N(e.typeList,["enter","native"])},null,8,["modelValue","onKeyup"])]),_:1}),t(D,{label:"\u72B6\u6001",prop:"status",style:{width:"200px"}},{default:a(()=>[t(k,{modelValue:e.tableData.param.status,"onUpdate:modelValue":n[2]||(n[2]=l=>e.tableData.param.status=l),placeholder:"\u72B6\u6001",clearable:"",size:"default",style:{width:"240px"}},{default:a(()=>[t(h,{label:"\u5728\u7EBF",value:2}),t(h,{label:"\u79BB\u7EBF",value:1}),t(h,{label:"\u672A\u542F\u7528",value:0})]),_:1},8,["modelValue"])]),_:1}),t(D,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"dateRange"},{default:a(()=>[t(z,{modelValue:e.tableData.param.dateRange,"onUpdate:modelValue":n[3]||(n[3]=l=>e.tableData.param.dateRange=l),size:"default",style:{width:"240px"},"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue"])]),_:1}),t(D,null,{default:a(()=>[t(_,{size:"default",type:"primary",class:"ml10",onClick:e.typeList},{default:a(()=>[t(F,null,{default:a(()=>[t(L)]),_:1}),ae]),_:1},8,["onClick"]),t(_,{size:"default",onClick:n[4]||(n[4]=l=>e.resetQuery(e.queryRef))},{default:a(()=>[t(F,null,{default:a(()=>[t(o)]),_:1}),le]),_:1}),s((i(),d(_,{size:"default",type:"success",class:"ml10",onClick:e.onOpenAddDic},{default:a(()=>[t(F,null,{default:a(()=>[t(p)]),_:1}),oe]),_:1},8,["onClick"])),[[y,"add"]]),s((i(),d(_,{size:"default",type:"danger",class:"ml10",onClick:n[5]||(n[5]=l=>e.onRowDel(null))},{default:a(()=>[t(F,null,{default:a(()=>[t(g)]),_:1}),ne]),_:1})),[[y,"del"]])]),_:1})]),_:1},8,["model"])]),s((i(),d(M,{data:e.tableData.data,style:{width:"100%"},onSelectionChange:e.handleSelectionChange},{default:a(()=>[t(f,{type:"selection",width:"55",align:"center"}),s(t(f,{label:"\u6807\u8BC6",prop:"key",width:"130","show-overflow-tooltip":!0},null,512),[[b,"key"]]),s(t(f,{label:"\u8BBE\u5907\u540D\u79F0",prop:"name","show-overflow-tooltip":!0},null,512),[[b,"name"]]),s(t(f,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"productName","show-overflow-tooltip":!0},null,512),[[b,"productName"]]),s((i(),d(f,{prop:"status",label:"\u72B6\u6001",width:"100",align:"center"},{default:a(l=>[l.row.status==1?(i(),d(A,{key:0,type:"info",size:"small"},{default:a(()=>[ue]),_:1})):C("",!0),l.row.status==2?(i(),d(A,{key:1,type:"success",size:"small"},{default:a(()=>[se]),_:1})):C("",!0),l.row.status==0?(i(),d(A,{key:2,type:"info",size:"small"},{default:a(()=>[ie]),_:1})):C("",!0)]),_:1})),[[b,"status"]]),s(t(f,{prop:"registryTime",label:"\u6FC0\u6D3B\u65F6\u95F4",align:"center",width:"150"},null,512),[[b,"registryTime"]]),s(t(f,{prop:"desc",label:"\u8BF4\u660E"},null,512),[[b,"desc"]]),t(f,{label:"\u64CD\u4F5C",width:"200",align:"center",fixed:"right"},{default:a(l=>[s((i(),d(K,{to:"/iotmanager/device/instance/"+l.row.id,class:"link-type",style:{"padding-right":"12px","font-size":"12px",color:"#409eff"}},{default:a(()=>[de]),_:2},1032,["to"])),[[y,"detail"]]),s((i(),d(_,{size:"small",text:"",type:"warning",onClick:R=>e.onOpenEditDic(l.row)},{default:a(()=>[re]),_:2},1032,["onClick"])),[[y,"edit"]]),l.row.status==0?s((i(),d(_,{key:0,size:"small",text:"",type:"success",onClick:R=>e.onActionStatus(l.row)},{default:a(()=>[pe]),_:2},1032,["onClick"])),[[y,"status"]]):C("",!0),l.row.status>0?s((i(),d(_,{key:1,size:"small",text:"",type:"primary",onClick:R=>e.onActionStatus(l.row)},{default:a(()=>[ce]),_:2},1032,["onClick"])),[[y,"status"]]):C("",!0),s((i(),d(_,{size:"small",text:"",type:"danger",onClick:R=>e.onRowDel(l.row)},{default:a(()=>[me]),_:2},1032,["onClick"])),[[y,"del"]])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[Q,e.tableData.loading]]),s(t(O,{total:e.tableData.total,page:e.tableData.param.pageNum,"onUpdate:page":n[6]||(n[6]=l=>e.tableData.param.pageNum=l),limit:e.tableData.param.pageSize,"onUpdate:limit":n[7]||(n[7]=l=>e.tableData.param.pageSize=l),onPagination:e.typeList},null,8,["total","page","limit","onPagination"]),[[H,e.tableData.total>0]])]),_:1}),t(q,{ref:"editDicRef",onTypeList:e.typeList},null,8,["onTypeList"])])}var he=W(x,[["render",_e]]);export{he as default};
