import{a as c}from"./index.170118430469519.js";import{_ as I,E as b}from"./index.1701184304695.js";import{L as S,h as v,a2 as w,ab as U,a as D,_ as l,T as u,e as L,ai as s,o as B,b as V,Y as y,Z as f,X as N}from"./vue.1701184304695.js";const E={parentId:0,name:"",key:"",desc:"",sort:0},$=S({name:"deviceEditCate",setup(e,{emit:t}){const p=v(null),o=w({isShowDialog:!1,ruleForm:{...E},deptData:[],orgData:[],rules:{name:[{required:!0,message:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u5206\u7C7B\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}}),g=a=>{m(),c.category.getList({status:1}).then(i=>{o.deptData=i.category||[]}),a&&typeof a=="object"?o.ruleForm=a:a&&typeof a=="number"&&(o.ruleForm.parentId=a),o.isShowDialog=!0},d=()=>{o.isShowDialog=!1},F=()=>{d()},n=()=>{console.log(o.ruleForm.parentId);const a=L(p);!a||a.validate(i=>{i&&(console.log(o.ruleForm),console.log(o.ruleForm.parentId),o.ruleForm.parentId||(o.ruleForm.parentId=0),console.log(o.ruleForm.parentId),o.ruleForm.id?c.category.edit(o.ruleForm).then(()=>{b.success("\u5206\u7C7B\u4FEE\u6539\u6210\u529F"),d(),t("getCateList")}):c.category.add(o.ruleForm).then(()=>{b.success("\u5206\u7C7B\u6DFB\u52A0\u6210\u529F"),d(),t("getCateList")}))})},m=()=>{o.ruleForm={...E}};return{openDialog:g,closeDialog:d,onCancel:F,onSubmit:n,formRef:p,...U(o)}}}),z={class:"system-edit-dept-container"},R={key:0},q={class:"dialog-footer"},T=y("\u53D6 \u6D88");function j(e,t,p,o,g,d){const F=s("el-cascader"),n=s("el-form-item"),m=s("el-col"),a=s("el-input"),i=s("el-input-number"),h=s("el-row"),k=s("el-form"),_=s("el-button"),A=s("el-dialog");return B(),D("div",z,[l(A,{title:(e.ruleForm.id?"\u4FEE\u6539":"\u6DFB\u52A0")+"\u5206\u7C7B",modelValue:e.isShowDialog,"onUpdate:modelValue":t[5]||(t[5]=r=>e.isShowDialog=r),width:"769px"},{footer:u(()=>[V("span",q,[l(_,{onClick:e.onCancel,size:"default"},{default:u(()=>[T]),_:1},8,["onClick"]),l(_,{type:"primary",onClick:e.onSubmit,size:"default"},{default:u(()=>[y(f(e.ruleForm.id?"\u4FEE \u6539":"\u6DFB \u52A0"),1)]),_:1},8,["onClick"])])]),default:u(()=>[l(k,{ref:"formRef",model:e.ruleForm,rules:e.rules,size:"default","label-width":"90px"},{default:u(()=>[l(h,{gutter:35},{default:u(()=>[l(m,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:u(()=>[l(n,{label:"\u4E0A\u7EA7\u5206\u7C7B"},{default:u(()=>[l(F,{options:e.deptData,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name"},placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",clearable:"",class:"w100",modelValue:e.ruleForm.parentId,"onUpdate:modelValue":t[0]||(t[0]=r=>e.ruleForm.parentId=r)},{default:u(({node:r,data:C})=>[V("span",null,f(C.name),1),r.isLeaf?N("",!0):(B(),D("span",R," ("+f(C.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),l(m,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(n,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:u(()=>[l(a,{modelValue:e.ruleForm.name,"onUpdate:modelValue":t[1]||(t[1]=r=>e.ruleForm.name=r),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:24,sm:12,md:12,lg:12,xl:12},{default:u(()=>[l(n,{label:"\u6392\u5E8F"},{default:u(()=>[l(i,{modelValue:e.ruleForm.sort,"onUpdate:modelValue":t[2]||(t[2]=r=>e.ruleForm.sort=r),min:0,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:u(()=>[l(n,{label:"\u5206\u7C7B\u6807\u8BC6",prop:"key"},{default:u(()=>[l(a,{modelValue:e.ruleForm.key,"onUpdate:modelValue":t[3]||(t[3]=r=>e.ruleForm.key=r),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:u(()=>[l(n,{label:"\u63CF\u8FF0"},{default:u(()=>[l(a,{modelValue:e.ruleForm.desc,"onUpdate:modelValue":t[4]||(t[4]=r=>e.ruleForm.desc=r),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u63CF\u8FF0",maxlength:"150"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}var X=I($,[["render",j]]);export{X as default};
