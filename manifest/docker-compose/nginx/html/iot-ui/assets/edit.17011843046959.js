import{L,a2 as X,h as J,k as Y,ab as O,S as i,T as o,j as q,aD as G,aF as H,ai as n,o as s,_ as a,b as h,a as _,a8 as b,F as y,U as N,V as U,X as K,Y as c}from"./vue.1701184304695.js";import{_ as Q}from"./index.170118430469524.js";import W from"./serverDetail.17011843046952.js";import{a as R}from"./index.170118430469527.js";import{_ as Z,E as x}from"./index.1701184304695.js";const ee=L({name:"tunnelCreate",components:{codeEditor:Q,serverDetail:W},props:{type:{type:String,default:""}},setup(l,t){const{proxy:A}=q(),w=G(),S=H(),{network_tunnel_type:M,tunnel_serial_baudrate:v,tunnel_serial_databits:r,tunnel_serial_stopbits:m,tunnel_serial_parity:d,network_protocols:V}=A.useDict("network_tunnel_type","tunnel_serial_baudrate","tunnel_serial_databits","tunnel_serial_stopbits","tunnel_serial_parity","network_protocols"),u=X({resourceModalPro:{mode:"",content:""},detail:{},activeViewName:["1","2","3","4","5"],form:{id:"",name:"\u65B0\u5EFA\u901A\u9053",types:"serial",status:!1,addr:"",serial:{baud_rate:"9600",data_bits:"6",stop_bits:"1",parity:"0"},retry:{enable:!0,timeout:30,maximum:0},protoccol:{name:"Modbus RTU",options:{}},heartbeat:{enable:!1,hex:"",regex:"^\\w+$",text:"",timeout:30}}}),p=J("first"),f=J("mirrorRef"),F=()=>{u.form.serial.parity==0&&(u.form.serial.rs485=!1,delete u.form.serial.port),(u.form.serial.parity==1||u.form.serial.parity==2)&&(u.form.serial.port=null,delete u.form.serial.rs485),R.tunnel.editItem({...u.form}).then(C=>{x.success("\u4FEE\u6539\u6210\u529F"),S.go(-1)})},E=()=>{const C=w.params&&w.params.id;R.tunnel.getDetail({id:C}).then(B=>{const{id:g,name:D,types:e,status:P,addr:$,serial:I,retry:T,protoccol:k,heartbeat:j}=B;u.form.name=D,u.form.types=e,u.form.addr=$,u.form.status=P,u.form.serial=JSON.parse(I),u.form.retry=JSON.parse(T),u.form.heartbeat=JSON.parse(j),u.form.protoccol=k?JSON.parse(k):{name:"Modbus RTU",options:{}},u.form.id=g;let z=JSON.stringify(JSON.parse(k).options);u.resourceModalPro.content=JSON.stringify(JSON.parse(z),null,4),f.value.setValue(u.resourceModalPro.content)})};return Y(()=>{E()}),{mirrorRef:f,activeName:p,getDetail:E,network_tunnel_type:M,tunnel_serial_baudrate:v,tunnel_serial_databits:r,tunnel_serial_stopbits:m,tunnel_serial_parity:d,network_protocols:V,submit:F,...O(l),...O(u)}}}),le={class:"collapse-wrap"},ae={class:"collapse-wrap"},oe=c("/dev/ttyS0"),te={style:{position:"absolute",right:"20px",top:"20px"}},ue=c("\u53D6\u6D88"),re=c("\u63D0\u4EA4");function ne(l,t,A,w,S,M){const v=n("el-input"),r=n("el-form-item"),m=n("el-option"),d=n("el-select"),V=n("el-switch"),u=n("el-form"),p=n("el-collapse-item"),f=n("el-button"),F=n("el-input-number"),E=n("codeEditor"),C=n("el-collapse"),B=n("el-tab-pane"),g=n("el-tabs"),D=n("el-card");return s(),i(D,{class:"system-dic-container",style:{position:"relative"}},{default:o(()=>[a(g,{modelValue:l.activeName,"onUpdate:modelValue":t[14]||(t[14]=e=>l.activeName=e),class:"demo-tabs"},{default:o(()=>[a(B,{label:"\u7F16\u8F91\u901A\u9053",name:"first"},{default:o(()=>[a(C,{modelValue:l.activeViewName,"onUpdate:modelValue":t[13]||(t[13]=e=>l.activeViewName=e)},{default:o(()=>[a(p,{title:"\u57FA\u672C\u4FE1\u606F",name:"1"},{default:o(()=>[h("div",le,[a(u,{style:{width:"600px",margin:"0 auto"},model:l.form,"label-width":"68px"},{default:o(()=>[a(r,{label:"\u540D\u79F0"},{default:o(()=>[a(v,{modelValue:l.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),placeholder:"\u8BF7\u586B\u5199\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(r,{label:"\u7C7B\u578B"},{default:o(()=>[a(d,{modelValue:l.form.types,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.types=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},{default:o(()=>[(s(!0),_(y,null,b(l.network_tunnel_type,e=>(s(),i(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),N(a(r,{label:"\u5730\u5740"},{default:o(()=>[a(v,{modelValue:l.form.addr,"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.addr=e),placeholder:"\u7AEF\u53E3\u53F7\uFF0CIP:\u7AEF\u53E3"},null,8,["modelValue"])]),_:1},512),[[U,l.form.types!="serial"]]),a(r,{label:"\u542F\u7528"},{default:o(()=>[a(V,{modelValue:l.form.status,"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.status=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),N(a(p,{title:"\u4E32\u53E3\u53C2\u6570",name:"2"},{default:o(()=>[h("div",ae,[a(u,{style:{width:"600px",margin:"0 auto"},model:l.form,"label-width":"68px"},{default:o(()=>[a(r,{label:"\u7AEF\u53E3"},{default:o(()=>[a(f,null,{default:o(()=>[oe]),_:1})]),_:1}),a(r,{label:"\u6CE2\u7279\u7387"},{default:o(()=>[a(d,{modelValue:l.form.serial.baud_rate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.form.serial.baud_rate=e),placeholder:"\u8BF7\u9009\u62E9\u6CE2\u7279\u7387"},{default:o(()=>[(s(!0),_(y,null,b(l.tunnel_serial_baudrate,e=>(s(),i(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u6570\u636E\u4F4D"},{default:o(()=>[a(d,{modelValue:l.form.serial.data_bits,"onUpdate:modelValue":t[5]||(t[5]=e=>l.form.serial.data_bits=e),placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u4F4D"},{default:o(()=>[(s(!0),_(y,null,b(l.tunnel_serial_databits,e=>(s(),i(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u505C\u6B62\u4F4D"},{default:o(()=>[a(d,{modelValue:l.form.serial.stop_bits,"onUpdate:modelValue":t[6]||(t[6]=e=>l.form.serial.stop_bits=e),placeholder:"\u8BF7\u9009\u62E9\u505C\u6B62\u4F4D"},{default:o(()=>[(s(!0),_(y,null,b(l.tunnel_serial_stopbits,e=>(s(),i(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u68C0\u9A8C\u4F4D"},{default:o(()=>[a(d,{modelValue:l.form.serial.parity,"onUpdate:modelValue":t[7]||(t[7]=e=>l.form.serial.parity=e),placeholder:"\u8BF7\u9009\u62E9\u68C0\u9A8C\u4F4D"},{default:o(()=>[(s(!0),_(y,null,b(l.tunnel_serial_parity,e=>(s(),i(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},512),[[U,l.form.types=="serial"]]),N(a(p,{title:"\u5FC3\u8DF3\u5305",name:"4"},{default:o(()=>[a(u,{style:{width:"600px",margin:"0 auto"},model:l.form,"label-width":"68px"},{default:o(()=>[a(r,{label:"\u542F\u7528"},{default:o(()=>[a(V,{modelValue:l.form.heartbeat.enable,"onUpdate:modelValue":t[8]||(t[8]=e=>l.form.heartbeat.enable=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512),[[U,l.form.type!="serial"]]),l.form.types=="serial"||l.form.types=="tcp-client"||l.form.types=="udp-client"?(s(),i(p,{key:0,title:"\u65AD\u7EBF\u91CD\u8FDE",name:"4"},{default:o(()=>[a(u,{style:{width:"600px",margin:"0 auto"},model:l.form,"label-width":"68px"},{default:o(()=>[a(r,{label:"\u542F\u7528"},{default:o(()=>[a(V,{modelValue:l.form.retry.enable,"onUpdate:modelValue":t[9]||(t[9]=e=>l.form.retry.enable=e)},null,8,["modelValue"])]),_:1}),a(r,{label:"\u95F4\u9694"},{default:o(()=>[a(F,{modelValue:l.form.retry.timeout,"onUpdate:modelValue":t[10]||(t[10]=e=>l.form.retry.timeout=e),min:0,onChange:l.handleChange},null,8,["modelValue","onChange"])]),_:1}),a(r,{label:"\u6700\u5927\u6B21\u6570"},{default:o(()=>[a(F,{modelValue:l.form.retry.maximum,"onUpdate:modelValue":t[11]||(t[11]=e=>l.form.retry.maximum=e),min:0,onChange:l.handleChange},null,8,["modelValue","onChange"])]),_:1})]),_:1},8,["model"])]),_:1})):K("",!0),a(p,{title:"\u534F\u8BAE\u9002\u914D",name:"5"},{default:o(()=>[a(u,{style:{width:"600px",margin:"0 auto"},model:l.form,"label-width":"68px"},{default:o(()=>[a(r,{label:"\u534F\u8BAE"},{default:o(()=>[a(d,{modelValue:l.form.protoccol.name,"onUpdate:modelValue":t[12]||(t[12]=e=>l.form.protoccol.name=e),placeholder:"\u8BF7\u9009\u62E9\u534F\u8BAE\u9002\u914D"},{default:o(()=>[(s(!0),_(y,null,b(l.network_protocols,e=>(s(),i(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"\u534F\u8BAE\u53C2\u6570"},{default:o(()=>[a(E,{class:"params",ref:"mirrorRef",mode:l.resourceModalPro.mode,content:l.resourceModalPro.content},null,8,["mode","content"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),h("div",te,[a(f,{size:"medium"},{default:o(()=>[ue]),_:1}),a(f,{onClick:l.submit,size:"medium",type:"primary"},{default:o(()=>[re]),_:1},8,["onClick"])])]),_:1})}var fe=Z(ee,[["render",ne],["__scopeId","data-v-c7d447f8"]]);export{fe as default};
