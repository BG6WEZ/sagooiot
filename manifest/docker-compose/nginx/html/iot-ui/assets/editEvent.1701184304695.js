import{a as D}from"./index.170118430469519.js";import{_ as w,v as L,x as R,y as $,E as I}from"./index.1701184304695.js";import N from"./editOption.1701184304695.js";import{L as U,h as j,a2 as J,ab as P,a as A,_ as o,T as l,e as q,ai as a,o as b,b as d,Y as m,Z as T,F as z,a8 as M}from"./vue.1701184304695.js";const W=U({name:"deviceEditPro",components:{Plus:L,Minus:R,Right:$,EditOption:N},setup(t,{emit:s}){const E=j(null),B=j(),u=J({isShowDialog:!1,typeData:[],type:"",types:"",productId:0,elementType:{type:"",maxLength:""},enumdata:[{text:"",value:""}],jsondata:[],outputsdata:[],ruleForm:{productId:0,name:"",key:"",outputs:[],desc:""},rules:{name:[{required:!0,message:"\u4E8B\u4EF6\u5B9A\u4E49\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u4E8B\u4EF6\u5B9A\u4E49\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B",trigger:"blur"}]}}),k=(e,n)=>{c(),D.product.getDataType({status:-1}).then(_=>{const p=Object.values(_.dataType);p.forEach((O,f)=>{f==0?(p[f].label="\u57FA\u7840\u7C7B\u578B",p[f].options=O):(p[f].label="\u6269\u5C55\u7C7B\u578B",p[f].options=O)}),u.typeData=p||[]}),u.ruleForm=e,e.outputs&&(u.ruleForm=e,u.productId=n,u.outputsdata=e.outputs),u.isShowDialog=!0},c=()=>{u.ruleForm={name:"",key:"",status:1,desc:""},u.type="",u.types="",u.outputsdata=[],u.elementType=[]},r=e=>{u.type=e,u.ruleForm.type=e},F=e=>{u.types=e},y=()=>{u.enumdata.push({text:"",value:""})},g=e=>{u.enumdata.splice(e,1)},v=(e,n)=>{n=="fun"?u.outputsdata.splice(e,1):u.jsondata.splice(e,1)},C=e=>{B.value.openDialog({product_id:0,id:0,type_data:e})},h=(e,n)=>{n=="fun"?u.outputsdata.push(e):u.jsondata.push(e)},i=()=>{u.isShowDialog=!1};return{editOptionRef:B,getOptionData:h,openDialog:k,deljson:v,addEnum:y,delEnum:g,addJson:C,seletChange:r,seletChanges:F,closeDialog:i,onCancel:()=>{i()},onSubmit:()=>{const e=q(E);!e||e.validate(n=>{if(n){u.ruleForm.outputs=u.outputsdata;const _=u.ruleForm.id!==0?D.model.eventedit:D.model.eventadd;u.ruleForm.id!==0&&(u.ruleForm.productId=u.productId),console.log(JSON.parse(JSON.stringify(u.ruleForm))),_(u.ruleForm).then(()=>{I.success("\u4E8B\u4EF6\u5B9A\u4E49\u7C7B\u578B\u64CD\u4F5C\u6210\u529F"),i(),s("typeList")})}})},formRef:E,...P(u)}}}),Y={class:"system-edit-dic-container"},Z=m("\u666E\u901A"),G=m("\u8B66\u544A"),H=m("\u7D27\u6025"),K={class:"jsonlist"},Q=d("div",null,"\u53C2\u6570\u540D\u79F0\uFF1A",-1),X={style:{width:"60%"}},x={class:"jsonoption"},ee=m("\u5220\u9664"),ue={style:{display:"block",width:"100%"}},te=d("div",null,"\u6DFB\u52A0\u53C2\u6570",-1),oe={class:"dialog-footer"},le=m("\u53D6 \u6D88");function se(t,s,E,B,u,k){const c=a("el-input"),r=a("el-form-item"),F=a("el-radio"),y=a("el-radio-group"),g=a("el-link"),v=a("Plus"),C=a("el-icon"),h=a("el-form"),i=a("el-button"),V=a("el-dialog"),S=a("EditOption");return b(),A("div",Y,[o(V,{title:(t.ruleForm.id!==0?"\u4FEE\u6539":"\u6DFB\u52A0")+"\u4E8B\u4EF6\u5B9A\u4E49",modelValue:t.isShowDialog,"onUpdate:modelValue":s[5]||(s[5]=e=>t.isShowDialog=e),width:"769px"},{footer:l(()=>[d("span",oe,[o(i,{onClick:t.onCancel,size:"default"},{default:l(()=>[le]),_:1},8,["onClick"]),o(i,{type:"primary",onClick:t.onSubmit,size:"default"},{default:l(()=>[m(T(t.ruleForm.id!==0?"\u4FEE \u6539":"\u6DFB \u52A0"),1)]),_:1},8,["onClick"])])]),default:l(()=>[o(h,{model:t.ruleForm,ref:"formRef",rules:t.rules,size:"default","label-width":"120px"},{default:l(()=>[o(r,{label:"\u4E8B\u4EF6\u5B9A\u4E49\u6807\u8BC6",prop:"key"},{default:l(()=>[o(c,{modelValue:t.ruleForm.key,"onUpdate:modelValue":s[0]||(s[0]=e=>t.ruleForm.key=e),placeholder:"\u8BF7\u8F93\u5165\u4E8B\u4EF6\u5B9A\u4E49\u6807\u8BC6",disabled:t.ruleForm.id!==0},null,8,["modelValue","disabled"])]),_:1}),o(r,{label:"\u4E8B\u4EF6\u5B9A\u4E49\u540D\u79F0",prop:"name"},{default:l(()=>[o(c,{modelValue:t.ruleForm.name,"onUpdate:modelValue":s[1]||(s[1]=e=>t.ruleForm.name=e),placeholder:"\u8BF7\u8F93\u5165\u4E8B\u4EF6\u5B9A\u4E49\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u4E8B\u4EF6\u7EA7\u522B",prop:"level"},{default:l(()=>[o(y,{modelValue:t.ruleForm.level,"onUpdate:modelValue":s[2]||(s[2]=e=>t.ruleForm.level=e)},{default:l(()=>[o(F,{label:0},{default:l(()=>[Z]),_:1}),o(F,{label:1},{default:l(()=>[G]),_:1}),o(F,{label:2},{default:l(()=>[H]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u8F93\u51FA\u53C2\u6570",prop:"maxLength"},{default:l(()=>[(b(!0),A(z,null,M(t.outputsdata,(e,n)=>(b(),A("div",{key:n,class:"jslist"},[d("div",K,[Q,d("div",X,T(e.name),1),d("div",x,[o(g,{type:"primary",onClick:_=>t.deljson(n,"fun")},{default:l(()=>[ee]),_:2},1032,["onClick"])])])]))),128)),d("div",ue,[d("div",{class:"input-options",onClick:s[3]||(s[3]=e=>t.addJson("fun"))},[o(C,null,{default:l(()=>[o(v)]),_:1}),te])])]),_:1}),o(r,{label:"\u4E8B\u4EF6\u5B9A\u4E49\u63CF\u8FF0	",prop:"desc"},{default:l(()=>[o(c,{modelValue:t.ruleForm.desc,"onUpdate:modelValue":s[4]||(s[4]=e=>t.ruleForm.desc=e),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u4E8B\u4EF6\u5B9A\u4E49\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),o(S,{ref:"editOptionRef",onTypeList:t.getOptionData},null,8,["onTypeList"])])}var ie=w(W,[["render",se]]);export{ie as default};
