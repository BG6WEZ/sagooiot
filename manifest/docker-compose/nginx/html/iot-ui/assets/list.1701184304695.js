import N from"./list-form.1701184304695.js";import{b as p,E as w,r as v,h as y}from"./index.1701184304695.js";import{L as U,h as d,a as M,_ as e,T as u,F as P,ai as n,o as S,b as G,Y as a}from"./vue.1701184304695.js";import"./validator.1701184304695.js";const Y={class:"p-3"},j=a(" \u65B0\u589E\u5217 "),q=a("\u5E38\u7528\u5217\u8868\u6743\u9650 "),H=a("\u72B6\u6001"),J=a("\u521B\u5EFA\u65F6\u95F4"),K=a("\u64CD\u4F5C"),O=a("\u4FEE\u6539"),Q=a("\u5220\u9664"),ue=U({__name:"list",setup(W,{expose:x}){const E=d("\u5217\u8868\u6743\u9650"),f=d(!1),F=d([]),c=d(),h=d(),i=async()=>{F.value=[];let t=await p.menu.list.getList({menuId:c.value.id,status:-1});F.value=t||[]},D=async t=>{const[l,B]=t.split("-"),_={parentId:-1,menuId:c.value.id,name:B,code:l,description:"",status:1};await p.menu.list.add(_),w.success("\u64CD\u4F5C\u6210\u529F"),i(),v()},g=async t=>{E.value="\u5217\u8868\u6743\u9650 - "+t.title,f.value=!0,c.value=t,i()},b=()=>{h.value.open({menuId:c.value.id})},A=t=>{h.value.open(t)},k=t=>{let l=t.status===1?"\u542F\u7528":"\u505C\u7528";y.confirm('\u786E\u8BA4\u8981"'+l+'"\uFF1A"'+t.name+'"\u5B57\u6BB5\u5417?',"\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async function(){await p.menu.list.setStatus(t.id,t.menuId,t.status),w.success("\u64CD\u4F5C\u6210\u529F"),v()}).catch(function(){t.status=t.status===0?1:0})},V=t=>{y.confirm(`\u6B64\u64CD\u4F5C\u5C06\u5220\u9664\u5B57\u6BB5\uFF1A\u201C${t.name}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{await p.menu.list.del(t.id),w.success("\u5220\u9664\u6210\u529F"),i(),v()})};return x({open:g}),(t,l)=>{const B=n("ele-FolderAdd"),_=n("el-icon"),r=n("el-button"),T=n("ele-Plus"),C=n("el-dropdown-item"),I=n("el-dropdown-menu"),R=n("el-dropdown"),s=n("el-table-column"),$=n("el-switch"),z=n("el-table"),L=n("el-drawer");return S(),M(P,null,[e(L,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=o=>f.value=o),title:E.value,direction:"rtl",size:"700px"},{default:u(()=>[G("div",Y,[e(r,{size:"default",type:"success",class:"mr-3",onClick:b},{default:u(()=>[e(_,null,{default:u(()=>[e(B)]),_:1}),j]),_:1}),e(R,{onCommand:D},{dropdown:u(()=>[e(I,null,{default:u(()=>[e(C,{command:"status-\u72B6\u6001"},{default:u(()=>[H]),_:1}),e(C,{command:"createdAt-\u521B\u5EFA\u65F6\u95F4"},{default:u(()=>[J]),_:1}),e(C,{command:"handle-\u64CD\u4F5C"},{default:u(()=>[K]),_:1})]),_:1})]),default:u(()=>[e(r,{text:"",type:"primary"},{default:u(()=>[e(_,null,{default:u(()=>[e(T)]),_:1}),q]),_:1})]),_:1})]),e(z,{data:F.value,style:{width:"100%"},"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:u(()=>[e(s,{type:"index",label:"\u5E8F\u53F7",width:"60",align:"center"}),e(s,{prop:"name",label:"\u5B57\u6BB5\u540D\u79F0",width:"220","show-overflow-tooltip":""}),e(s,{prop:"code",label:"\u5B57\u6BB5key","show-overflow-tooltip":""}),e(s,{prop:"status",label:"\u72B6\u6001",width:"100",align:"center"},{default:u(o=>[e($,{modelValue:o.row.status,"onUpdate:modelValue":m=>o.row.status=m,"inline-prompt":"","active-value":1,"inactive-value":0,"active-text":"\u542F","inactive-text":"\u7981",onChange:m=>k(o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(s,{label:"\u64CD\u4F5C",width:"100",align:"center"},{default:u(o=>[e(r,{size:"small",text:"",type:"warning",onClick:m=>A(o.row)},{default:u(()=>[O]),_:2},1032,["onClick"]),e(r,{size:"small",text:"",type:"danger",onClick:m=>V(o.row)},{default:u(()=>[Q]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue","title"]),e(N,{ref_key:"listFormRef",ref:h,onGetList:i},null,512)],64)}}});export{ue as default};
