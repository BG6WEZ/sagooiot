import{L as defineComponent,a2 as reactive,h as ref,k as onMounted,ab as toRefs,S as createBlock,T as withCtx,j as getCurrentInstance,aD as useRoute,aF as useRouter,ai as resolveComponent,o as openBlock,_ as createVNode,b as createBaseVNode,a as createElementBlock,a8 as renderList,F as Fragment,U as withDirectives,V as vShow,X as createCommentVNode,Y as createTextVNode}from"./vue.1701184304695.js";import{_ as _sfc_main$1}from"./index.170118430469524.js";import serverDetail from"./serverDetail.17011843046952.js";import{a as api}from"./index.170118430469527.js";import{_ as _export_sfc,E as ElMessage}from"./index.1701184304695.js";var create_vue_vue_type_style_index_0_lang="",create_vue_vue_type_style_index_1_scoped_true_lang="";const _sfc_main=defineComponent({name:"tunnelCreate",components:{codeEditor:_sfc_main$1,serverDetail},props:{type:{type:String,default:""}},setup(props,context){const{proxy}=getCurrentInstance(),route=useRoute(),router=useRouter(),{network_tunnel_type,tunnel_serial_baudrate,tunnel_serial_databits,tunnel_serial_stopbits,tunnel_serial_parity,network_protocols}=proxy.useDict("network_tunnel_type","tunnel_serial_baudrate","tunnel_serial_databits","tunnel_serial_stopbits","tunnel_serial_parity","network_protocols"),state=reactive({resourceModalPro:{mode:"",content:""},detail:{},activeViewName:["1","2","3","4","5"],form:{name:"\u65B0\u5EFA\u901A\u9053",types:"serial",status:!1,addr:"",serial:{baud_rate:"9600",data_bits:"6",stop_bits:"1",parity:"0"},retry:{enable:!0,timeout:30,maximum:0},protoccol:{name:"ModbusTCP",options:{}},heartbeat:{enable:!1,hex:"",regex:"^\\w+$",text:"",timeout:30}}}),mirrorRef=ref("mirrorRef"),activeName=ref("first"),getDetail=()=>{const e=route.params&&route.params.id;api.tunnel.getDetail({id:e}).then(l=>{state.detail=l})},submit=()=>{state.form.serial.parity==0&&(state.form.serial.rs485=!1,delete state.form.serial.port),(state.form.serial.parity==1||state.form.serial.parity==2)&&(state.form.serial.port=null,delete state.form.serial.rs485),mirrorRef.value.getValue()&&(state.form.protoccol.options=eval("("+mirrorRef.value.getValue()+")")),api.tunnel.addItem({...state.form}).then(e=>{ElMessage.success("\u6DFB\u52A0\u6210\u529F"),router.go(-1)})};return onMounted(()=>{let e={};var l=JSON.stringify(e);state.resourceModalPro.content=JSON.stringify(JSON.parse(l),null,4)}),{mirrorRef,activeName,getDetail,network_tunnel_type,tunnel_serial_baudrate,tunnel_serial_databits,tunnel_serial_stopbits,tunnel_serial_parity,network_protocols,submit,...toRefs(props),...toRefs(state)}}}),_hoisted_1={class:"collapse-wrap"},_hoisted_2={class:"collapse-wrap"},_hoisted_3=createTextVNode("/dev/ttyS0"),_hoisted_4={style:{position:"absolute",right:"20px",top:"20px"}},_hoisted_5=createTextVNode("\u53D6\u6D88"),_hoisted_6=createTextVNode("\u63D0\u4EA4");function _sfc_render(e,l,b,C,v,w){const i=resolveComponent("el-input"),o=resolveComponent("el-form-item"),a=resolveComponent("el-option"),r=resolveComponent("el-select"),s=resolveComponent("el-switch"),u=resolveComponent("el-form"),n=resolveComponent("el-collapse-item"),d=resolveComponent("el-button"),m=resolveComponent("el-input-number"),p=resolveComponent("codeEditor"),f=resolveComponent("el-collapse"),c=resolveComponent("el-tab-pane"),_=resolveComponent("el-tabs"),V=resolveComponent("el-card");return openBlock(),createBlock(V,{class:"system-dic-container",style:{position:"relative"}},{default:withCtx(()=>[createVNode(_,{modelValue:e.activeName,"onUpdate:modelValue":l[14]||(l[14]=t=>e.activeName=t),class:"demo-tabs"},{default:withCtx(()=>[createVNode(c,{label:"\u65B0\u589E\u901A\u9053",name:"first"},{default:withCtx(()=>[createVNode(f,{modelValue:e.activeViewName,"onUpdate:modelValue":l[13]||(l[13]=t=>e.activeViewName=t)},{default:withCtx(()=>[createVNode(n,{title:"\u57FA\u672C\u4FE1\u606F",name:"1"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1,[createVNode(u,{style:{width:"600px",margin:"0 auto"},model:e.form,"label-width":"68px"},{default:withCtx(()=>[createVNode(o,{label:"\u540D\u79F0"},{default:withCtx(()=>[createVNode(i,{modelValue:e.form.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.form.name=t),placeholder:"\u8BF7\u586B\u5199\u540D\u79F0"},null,8,["modelValue"])]),_:1}),createVNode(o,{label:"\u7C7B\u578B"},{default:withCtx(()=>[createVNode(r,{modelValue:e.form.types,"onUpdate:modelValue":l[1]||(l[1]=t=>e.form.types=t),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.network_tunnel_type,t=>(openBlock(),createBlock(a,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),withDirectives(createVNode(o,{label:"\u5730\u5740"},{default:withCtx(()=>[createVNode(i,{modelValue:e.form.addr,"onUpdate:modelValue":l[2]||(l[2]=t=>e.form.addr=t),placeholder:"\u7AEF\u53E3\u53F7\uFF0CIP:\u7AEF\u53E3"},null,8,["modelValue"])]),_:1},512),[[vShow,e.form.types!="serial"]]),createVNode(o,{label:"\u542F\u7528"},{default:withCtx(()=>[createVNode(s,{modelValue:e.form.status,"onUpdate:modelValue":l[3]||(l[3]=t=>e.form.status=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1}),withDirectives(createVNode(n,{title:"\u4E32\u53E3\u53C2\u6570",name:"2"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createVNode(u,{style:{width:"600px",margin:"0 auto"},model:e.form,"label-width":"68px"},{default:withCtx(()=>[createVNode(o,{label:"\u7AEF\u53E3"},{default:withCtx(()=>[createVNode(d,null,{default:withCtx(()=>[_hoisted_3]),_:1})]),_:1}),createVNode(o,{label:"\u6CE2\u7279\u7387"},{default:withCtx(()=>[createVNode(r,{modelValue:e.form.serial.baud_rate,"onUpdate:modelValue":l[4]||(l[4]=t=>e.form.serial.baud_rate=t),placeholder:"\u8BF7\u9009\u62E9\u6CE2\u7279\u7387"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.tunnel_serial_baudrate,t=>(openBlock(),createBlock(a,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(o,{label:"\u6570\u636E\u4F4D"},{default:withCtx(()=>[createVNode(r,{modelValue:e.form.serial.data_bits,"onUpdate:modelValue":l[5]||(l[5]=t=>e.form.serial.data_bits=t),placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u4F4D"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.tunnel_serial_databits,t=>(openBlock(),createBlock(a,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(o,{label:"\u505C\u6B62\u4F4D"},{default:withCtx(()=>[createVNode(r,{modelValue:e.form.serial.stop_bits,"onUpdate:modelValue":l[6]||(l[6]=t=>e.form.serial.stop_bits=t),placeholder:"\u8BF7\u9009\u62E9\u505C\u6B62\u4F4D"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.tunnel_serial_stopbits,t=>(openBlock(),createBlock(a,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(o,{label:"\u68C0\u9A8C\u4F4D"},{default:withCtx(()=>[createVNode(r,{modelValue:e.form.serial.parity,"onUpdate:modelValue":l[7]||(l[7]=t=>e.form.serial.parity=t),placeholder:"\u8BF7\u9009\u62E9\u68C0\u9A8C\u4F4D"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.tunnel_serial_parity,t=>(openBlock(),createBlock(a,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},512),[[vShow,e.form.types=="serial"]]),withDirectives(createVNode(n,{title:"\u5FC3\u8DF3\u5305",name:"4"},{default:withCtx(()=>[createVNode(u,{style:{width:"600px",margin:"0 auto"},model:e.form,"label-width":"68px"},{default:withCtx(()=>[createVNode(o,{label:"\u542F\u7528"},{default:withCtx(()=>[createVNode(s,{modelValue:e.form.heartbeat.enable,"onUpdate:modelValue":l[8]||(l[8]=t=>e.form.heartbeat.enable=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512),[[vShow,e.form.type!="serial"]]),e.form.types=="serial"||e.form.types=="tcp-client"||e.form.types=="udp-client"?(openBlock(),createBlock(n,{key:0,title:"\u65AD\u7EBF\u91CD\u8FDE",name:"4"},{default:withCtx(()=>[createVNode(u,{style:{width:"600px",margin:"0 auto"},model:e.form,"label-width":"68px"},{default:withCtx(()=>[createVNode(o,{label:"\u542F\u7528"},{default:withCtx(()=>[createVNode(s,{modelValue:e.form.retry.enable,"onUpdate:modelValue":l[9]||(l[9]=t=>e.form.retry.enable=t)},null,8,["modelValue"])]),_:1}),createVNode(o,{label:"\u95F4\u9694"},{default:withCtx(()=>[createVNode(m,{modelValue:e.form.retry.timeout,"onUpdate:modelValue":l[10]||(l[10]=t=>e.form.retry.timeout=t),min:0,onChange:e.handleChange},null,8,["modelValue","onChange"])]),_:1}),createVNode(o,{label:"\u6700\u5927\u6B21\u6570"},{default:withCtx(()=>[createVNode(m,{modelValue:e.form.retry.maximum,"onUpdate:modelValue":l[11]||(l[11]=t=>e.form.retry.maximum=t),min:0,onChange:e.handleChange},null,8,["modelValue","onChange"])]),_:1})]),_:1},8,["model"])]),_:1})):createCommentVNode("",!0),createVNode(n,{title:"\u534F\u8BAE\u9002\u914D",name:"5"},{default:withCtx(()=>[createVNode(u,{style:{width:"600px",margin:"0 auto"},model:e.form,"label-width":"68px"},{default:withCtx(()=>[createVNode(o,{label:"\u534F\u8BAE"},{default:withCtx(()=>[createVNode(r,{modelValue:e.form.protoccol.name,"onUpdate:modelValue":l[12]||(l[12]=t=>e.form.protoccol.name=t),placeholder:"\u8BF7\u9009\u62E9\u534F\u8BAE\u9002\u914D"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.network_protocols,t=>(openBlock(),createBlock(a,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),createVNode(o,{label:"\u534F\u8BAE\u53C2\u6570"},{default:withCtx(()=>[createVNode(p,{class:"params",ref:"mirrorRef",mode:e.resourceModalPro.mode,content:e.resourceModalPro.content,getValue:e.getValue},null,8,["mode","content","getValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),createBaseVNode("div",_hoisted_4,[createVNode(d,{size:"medium"},{default:withCtx(()=>[_hoisted_5]),_:1}),createVNode(d,{onClick:e.submit,size:"medium",type:"primary"},{default:withCtx(()=>[_hoisted_6]),_:1},8,["onClick"])])]),_:1})}var create=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-1c4b8249"]]);export{create as default};
