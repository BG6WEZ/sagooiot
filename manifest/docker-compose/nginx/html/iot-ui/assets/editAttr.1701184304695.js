import{a as O}from"./index.170118430469519.js";import{_ as P,v as q,x as I,y as z,E as $}from"./index.1701184304695.js";import W from"./editOption.1701184304695.js";import{L as X,h as N,a2 as Y,ab as Z,a as f,_ as t,T as a,e as G,ai as F,o as p,b as s,Y as V,Z as R,F as E,a8 as B,S as i,X as y}from"./vue.1701184304695.js";const H=X({name:"deviceEditPro",components:{Plus:q,Minus:I,Right:z,EditOption:W},setup(e,{emit:o}){const L=N(null),M=N(),l=Y({isShowDialog:!1,typeData:[],type:"",types:"",productId:0,valueType:{type:"",maxLength:"",trueText:"\u662F",trueValue:"true",falseText:"\u5426",falseValue:"false"},elementType:{type:"",maxLength:""},enumdata:[{text:"",value:""}],jsondata:[],ruleForm:{id:0,productId:0,name:"",key:"",transportProtocol:"",accessMode:1,status:1,valueType:{type:"",maxLength:""},desc:""},rules:{name:[{required:!0,message:"\u5C5E\u6027\u5B9A\u4E49\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u5C5E\u6027\u5B9A\u4E49\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessMode:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u53EA\u8BFB",trigger:"blur"}],type:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B",trigger:"blur"}]}}),J=(n,h)=>{d(),O.product.getDataType({status:-1}).then(j=>{const C=Object.values(j.dataType);C.forEach((U,u)=>{u==0?(C[u].label="\u57FA\u7840\u7C7B\u578B",C[u].options=U):(C[u].label="\u6269\u5C55\u7C7B\u578B",C[u].options=U)}),console.log(n),console.log(h),l.typeData=C||[]}),l.ruleForm=n,n.valueType&&(l.ruleForm=n,l.productId=h,l.valueType=n.valueType,l.ruleForm.valueType.type=n.valueType.type,l.ruleForm.type=n.valueType.type,l.type=n.valueType.type,l.ruleForm.accessMode=n.accessMode,n.valueType.elementType&&(l.elementType=n.valueType.elementType,l.types=n.valueType.elementType.type),n.type=="enum"&&(l.enumdata=n.valueType.elements),n.type=="object"&&(l.jsondata=n.valueType.properties),n.type=="array"&&l.types=="enum"&&(l.enumdata=n.valueType.elementType.elements),n.type=="array"&&l.types=="object"&&(l.jsondata=n.valueType.elementType.properties)),l.isShowDialog=!0},d=()=>{l.ruleForm={name:"",key:"",transportProtocol:"",accessMode:1,status:1,valueType:{type:"",maxLength:""},desc:""},l.type="",l.types="",l.valueType={},l.elementType={},l.jsondata=[],l.enumdata=[{text:"",value:""}]},m=n=>{l.type=n,l.ruleForm.type=n,console.log(n)},k=n=>{console.log(n),l.types=n,console.log(n)},A=()=>{l.enumdata.push({text:"",value:""})},c=n=>{l.enumdata.splice(n,1)},D=n=>{l.jsondata.splice(n,1)},v=()=>{M.value.openDialog({product_id:0,id:0})},g=n=>{l.jsondata.push(n),console.log(l.jsondata)},b=()=>{l.isShowDialog=!1};return{editOptionRef:M,getOptionData:g,openDialog:J,deljson:D,addEnum:A,delEnum:c,addJson:v,seletChange:m,seletChanges:k,closeDialog:b,onCancel:()=>{b()},onSubmit:()=>{const n=G(L);!n||n.validate(h=>{h&&(l.ruleForm.id!==0?(l.type=="enum"&&(l.valueType.elements=l.enumdata),l.type=="object"&&(l.valueType.properties=l.jsondata),l.type=="array"&&(l.valueType.elementType=l.elementType,l.types=="enum"&&(l.valueType.elementType={elements:l.enumdata,type:"enum"}),l.types=="object"&&(l.valueType.elementType={properties:l.jsondata,type:"object"})),l.ruleForm.valueType=l.valueType,l.ruleForm.productId=l.productId,O.model.propertyedit(l.ruleForm).then(()=>{$.success("\u5C5E\u6027\u5B9A\u4E49\u7C7B\u578B\u4FEE\u6539\u6210\u529F"),b(),o("typeList")})):(l.type=="enum"&&(l.valueType.elements=l.enumdata),l.type=="object"&&(l.valueType.properties=l.jsondata),l.type=="array"&&(l.valueType.elementType=l.elementType,l.types=="enum"&&(l.valueType.elementType={elements:l.enumdata,type:"enum"}),l.types=="object"&&(l.valueType.elementType={properties:l.jsondata,type:"object"})),l.ruleForm.valueType=l.valueType,O.model.propertyadd(l.ruleForm).then(()=>{$.success("\u5C5E\u6027\u5B9A\u4E49\u7C7B\u578B\u6DFB\u52A0\u6210\u529F"),b(),o("typeList")})))})},formRef:L,...Z(l)}}}),K={class:"system-edit-dic-container"},Q={class:"input-box"},w=s("span",{style:{margin:"0px 10px"}},"~",-1),x={class:"input-box"},ee=V(),ue=s("span",{style:{margin:"0px 10px"}},"~",-1),le={style:{margin:"0px 10px"}},te={class:"input-option"},oe={class:"jsonlist"},ae=s("div",null,"\u53C2\u6570\u540D\u79F0\uFF1A",-1),ne={style:{width:"60%"}},pe={class:"jsonoption"},se=V("\u5220\u9664"),de={style:{display:"block",width:"100%"}},re=s("div",null,"\u6DFB\u52A0\u53C2\u6570",-1),me={key:7},ie={class:"input-box"},ye=s("span",{style:{margin:"0px 10px"}},"~",-1),Fe={class:"input-box"},fe=V(),ve=s("span",{style:{margin:"0px 10px"}},"~",-1),Te={style:{margin:"0px 10px"}},Ve={class:"input-option"},Ce={class:"jsonlist"},Ee=s("div",null,"\u53C2\u6570\u540D\u79F0\uFF1A",-1),Be={style:{width:"60%"}},be={class:"jsonoption"},ge=V("\u7F16\u8F91"),he=V("\u5220\u9664"),ke={style:{display:"block",width:"100%"}},Ae=s("div",null,"\u6DFB\u52A0\u53C2\u6570",-1),ce=V("\u53EA\u8BFB"),De=V("\u8BFB\u5199"),_e={class:"dialog-footer"},je=V("\u53D6 \u6D88");function Ue(e,o,L,M,l,J){const d=F("el-input"),m=F("el-form-item"),k=F("el-option"),A=F("el-option-group"),c=F("el-select"),D=F("Right"),v=F("el-icon"),g=F("Plus"),b=F("Minus"),_=F("el-link"),S=F("el-radio"),n=F("el-radio-group"),h=F("el-form"),j=F("el-button"),C=F("el-dialog"),U=F("EditOption");return p(),f("div",K,[t(C,{title:(e.ruleForm.id!==0?"\u4FEE\u6539":"\u6DFB\u52A0")+"\u5C5E\u6027\u5B9A\u4E49",modelValue:e.isShowDialog,"onUpdate:modelValue":o[24]||(o[24]=u=>e.isShowDialog=u),width:"769px"},{footer:a(()=>[s("span",_e,[t(j,{onClick:e.onCancel,size:"default"},{default:a(()=>[je]),_:1},8,["onClick"]),t(j,{type:"primary",onClick:e.onSubmit,size:"default"},{default:a(()=>[V(R(e.ruleForm.id!==0?"\u4FEE \u6539":"\u6DFB \u52A0"),1)]),_:1},8,["onClick"])])]),default:a(()=>[t(h,{model:e.ruleForm,ref:"formRef",rules:e.rules,size:"default","label-width":"120px"},{default:a(()=>[t(m,{label:"\u5C5E\u6027\u5B9A\u4E49\u6807\u8BC6",prop:"key"},{default:a(()=>[t(d,{modelValue:e.ruleForm.key,"onUpdate:modelValue":o[0]||(o[0]=u=>e.ruleForm.key=u),placeholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u5B9A\u4E49\u6807\u8BC6",disabled:e.ruleForm.id!==0},null,8,["modelValue","disabled"])]),_:1}),t(m,{label:"\u5C5E\u6027\u5B9A\u4E49\u540D\u79F0",prop:"name"},{default:a(()=>[t(d,{modelValue:e.ruleForm.name,"onUpdate:modelValue":o[1]||(o[1]=u=>e.ruleForm.name=u),placeholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u5B9A\u4E49\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u6570\u636E\u7C7B\u578B",prop:"type"},{default:a(()=>[t(c,{modelValue:e.valueType.type,"onUpdate:modelValue":o[2]||(o[2]=u=>e.valueType.type=u),placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u7C7B\u578B",onChange:e.seletChange,disabled:e.ruleForm.id!==0},{default:a(()=>[(p(!0),f(E,null,B(e.typeData,u=>(p(),i(A,{key:u.label,label:u.label},{default:a(()=>[(p(!0),f(E,null,B(u.options,r=>(p(),i(k,{key:r.type,label:r.title,value:r.type},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onChange","disabled"])]),_:1}),e.type=="float"||e.type=="double"?(p(),i(m,{key:0,label:"\u7CBE\u5EA6",prop:"decimals"},{default:a(()=>[t(d,{modelValue:e.valueType.decimals,"onUpdate:modelValue":o[3]||(o[3]=u=>e.valueType.decimals=u),placeholder:"\u8BF7\u8F93\u5165\u7CBE\u5EA6"},null,8,["modelValue"])]),_:1})):y("",!0),e.type=="int"||e.type=="long"||e.type=="float"||e.type=="double"?(p(),i(m,{key:1,label:"\u5355\u4F4D",prop:"unit"},{default:a(()=>[t(d,{modelValue:e.valueType.unit,"onUpdate:modelValue":o[4]||(o[4]=u=>e.valueType.unit=u),placeholder:"\u8BF7\u8F93\u5165\u5355\u4F4D"},null,8,["modelValue"])]),_:1})):y("",!0),e.type=="string"?(p(),i(m,{key:2,label:"\u6700\u5927\u957F\u5EA6",prop:"maxLength"},{default:a(()=>[t(d,{modelValue:e.valueType.maxLength,"onUpdate:modelValue":o[5]||(o[5]=u=>e.valueType.maxLength=u),placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"},null,8,["modelValue"])]),_:1})):y("",!0),e.type=="date"?(p(),i(m,{key:3,label:"\u65F6\u95F4\u683C\u5F0F",prop:"maxLength"},{default:a(()=>[t(d,{modelValue:e.valueType.maxLength,"onUpdate:modelValue":o[6]||(o[6]=u=>e.valueType.maxLength=u),placeholder:"\u8BF7\u8F93\u5165\u65F6\u95F4\u683C\u5F0F"},null,8,["modelValue"])]),_:1})):y("",!0),e.type=="boolean"?(p(),i(m,{key:4,label:"\u5E03\u5C14\u503C",prop:"trueText"},{default:a(()=>[s("div",Q,[t(d,{modelValue:e.valueType.trueText,"onUpdate:modelValue":o[7]||(o[7]=u=>e.valueType.trueText=u),placeholder:"\u8BF7\u8F93\u5165\u5E03\u5C14\u503C",value:"\u662F"},null,8,["modelValue"]),w,t(d,{modelValue:e.valueType.trueValue,"onUpdate:modelValue":o[8]||(o[8]=u=>e.valueType.trueValue=u),placeholder:"\u8BF7\u8F93\u5165\u5E03\u5C14\u503C",value:"true"},null,8,["modelValue"])]),s("div",x,[t(d,{modelValue:e.valueType.falseText,"onUpdate:modelValue":o[9]||(o[9]=u=>e.valueType.falseText=u),placeholder:"\u8BF7\u8F93\u5165\u5E03\u5C14\u503C",value:"\u5426"},null,8,["modelValue"]),ee,ue,t(d,{modelValue:e.valueType.falseValue,"onUpdate:modelValue":o[10]||(o[10]=u=>e.valueType.falseValue=u),placeholder:"\u8BF7\u8F93\u5165\u5E03\u5C14\u503C",value:"false"},null,8,["modelValue"])])]),_:1})):y("",!0),e.type=="enum"?(p(),i(m,{key:5,label:"\u679A\u4E3E\u9879",prop:"maxLength"},{default:a(()=>[(p(!0),f(E,null,B(e.enumdata,(u,r)=>(p(),f("div",{class:"input-box",key:r},[t(d,{modelValue:u.text,"onUpdate:modelValue":T=>u.text=T,placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"},null,8,["modelValue","onUpdate:modelValue"]),s("span",le,[t(v,null,{default:a(()=>[t(D)]),_:1})]),t(d,{modelValue:u.value,"onUpdate:modelValue":T=>u.value=T,placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u6587\u672C"},null,8,["modelValue","onUpdate:modelValue"]),s("div",te,[r==0?(p(),i(v,{key:0,onClick:e.addEnum},{default:a(()=>[t(g)]),_:1},8,["onClick"])):y("",!0),r!=0?(p(),i(v,{key:1,onClick:T=>e.delEnum(r)},{default:a(()=>[t(b)]),_:2},1032,["onClick"])):y("",!0)])]))),128))]),_:1})):y("",!0),e.type=="object"?(p(),i(m,{key:6,label:"JSON\u5BF9\u8C61",prop:"maxLength"},{default:a(()=>[(p(!0),f(E,null,B(e.jsondata,(u,r)=>(p(),f("div",{key:r,class:"jslist"},[s("div",oe,[ae,s("div",ne,R(u.name),1),s("div",pe,[t(_,{type:"primary",onClick:T=>e.deljson(r)},{default:a(()=>[se]),_:2},1032,["onClick"])])])]))),128)),s("div",de,[s("div",{class:"input-options",onClick:o[11]||(o[11]=(...u)=>e.addJson&&e.addJson(...u))},[t(v,null,{default:a(()=>[t(g)]),_:1}),re])])]),_:1})):y("",!0),e.type=="array"?(p(),f("div",me,[t(m,{label:"\u5143\u7D20\u7C7B\u578B",prop:"types"},{default:a(()=>[t(c,{modelValue:e.elementType.type,"onUpdate:modelValue":o[12]||(o[12]=u=>e.elementType.type=u),placeholder:"\u8BF7\u9009\u62E9\u5143\u7D20\u7C7B\u578B",onChange:e.seletChanges},{default:a(()=>[(p(!0),f(E,null,B(e.typeData,u=>(p(),i(A,{key:u.label,label:u.label},{default:a(()=>[(p(!0),f(E,null,B(u.options,r=>(p(),i(k,{key:r.type,label:r.title,value:r.type,disabled:r.type=="array"},null,8,["label","value","disabled"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),e.types=="float"||e.types=="double"?(p(),i(m,{key:0,label:"\u7CBE\u5EA6",prop:"decimals"},{default:a(()=>[t(d,{modelValue:e.elementType.decimals,"onUpdate:modelValue":o[13]||(o[13]=u=>e.elementType.decimals=u),placeholder:"\u8BF7\u8F93\u5165\u7CBE\u5EA6"},null,8,["modelValue"])]),_:1})):y("",!0),e.types=="int"||e.types=="long"||e.types=="float"||e.types=="double"?(p(),i(m,{key:1,label:"\u5355\u4F4D",prop:"unit"},{default:a(()=>[t(d,{modelValue:e.elementType.unit,"onUpdate:modelValue":o[14]||(o[14]=u=>e.elementType.unit=u),placeholder:"\u8BF7\u8F93\u5165\u5355\u4F4D"},null,8,["modelValue"])]),_:1})):y("",!0),e.types=="string"?(p(),i(m,{key:2,label:"\u6700\u5927\u957F\u5EA6",prop:"maxLength"},{default:a(()=>[t(d,{modelValue:e.elementType.maxLength,"onUpdate:modelValue":o[15]||(o[15]=u=>e.elementType.maxLength=u),placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u957F\u5EA6"},null,8,["modelValue"])]),_:1})):y("",!0),e.types=="date"?(p(),i(m,{key:3,label:"\u65F6\u95F4\u683C\u5F0F",prop:"maxLength"},{default:a(()=>[t(d,{modelValue:e.elementType.maxLength,"onUpdate:modelValue":o[16]||(o[16]=u=>e.elementType.maxLength=u),placeholder:"\u8BF7\u8F93\u5165\u65F6\u95F4\u683C\u5F0F"},null,8,["modelValue"])]),_:1})):y("",!0),e.types=="boolean"?(p(),i(m,{key:4,label:"\u5E03\u5C14\u503C",prop:"maxLength"},{default:a(()=>[s("div",ie,[t(d,{modelValue:e.elementType.trueText,"onUpdate:modelValue":o[17]||(o[17]=u=>e.elementType.trueText=u),placeholder:"\u8BF7\u8F93\u5165\u5E03\u5C14\u503C",value:"\u662F"},null,8,["modelValue"]),ye,t(d,{modelValue:e.elementType.trueValue,"onUpdate:modelValue":o[18]||(o[18]=u=>e.elementType.trueValue=u),placeholder:"\u8BF7\u8F93\u5165\u5E03\u5C14\u503C",value:"true"},null,8,["modelValue"])]),s("div",Fe,[t(d,{modelValue:e.elementType.falseText,"onUpdate:modelValue":o[19]||(o[19]=u=>e.elementType.falseText=u),placeholder:"\u8BF7\u8F93\u5165\u5E03\u5C14\u503C",value:"\u5426"},null,8,["modelValue"]),fe,ve,t(d,{modelValue:e.elementType.falseValue,"onUpdate:modelValue":o[20]||(o[20]=u=>e.elementType.falseValue=u),placeholder:"\u8BF7\u8F93\u5165\u5E03\u5C14\u503C",value:"false"},null,8,["modelValue"])])]),_:1})):y("",!0),e.types=="enum"?(p(),i(m,{key:5,label:"\u679A\u4E3E\u9879",prop:"maxLength"},{default:a(()=>[(p(!0),f(E,null,B(e.enumdata,(u,r)=>(p(),f("div",{class:"input-box",key:r},[t(d,{modelValue:u.text,"onUpdate:modelValue":T=>u.text=T,placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u503C"},null,8,["modelValue","onUpdate:modelValue"]),s("span",Te,[t(v,null,{default:a(()=>[t(D)]),_:1})]),t(d,{modelValue:u.value,"onUpdate:modelValue":T=>u.value=T,placeholder:"\u8BF7\u8F93\u5165\u679A\u4E3E\u6587\u672C"},null,8,["modelValue","onUpdate:modelValue"]),s("div",Ve,[r==0?(p(),i(v,{key:0,onClick:e.addEnum},{default:a(()=>[t(g)]),_:1},8,["onClick"])):y("",!0),r!=0?(p(),i(v,{key:1,onClick:T=>e.delEnum(r)},{default:a(()=>[t(b)]),_:2},1032,["onClick"])):y("",!0)])]))),128))]),_:1})):y("",!0)])):y("",!0),e.types=="object"?(p(),i(m,{key:8,label:"JSON\u5BF9\u8C61",prop:"maxLength"},{default:a(()=>[(p(!0),f(E,null,B(e.jsondata,(u,r)=>(p(),f("div",{key:r,class:"jslist"},[s("div",Ce,[Ee,s("div",Be,R(u.data.name),1),s("div",be,[t(_,{type:"primary"},{default:a(()=>[ge]),_:1}),t(_,{type:"primary"},{default:a(()=>[he]),_:1})])])]))),128)),s("div",ke,[s("div",{class:"input-options",onClick:o[21]||(o[21]=(...u)=>e.addJson&&e.addJson(...u))},[t(v,null,{default:a(()=>[t(g)]),_:1}),Ae])])]),_:1})):y("",!0),t(m,{label:"\u662F\u5426\u53EA\u8BFB",prop:"accessMode"},{default:a(()=>[t(n,{modelValue:e.ruleForm.accessMode,"onUpdate:modelValue":o[22]||(o[22]=u=>e.ruleForm.accessMode=u)},{default:a(()=>[t(S,{label:1},{default:a(()=>[ce]),_:1}),t(S,{label:0},{default:a(()=>[De]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"\u5C5E\u6027\u5B9A\u4E49\u63CF\u8FF0",prop:"desc"},{default:a(()=>[t(d,{modelValue:e.ruleForm.desc,"onUpdate:modelValue":o[23]||(o[23]=u=>e.ruleForm.desc=u),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5C5E\u6027\u5B9A\u4E49\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),t(U,{ref:"editOptionRef",onTypeList:e.getOptionData},null,8,["onTypeList"])])}var Re=P(H,[["render",Ue]]);export{Re as default};
