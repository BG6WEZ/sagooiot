import{L as $,h as g,a2 as K,k as N,ab as Q,a as T,_ as a,T as t,ai as u,as as C,o as r,b as U,aa as B,U as s,S as d,Y as D,Z as M,V as O}from"./vue.1701184304695.js";import P from"./edit.17011843046953.js";import{_ as Y,b as k,h as Z,E as j}from"./index.1701184304695.js";import"./index.17011843046957.js";const G=$({name:"cityManage",components:{EditDic:P},setup(){const e=g(),l=g(),w=g(),i=K({ids:[],tableData:{data:[],loading:!1,param:{name:"",code:"",status:-1}}}),v=()=>{_()},_=()=>{i.tableData.loading=!0,k.city.getList(i.tableData.param).then(o=>{i.tableData.data=o||[],i.tableData.loading=!1})},h=()=>{l.value.openDialog(null,i.tableData.data)},b=o=>{l.value.openDialog(o,i.tableData.data)},y=o=>{let c="\u4F60\u786E\u5B9A\u8981\u5220\u9664\u6240\u9009\u6570\u636E\uFF1F";c=`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u8BBE\u5907\uFF1A\u201C${o.name}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,Z.confirm(c,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{k.city.del(o.id).then(()=>{j.success("\u5220\u9664\u6210\u529F"),_()})}).catch(()=>{})};return N(()=>{v()}),{addDicRef:e,editDicRef:l,queryRef:w,onOpenAddDic:h,onOpenEditDic:b,onRowDel:y,queryList:_,resetQuery:o=>{!o||(o.resetFields(),_())},handleSelectionChange:o=>{i.ids=o.map(c=>c.id)},...Q(i)}}}),H={class:"system-dic-container"},I={class:"system-user-search mb15"},J=D(" \u67E5\u8BE2 "),W=D(" \u91CD\u7F6E "),X=D(" \u65B0\u589E "),x=D("\u4FEE\u6539"),ee=D("\u5220\u9664");function ae(e,l,w,i,v,_){const h=u("el-input"),b=u("el-form-item"),y=u("ele-Search"),F=u("el-icon"),p=u("el-button"),o=u("ele-Refresh"),c=u("ele-FolderAdd"),A=u("el-form"),m=u("el-table-column"),R=u("el-table"),q=u("pagination"),L=u("el-card"),V=u("EditDic"),E=C("auth"),f=C("col"),z=C("loading");return r(),T("div",H,[a(L,{shadow:"hover"},{default:t(()=>[U("div",I,[a(A,{model:e.tableData.param,ref:"queryRef",inline:!0,"label-width":"100px"},{default:t(()=>[a(b,{label:"\u57CE\u5E02\u540D\u79F0",prop:"name"},{default:t(()=>[a(h,{modelValue:e.tableData.param.name,"onUpdate:modelValue":l[0]||(l[0]=n=>e.tableData.param.name=n),placeholder:"\u8BF7\u8F93\u5165\u57CE\u5E02\u540D\u79F0",clearable:"",size:"default",onKeyup:B(e.queryList,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(b,{label:"\u57CE\u5E02\u7F16\u53F7",prop:"code"},{default:t(()=>[a(h,{modelValue:e.tableData.param.code,"onUpdate:modelValue":l[1]||(l[1]=n=>e.tableData.param.code=n),placeholder:"\u8BF7\u8F93\u5165\u57CE\u5E02\u7F16\u53F7",clearable:"",size:"default",onKeyup:B(e.queryList,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(b,null,{default:t(()=>[s((r(),d(p,{size:"default",type:"primary",class:"ml10",onClick:e.queryList},{default:t(()=>[a(F,null,{default:t(()=>[a(y)]),_:1}),J]),_:1},8,["onClick"])),[[E,"query"]]),s((r(),d(p,{size:"default",onClick:l[2]||(l[2]=n=>e.resetQuery(e.queryRef))},{default:t(()=>[a(F,null,{default:t(()=>[a(o)]),_:1}),W]),_:1})),[[E,"reset"]]),s((r(),d(p,{size:"default",type:"success",class:"ml10",onClick:e.onOpenAddDic},{default:t(()=>[a(F,null,{default:t(()=>[a(c)]),_:1}),X]),_:1},8,["onClick"])),[[E,"add"]])]),_:1})]),_:1},8,["model"])]),s((r(),d(R,{data:e.tableData.data,style:{width:"100%"},"row-key":"id","default-expand-all":"",indent:16,"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:t(()=>[s(a(m,{label:"\u57CE\u5E02\u540D\u79F0",prop:"name","show-overflow-tooltip":!0},null,512),[[f,"name"]]),s(a(m,{label:"\u57CE\u5E02\u7F16\u53F7",prop:"code","show-overflow-tooltip":!0},null,512),[[f,"code"]]),s((r(),d(m,{label:"\u72B6\u6001",prop:"status",width:"80"},{default:t(n=>[D(M(n.row.status===1?"\u5728\u7EBF":"\u4E0D\u5728\u7EBF"),1)]),_:1})),[[f,"status"]]),s(a(m,{label:"\u6392\u5E8F",prop:"sort",align:"center"},null,512),[[f,"sort"]]),s(a(m,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createdAt","show-overflow-tooltip":!0},null,512),[[f,"createdAt"]]),s((r(),d(m,{label:"\u64CD\u4F5C",width:"200",align:"center"},{default:t(n=>[s((r(),d(p,{size:"small",text:"",type:"warning",onClick:S=>e.onOpenEditDic(n.row)},{default:t(()=>[x]),_:2},1032,["onClick"])),[[E,"edit"]]),s((r(),d(p,{size:"small",text:"",type:"danger",onClick:S=>e.onRowDel(n.row)},{default:t(()=>[ee]),_:2},1032,["onClick"])),[[E,"del"]])]),_:1})),[[f,"handle"]])]),_:1},8,["data"])),[[z,e.tableData.loading]]),s(a(q,{total:e.tableData.total,page:e.tableData.param.pageNum,"onUpdate:page":l[3]||(l[3]=n=>e.tableData.param.pageNum=n),limit:e.tableData.param.pageSize,"onUpdate:limit":l[4]||(l[4]=n=>e.tableData.param.pageSize=n),onPagination:e.queryList},null,8,["total","page","limit","onPagination"]),[[O,e.tableData.total>0]])]),_:1}),a(V,{ref:"editDicRef",treeData:e.tableData.data,onQueryList:e.queryList},null,8,["treeData","onQueryList"])])}var ue=Y(G,[["render",ae]]);export{ue as default};
