import{_ as C,b as h,E as V}from"./index.1701184304695.js";import{L as w,h as E,a2 as y,ab as B,S as g,T as t,n as I,ai as s,o as D,b as S,_ as o,X as R,Y as v}from"./vue.1701184304695.js";const k={id:void 0,name:"",dataScope:1,deptIds:[]},A=w({props:{deptData:{type:Array,default:()=>[]}},setup(){const e=E([]),u=E(null),F={children:"children",label:"deptName"},p=E(),l=y({isShowDialog:!1,ruleForm:{...k}}),b=async m=>{i();const{id:f,name:c,dataScope:_,deptIds:a}=await h.role.getRole(m.id);l.ruleForm={id:f,name:c,dataScope:_,deptIds:a||[]},l.isShowDialog=!0,I(()=>{a&&a.length&&p.value.setCheckedKeys(a)})},d=()=>{l.isShowDialog=!1},r=()=>{d()},n=()=>{l.ruleForm.dataScope===2?l.ruleForm.deptIds=p.value.getCheckedKeys(!0):l.ruleForm.deptIds=[],h.role.dataScope(l.ruleForm).then(()=>{V.success("\u8BBE\u7F6E\u6570\u636E\u6743\u9650\u6210\u529F"),d()})},i=()=>{l.ruleForm={...k}};return{openDialog:b,closeDialog:d,defaultProps:F,treeRef:p,onCancel:r,onSubmit:n,postList:e,formRef:u,...B(l)}}}),N={class:"tree"},P={class:"dialog-footer"},$=v("\u53D6 \u6D88"),T=v("\u786E\u5B9A");function U(e,u,F,p,l,b){const d=s("el-input"),r=s("el-form-item"),n=s("el-option"),i=s("el-select"),m=s("el-tree"),f=s("el-form"),c=s("el-button"),_=s("el-dialog");return D(),g(_,{"custom-class":"custom-dialog",title:"\u5206\u914D\u6570\u636E\u6743\u9650",modelValue:e.isShowDialog,"onUpdate:modelValue":u[2]||(u[2]=a=>e.isShowDialog=a),width:"500px"},{footer:t(()=>[S("span",P,[o(c,{onClick:e.onCancel,size:"default"},{default:t(()=>[$]),_:1},8,["onClick"]),o(c,{type:"primary",onClick:e.onSubmit,size:"default"},{default:t(()=>[T]),_:1},8,["onClick"])])]),default:t(()=>[o(f,{ref:"formRef",model:e.ruleForm,"label-width":"90px"},{default:t(()=>[o(r,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:t(()=>[o(d,{modelValue:e.ruleForm.name,"onUpdate:modelValue":u[0]||(u[0]=a=>e.ruleForm.name=a),disabled:"",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),o(r,{label:"\u6743\u9650\u8303\u56F4",prop:"dataScope"},{default:t(()=>[o(i,{modelValue:e.ruleForm.dataScope,"onUpdate:modelValue":u[1]||(u[1]=a=>e.ruleForm.dataScope=a),placeholder:"\u8BF7\u9009\u62E9",clearable:"",class:"w100"},{default:t(()=>[o(n,{label:"\u5168\u90E8\u6570\u636E\u6743\u9650",value:1}),o(n,{label:"\u81EA\u5B9A\u6570\u636E\u6743\u9650",value:2}),o(n,{label:"\u672C\u90E8\u95E8\u6570\u636E\u6743\u9650",value:3}),o(n,{label:"\u672C\u90E8\u95E8\u53CA\u4EE5\u4E0B\u6570\u636E\u6743\u9650",value:4})]),_:1},8,["modelValue"])]),_:1}),e.ruleForm.dataScope===2?(D(),g(r,{key:0,label:"\u6570\u636E\u6743\u9650",prop:"deptIds"},{default:t(()=>[S("div",N,[o(m,{ref:"treeRef",data:e.deptData,"show-checkbox":"","default-expand-all":"","node-key":"deptId","highlight-current":"",props:e.defaultProps,"check-on-click-node":"","expand-on-click-node":!1},null,8,["data","props"])])]),_:1})):R("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}var L=C(A,[["render",U],["__scopeId","data-v-5678cfab"]]);export{L as default};
