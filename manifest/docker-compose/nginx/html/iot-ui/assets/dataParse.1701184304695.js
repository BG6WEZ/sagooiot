import{_ as _sfc_main$1}from"./index.170118430469524.js";import{a as api}from"./index.170118430469519.js";import{L as defineComponent,h as ref,k as onMounted,a as createElementBlock,b as createBaseVNode,_ as createVNode,T as withCtx,F as Fragment,aD as useRoute,ai as resolveComponent,o as openBlock,Y as createTextVNode}from"./vue.1701184304695.js";import{_ as _export_sfc,E as ElMessage}from"./index.1701184304695.js";var dataParse_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1={class:"flex"},_hoisted_2={class:"mock",style:{width:"300px","margin-left":"20px"}},_hoisted_3=createTextVNode("\u4FDD\u5B58\u811A\u672C"),_hoisted_4=createTextVNode("\u8C03\u8BD5"),_sfc_main=defineComponent({__name:"dataParse",props:{script:String},emits:["updateScript"],setup(__props,{emit}){const props=__props,route=useRoute(),inputData=ref(""),outputData=ref(""),content=ref(""),mirrorRef=ref();onMounted(()=>{content.value=props.script});function saveCode(){const funStr=mirrorRef.value.getValue();if(funStr==="")return toSave(funStr);try{eval("("+funStr+")"),toSave(funStr)}catch(e){ElMessage.error("\u8BED\u6CD5\u6821\u9A8C\u672A\u901A\u8FC7")}}function toSave(e){api.product.script({id:route.params.id,scriptInfo:e}).then(()=>{ElMessage.success("\u4FDD\u5B58\u6210\u529F"),emit("updateScript",e)})}function mock(){if(!inputData.value)return ElMessage.error("\u8BF7\u8F93\u5165\u53C2\u6570");const funStr=mirrorRef.value.getValue();if(funStr==="")return ElMessage.error("\u8BF7\u5148\u8F93\u5165\u53EF\u6267\u884C\u811A\u672C");try{const fun=eval("("+funStr+")");try{const e=fun(JSON.parse(inputData.value));outputData.value=typeof e=="object"?JSON.stringify(e,null,2):e}catch{const e=fun(inputData.value);outputData.value=typeof e=="object"?JSON.stringify(e,null,2):e}}catch(e){ElMessage.error("\u6570\u636E\u89E3\u6790\u811A\u672C\u8BED\u6CD5\u6821\u9A8C\u672A\u901A\u8FC7\u6216\u53C2\u6570\u7C7B\u578B\u6709\u8BEF")}}return(e,t)=>{const a=resolveComponent("el-input"),o=resolveComponent("el-button");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createVNode(_sfc_main$1,{class:"params flex1",ref_key:"mirrorRef",ref:mirrorRef,mode:"",content:content.value},null,8,["content"]),createBaseVNode("div",_hoisted_2,[createVNode(a,{class:"input",modelValue:inputData.value,"onUpdate:modelValue":t[0]||(t[0]=u=>inputData.value=u),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5165\u53C2\uFF0C\u4EE5\u5B57\u7B26\u4E32\u7684\u65B9\u5F0F\uFF0C\u5982\u679C\u662F\u5BF9\u8C61\u5B57\u7B26\u4E32\u4F1A\u5728\u6267\u884C\u65F6\u81EA\u52A8\u8F6C\u6362\u4E3A\u5BF9\u8C61\u518D\u6267\u884C"},null,8,["modelValue"]),createVNode(a,{class:"output",modelValue:outputData.value,"onUpdate:modelValue":t[1]||(t[1]=u=>outputData.value=u),type:"textarea",readonly:"",placeholder:"\u6B64\u5904\u663E\u793A\u6267\u884C\u7ED3\u679C"},null,8,["modelValue"])])]),createVNode(o,{type:"primary",style:{"margin-top":"20px"},onClick:saveCode},{default:withCtx(()=>[_hoisted_3]),_:1}),createVNode(o,{type:"primary",style:{"margin-top":"20px"},onClick:mock},{default:withCtx(()=>[_hoisted_4]),_:1})],64)}}});var dataParse=_export_sfc(_sfc_main,[["__scopeId","data-v-fa0cf300"]]);export{dataParse as default};
