import z from"./edit.170118430469515.js";import{j as c,l as N,k as L,h as M,E as U}from"./index.1701184304695.js";import{u as $}from"./useCommon.1701184304695.js";import{L as I,h as y,a as S,_ as e,T as o,e as t,ai as n,as as T,o as r,b as V,U as q,S as m,X as B,Y as p}from"./vue.1701184304695.js";import"./validator.1701184304695.js";import"./index.17011843046957.js";var F={allUnRead:()=>c("/system/message/allUnRead"),clear:()=>c("/system/message/clear"),del:u=>N("/system/message/del",u),getList:u=>c("/system/message/list",u),red:u=>L("/system/message/red",{id:u}),unReadCount:()=>c("/system/message/unReadCount")};const j={class:"page"},G={class:"search"},P=p("\u5DF2\u8BFB"),X=p("\u672A\u8BFB"),Y=p("\u8BBE\u4E3A\u5DF2\u8BFB"),H=p("\u5220\u9664"),te=I({__name:"index",setup(u){const w=y(),h=y(),{params:l,tableData:C,getList:d,loading:E}=$(F.getList,"Info",{name:"",address:"",types:-1});d();const b=_=>{M.confirm(`\u6B64\u64CD\u4F5C\u5C06\u5220\u9664\u63A5\u53E3\uFF1A\u201C${_.name}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{await F.api.del(_.id),U.success("\u5220\u9664\u6210\u529F"),d()})};return(_,s)=>{const v=n("el-form-item"),D=n("el-form"),i=n("el-table-column"),f=n("el-tag"),g=n("el-button"),k=n("el-table"),x=n("pagination"),R=n("el-card"),A=T("loading");return r(),S("div",j,[e(R,{shadow:"hover"},{default:o(()=>[V("div",G,[e(D,{model:t(l),inline:!0,ref_key:"queryRef",ref:h},{default:o(()=>[e(v)]),_:1},8,["model"])]),q((r(),m(k,{data:t(C),style:{width:"100%"}},{default:o(()=>[e(i,{type:"index",label:"\u5E8F\u53F7",width:"60",align:"center"}),e(i,{prop:"MessageInfo.title",label:"\u6807\u9898","show-overflow-tooltip":""}),e(i,{prop:"MessageInfo.content",label:"\u5185\u5BB9","show-overflow-tooltip":""}),e(i,{prop:"MessageInfo.createdAt",label:"\u53D1\u751F\u4E8B\u4EF6",width:"160"}),e(i,{prop:"",label:"\u72B6\u6001","min-width":"100",align:"center"},{default:o(a=>[a.row.isRead?(r(),m(f,{key:0,type:"success",size:"small"},{default:o(()=>[P]),_:1})):(r(),m(f,{key:1,type:"info",size:"small"},{default:o(()=>[X]),_:1}))]),_:1}),e(i,{label:"\u64CD\u4F5C",width:"150",align:"center"},{default:o(a=>[a.row.isRead?B("",!0):(r(),m(g,{key:0,size:"small",text:"",type:"primary"},{default:o(()=>[Y]),_:1})),e(g,{size:"small",text:"",type:"danger",onClick:J=>b(a.row)},{default:o(()=>[H]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[A,t(E)]]),t(l).total?(r(),m(x,{key:0,total:t(l).total,page:t(l).pageNum,"onUpdate:page":s[0]||(s[0]=a=>t(l).pageNum=a),limit:t(l).pageSize,"onUpdate:limit":s[1]||(s[1]=a=>t(l).pageSize=a),onPagination:s[2]||(s[2]=a=>t(d)())},null,8,["total","page","limit"])):B("",!0)]),_:1}),e(z,{ref_key:"editFormRef",ref:w,onGetList:s[3]||(s[3]=a=>t(d)())},null,512)])}}});export{te as default};
