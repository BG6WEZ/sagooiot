import W from"./editMenu.1701184304695.js";import{b as L,h as ee,E as te}from"./index.1701184304695.js";import ne from"./btn.1701184304695.js";import oe from"./list.1701184304695.js";import{L as le,h as f,a2 as ue,K as ae,a as se,_ as t,T as e,e as ie,j as re,ai as o,as as v,o as u,b as M,U as l,S as a,Z as g,Y as i,X as $}from"./vue.1701184304695.js";import"./btn-form.1701184304695.js";import"./validator.1701184304695.js";import"./list-form.1701184304695.js";const de={class:"system-user-container"},ce={class:"system-menu-search"},_e=i(" \u67E5\u8BE2 "),me=i(" \u91CD\u7F6E "),pe=i(" \u65B0\u589E\u83DC\u5355 "),fe={class:"ml10"},he=i("\u65B0\u589E"),we=i("\u4FEE\u6539"),ye=i("\u5220\u9664"),Ce=i("\u66F4\u591A "),De=i("\u6309\u94AE\u6743\u9650"),ve=i("\u5217\u8868\u6743\u9650"),Be=le({__name:"index",setup(ge){const C=f(),E=f(),b=f(),F=f(),r=ue({loading:!1,queryParams:{title:"",component:"",status:-1},menuTableData:[]}),{proxy:A}=re(),{sys_show_hide:R}=A.useDict("sys_show_hide"),D=f("add"),k=s=>{D.value="add",C.value.openDialog(s)},q=s=>{D.value="edit",C.value.openDialog(s)},T=(s,d)=>{if(d==="buttonAuthorizeList")return b.value.open(s);if(d==="listAuthorizeList")return F.value.open(s)},S=s=>{ee.confirm(`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u83DC\u5355\uFF1A\u201C${s.title}\u201D, \u662F\u5426\u7EE7\u7EED?`,"\u63D0\u793A",{confirmButtonText:"\u5220\u9664",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{L.menu.del(s.id).then(()=>{te.success("\u5220\u9664\u6210\u529F"),A.$refs.editMenuRef.resetMenuSession(),h()})}).catch(()=>{})};ae(()=>{h()});const z=()=>{h()},V=()=>{E.value.resetFields(),z()},h=()=>{r.loading=!0,L.menu.getList(r.queryParams).then(s=>{r.menuTableData=s||[]}).finally(()=>r.loading=!1)};return(s,d)=>{const O=o("el-input"),x=o("el-form-item"),P=o("ele-Search"),w=o("el-icon"),c=o("el-button"),N=o("ele-Refresh"),H=o("ele-FolderAdd"),I=o("el-form"),Q=o("SvgIcon"),_=o("el-table-column"),U=o("el-tag"),j=o("ele-ArrowDown"),B=o("el-dropdown-item"),K=o("el-dropdown-menu"),X=o("el-dropdown"),Y=o("el-table"),Z=o("el-card"),G=o("ApiAuthorizeListDrawer"),m=v("auth"),p=v("col"),J=v("loading");return u(),se("div",de,[t(Z,{shadow:"hover"},{default:e(()=>[M("div",ce,[t(I,{model:r.queryParams,inline:!0,ref_key:"queryRef",ref:E},{default:e(()=>[t(x,{label:"\u83DC\u5355\u540D\u79F0",prop:"title"},{default:e(()=>[t(O,{modelValue:r.queryParams.title,"onUpdate:modelValue":d[0]||(d[0]=n=>r.queryParams.title=n),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",size:"default",clearable:"",class:"w-50"},null,8,["modelValue"])]),_:1}),t(x,null,{default:e(()=>[t(c,{type:"primary",class:"ml10",onClick:z},{default:e(()=>[t(w,null,{default:e(()=>[t(P)]),_:1}),_e]),_:1}),t(c,{size:"default",onClick:d[1]||(d[1]=n=>V())},{default:e(()=>[t(w,null,{default:e(()=>[t(N)]),_:1}),me]),_:1}),l((u(),a(c,{type:"success",class:"ml10",onClick:d[2]||(d[2]=n=>k(null))},{default:e(()=>[t(w,null,{default:e(()=>[t(H)]),_:1}),pe]),_:1})),[[m,"add"]])]),_:1})]),_:1},8,["model"])]),l((u(),a(Y,{data:r.menuTableData,"default-expand-all":!1,style:{width:"100%"},"row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:e(()=>[l((u(),a(_,{label:"\u83DC\u5355\u540D\u79F0","show-overflow-tooltip":""},{default:e(n=>[t(Q,{name:n.row.icon},null,8,["name"]),M("span",fe,g(n.row.title),1)]),_:1})),[[p,"title"]]),l(t(_,{prop:"path",label:"\u8DEF\u7531\u8DEF\u5F84","show-overflow-tooltip":""},null,512),[[p,"path"]]),l(t(_,{label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component","show-overflow-tooltip":""},null,512),[[p,"component"]]),l(t(_,{label:"\u6392\u5E8F",prop:"weigh",width:"80",align:"center"},null,512),[[p,"weigh"]]),l((u(),a(_,{label:"\u7C7B\u578B",width:"80",align:"center"},{default:e(n=>[t(U,{type:n.row.menuType===0?"danger":n.row.menuType===1?"success":"warning",size:"small"},{default:e(()=>[i(g(n.row.menuType===0?"\u76EE\u5F55":n.row.menuType===1?"\u83DC\u5355":"\u6309\u94AE"),1)]),_:2},1032,["type"])]),_:1})),[[p,"menuType"]]),l((u(),a(_,{prop:"isHide",label:"\u663E\u793A\u72B6\u6001",align:"center",width:"120"},{default:e(({row:n})=>[i(g(n.isHide?"\u9690\u85CF":"\u663E\u793A"),1)]),_:1})),[[p,"isHide"]]),l((u(),a(_,{label:"\u64CD\u4F5C",width:"200",align:"center",fixed:"right"},{default:e(n=>[n.row.menuType?$("",!0):l((u(),a(c,{key:0,size:"small",type:"text",onClick:y=>k(n.row)},{default:e(()=>[he]),_:2},1032,["onClick"])),[[m,"add"]]),l((u(),a(c,{size:"small",text:"",type:"warning",onClick:y=>q(n.row)},{default:e(()=>[we]),_:2},1032,["onClick"])),[[m,"edit"]]),l((u(),a(c,{size:"small",text:"",type:"danger",onClick:y=>S(n.row)},{default:e(()=>[ye]),_:2},1032,["onClick"])),[[m,"del"]]),n.row.menuType?(u(),a(X,{key:1},{dropdown:e(()=>[t(K,null,{default:e(()=>[l((u(),a(B,{onClick:y=>T(n.row,"buttonAuthorizeList")},{default:e(()=>[De]),_:2},1032,["onClick"])),[[m,"btn"]]),l((u(),a(B,{onClick:y=>T(n.row,"listAuthorizeList")},{default:e(()=>[ve]),_:2},1032,["onClick"])),[[m,"list"]])]),_:2},1024)]),default:e(()=>[l((u(),a(c,{type:"text",size:"small",style:{"margin-top":"1px","margin-left":"10px"}},{default:e(()=>[Ce,t(w,null,{default:e(()=>[t(j)]),_:1})]),_:1})),[[m,"more"]])]),_:2},1024)):$("",!0)]),_:1})),[[p,"handle"]])]),_:1},8,["data"])),[[J,r.loading]])]),_:1}),t(W,{ref_key:"editMenuRef",ref:C,onMenuList:h,menu:r.menuTableData,visibleOptions:ie(R),acType:D.value},null,8,["menu","visibleOptions","acType"]),t(ne,{ref_key:"buttonAuthorizeList",ref:b},null,512),t(oe,{ref_key:"listAuthorizeList",ref:F},null,512),t(G,{ref:"apiAuthorizeList"},null,512)])}}});export{Be as default};
