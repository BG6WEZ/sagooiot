import{L as N,h as p,a2 as O,i as P,S as k,T as t,n as R,ai as o,o as r,b as j,_ as a,a as A,F as b,a8 as $,aa as q,Y as E}from"./vue.1701184304695.js";import{b as _,E as M}from"./index.1701184304695.js";import{r as m}from"./validator.1701184304695.js";import{a as Y}from"./index.17011843046957.js";const z=E("\u63A5\u53E3"),G=E("\u5206\u7C7B"),H={class:"dialog-footer"},J=E("\u53D6\u6D88"),Q=E("\u786E\u5B9A"),ae=N({__name:"edit",emits:["getList"],setup(W,{expose:C,emit:I}){const d=p(!1),i=p(),F=p([]),v=p([]),c=p([]),B={menuIds:[],id:void 0,parentId:void 0,name:"",types:2,address:"",method:"",remark:"",status:1},e=O({...B});P(()=>e.types,()=>{e.parentId=void 0});const w={parentId:[m("\u4E0A\u7EA7\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A","change")],menuIds:[m("\u5173\u8054\u9875\u9762\u4E0D\u80FD\u4E3A\u7A7A","change")],method:[m("\u8BF7\u6C42\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A","change")],name:[m("\u63A5\u53E3\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A")],address:[m("\u63A5\u53E3\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A")]};Y.template.getDictData({DictType:"api_methods"}).then(n=>{c.value=n.values}),_.menu.getList({status:-1}).then(n=>{F.value=n});const y=async()=>{await i.value.validate(),await(e.id?_.api.edit:_.api.add)(e),M.success("\u64CD\u4F5C\u6210\u529F"),D(),d.value=!1,I("getList")},D=async()=>{Object.assign(e,{...B}),i.value&&i.value.resetFields()};return C({open:async n=>{D(),d.value=!0,_.api.getList({types:1,status:-1}).then(u=>{v.value=u.Info}),R(()=>{Object.assign(e,{method:c.value.length?c.value[0].value:"",...n})})}}),(n,u)=>{const h=o("el-radio-button"),U=o("el-radio-group"),s=o("el-form-item"),V=o("el-cascader"),f=o("el-input"),x=o("el-option"),L=o("el-select"),S=o("el-switch"),T=o("el-form"),g=o("el-button"),K=o("el-dialog");return r(),k(K,{class:"api-edit",modelValue:d.value,"onUpdate:modelValue":u[11]||(u[11]=l=>d.value=l),title:`${e.id?"\u7F16\u8F91\u63A5\u53E3":"\u65B0\u589E\u63A5\u53E3"}`,width:"600px","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[j("div",H,[a(g,{onClick:u[10]||(u[10]=l=>d.value=!1)},{default:t(()=>[J]),_:1}),a(g,{type:"primary",onClick:y},{default:t(()=>[Q]),_:1})])]),default:t(()=>[a(T,{ref_key:"formRef",ref:i,model:e,rules:w,"label-width":"80px",onKeyup:q(y,["enter"])},{default:t(()=>[a(s,{label:"\u9009\u62E9\u7C7B\u578B",prop:"types"},{default:t(()=>[a(U,{modelValue:e.types,"onUpdate:modelValue":u[0]||(u[0]=l=>e.types=l)},{default:t(()=>[a(h,{label:2},{default:t(()=>[z]),_:1}),a(h,{label:1},{default:t(()=>[G]),_:1})]),_:1},8,["modelValue"])]),_:1}),e.types===1?(r(),A(b,{key:0},[a(s,{label:"\u4E0A\u7EA7\u5206\u7C7B",prop:"parentId"},{default:t(()=>[a(V,{options:[{id:-1,name:"\u6839\u8282\u70B9",children:v.value}],props:{checkStrictly:!0,multiple:!1,emitPath:!1,value:"id",label:"name"},placeholder:"\u8BF7\u9009\u62E9\u5173\u8054\u9875\u9762",clearable:"",class:"w100",modelValue:e.parentId,"onUpdate:modelValue":u[1]||(u[1]=l=>e.parentId=l)},null,8,["options","modelValue"])]),_:1}),a(s,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:t(()=>[a(f,{modelValue:e.name,"onUpdate:modelValue":u[2]||(u[2]=l=>e.name=l),placeholder:"\u8F93\u5165\u63A5\u53E3\u540D\u79F0"},null,8,["modelValue"])]),_:1})],64)):(r(),A(b,{key:1},[a(s,{label:"\u4E0A\u7EA7\u5206\u7C7B",prop:"parentId"},{default:t(()=>[a(V,{options:v.value,props:{checkStrictly:!0,multiple:!1,emitPath:!1,value:"id",label:"name"},placeholder:"\u8BF7\u9009\u62E9\u5173\u8054\u9875\u9762",clearable:"",class:"w100",modelValue:e.parentId,"onUpdate:modelValue":u[3]||(u[3]=l=>e.parentId=l)},null,8,["options","modelValue"])]),_:1}),a(s,{label:"\u5173\u8054\u9875\u9762",prop:"menuIds"},{default:t(()=>[a(V,{options:F.value,props:{checkStrictly:!1,multiple:!0,emitPath:!1,value:"id",label:"title"},placeholder:"\u8BF7\u9009\u62E9\u5173\u8054\u9875\u9762",clearable:"",class:"w100",modelValue:e.menuIds,"onUpdate:modelValue":u[4]||(u[4]=l=>e.menuIds=l)},null,8,["options","modelValue"])]),_:1}),a(s,{label:"\u63A5\u53E3\u540D\u79F0",prop:"name"},{default:t(()=>[a(f,{modelValue:e.name,"onUpdate:modelValue":u[5]||(u[5]=l=>e.name=l),placeholder:"\u8F93\u5165\u63A5\u53E3\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(s,{label:"\u63A5\u53E3\u5730\u5740",prop:"address"},{default:t(()=>[a(f,{modelValue:e.address,"onUpdate:modelValue":u[6]||(u[6]=l=>e.address=l),placeholder:"\u63A5\u53E3\u5730\u5740"},null,8,["modelValue"])]),_:1}),a(s,{label:"\u8BBF\u95EE\u7C7B\u578B",prop:"method"},{default:t(()=>[a(L,{modelValue:e.method,"onUpdate:modelValue":u[7]||(u[7]=l=>e.method=l),placeholder:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u7C7B\u578B"},{default:t(()=>[(r(!0),A(b,null,$(c.value,l=>(r(),k(x,{key:l.value,label:l.key,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[a(S,{modelValue:e.status,"onUpdate:modelValue":u[8]||(u[8]=l=>e.status=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})],64)),a(s,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[a(f,{modelValue:e.remark,"onUpdate:modelValue":u[9]||(u[9]=l=>e.remark=l),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},8,["modelValue","title"])}}});export{ae as default};
