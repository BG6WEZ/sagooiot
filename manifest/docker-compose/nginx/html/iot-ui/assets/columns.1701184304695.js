import{c as j,u as N,_ as D}from"./index.1701184304695.js";import{A as V}from"./aside.1701184304695.js";import{H as U,M as z}from"./main.1701184304695.js";import{L as w,h as F,aD as E,aF as X,a2 as Z,l as B,i as q,k as G,H as J,aI as K,ab as Q,j as W,n as Y,ai as c,o as p,a as g,_ as d,T as b,b as y,F as ee,a8 as te,O as H,Z as R,S as x,X as T}from"./vue.1701184304695.js";import"./parent.1701184304695.js";const se=w({name:"layoutColumnsAside",setup(){const n=F([]),h=F(),{t:O}=j(),{proxy:r}=W(),i=N(),k=E(),C=X(),t=Z({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[],isNavHover:!1}),o=e=>{let s=e.indexOf(".")>0?O(e):e;return s&&s.length>=4&&s.substring(0,i.state.themeConfig.themeConfig.columnsAsideLayout==="columns-vertical"?4:3),s},u=B(()=>i.state.themeConfig.themeConfig.columnsAsideStyle),_=B(()=>i.state.themeConfig.themeConfig.columnsAsideLayout),m=e=>{t.liIndex=e,h.value.style.top=`${n.value[e].offsetTop+t.difference}px`},A=(e,s)=>{m(s);let{path:l,redirect:a}=e;a?C.push(a):C.push(l)},S=(e,s)=>{let{path:l}=e;t.liOldPath=l,t.liOldIndex=s,t.liHoverIndex=s,r.mittBus.emit("setSendColumnsChildren",f(l)),i.dispatch("routesList/setColumnsMenuHover",!1),i.dispatch("routesList/setColumnsNavHover",!0),t.isNavHover=!0},L=async()=>{await i.dispatch("routesList/setColumnsNavHover",!1),setTimeout(()=>{const{isColumnsMenuHover:e,isColumnsNavHover:s}=i.state.routesList;!e&&!s&&r.mittBus.emit("restoreDefault")},100)},v=e=>{Y(()=>{m(e)})},I=()=>{t.columnsAsideList=M(i.state.routesList.routesList);const e=f(k.path);if(Object.keys(e).length<=0)return!1;v(e.item[0].k),r.mittBus.emit("setSendColumnsChildren",e)},f=e=>{const s=e.split("/");let l={};return t.columnsAsideList.map((a,P)=>{a.path===`/${s[1]}`&&(a.k=P,l.item=[{...a}],l.children=[{...a}],a.children&&(l.children=a.children))}),l},M=e=>e.filter(s=>{var l;return!((l=s.meta)!=null&&l.isHide)}).map(s=>(s=Object.assign({},s),s.children&&(s.children=M(s.children)),s)),$=e=>{t.routeSplit=e.split("/"),t.routeSplit.shift();const s=`/${t.routeSplit[0]}`,l=t.columnsAsideList.find(a=>a.path===s);if(!l)return!1;setTimeout(()=>{v(l.k)},0)};return q(i.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,!e.routesList.isColumnsMenuHover&&!e.routesList.isColumnsNavHover)t.liHoverIndex=null,r.mittBus.emit("setSendColumnsChildren",f(k.path));else{if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;r.mittBus.emit("setSendColumnsChildren",f(t.liOldPath))}}),G(()=>{I(),r.mittBus.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),J(()=>{r.mittBus.off("restoreDefault",()=>{})}),K(e=>{$(e.path),r.mittBus.emit("setSendColumnsChildren",f(e.path))}),{columnsAsideOffsetTopRefs:n,columnsAsideActiveRef:h,onColumnsAsideDown:v,setColumnsAsideStyle:u,setColumnsAsidelayout:_,onColumnsAsideMenuClick:A,onColumnsAsideMenuMouseenter:S,onColumnsAsideMenuMouseleave:L,tMenuTitle:o,...Q(t)}}}),ne={class:"layout-columns-aside"},oe=["onClick","onMouseenter","title"],le={class:"columns-vertical-title font12"},ie=["href"],ae={class:"columns-vertical-title font12"};function re(n,h,O,r,i,k){const C=c("SvgIcon"),t=c("el-scrollbar");return p(),g("div",ne,[d(t,null,{default:b(()=>[y("ul",{onMouseleave:h[0]||(h[0]=o=>n.onColumnsAsideMenuMouseleave())},[(p(!0),g(ee,null,te(n.columnsAsideList,(o,u)=>{var _,m,A,S,L,v,I,f,M,$;return p(),g("li",{key:u,onClick:e=>n.onColumnsAsideMenuClick(o,u),onMouseenter:e=>n.onColumnsAsideMenuMouseenter(o,u),ref_for:!0,ref:e=>{e&&(n.columnsAsideOffsetTopRefs[u]=e)},class:H({"layout-columns-active":n.liIndex===u,"layout-columns-hover":n.liHoverIndex===u}),title:((_=o.meta)==null?void 0:_.title.indexOf("."))>0?n.$t((m=o.meta)==null?void 0:m.title):(A=o.meta)==null?void 0:A.title},[!((S=o.meta)!=null&&S.isLink)||((L=o.meta)==null?void 0:L.isLink)&&o.meta.isIframe?(p(),g("div",{key:0,class:H(n.setColumnsAsidelayout)},[d(C,{name:(v=o.meta)==null?void 0:v.icon},null,8,["name"]),y("div",le,R(n.tMenuTitle((I=o.meta)==null?void 0:I.title)),1)],2)):(p(),g("div",{key:1,class:H(n.setColumnsAsidelayout)},[y("a",{href:(f=o.meta)==null?void 0:f.isLink,target:"_blank"},[d(C,{name:(M=o.meta)==null?void 0:M.icon},null,8,["name"]),y("div",ae,R(n.tMenuTitle(($=o.meta)==null?void 0:$.title)),1)],8,ie)],2))],42,oe)}),128)),y("div",{ref:"columnsAsideActiveRef",class:H(n.setColumnsAsideStyle)},null,2)],32)]),_:1})])}var ue=D(se,[["render",re],["__scopeId","data-v-ac8e33d8"]]);const ce=w({name:"layoutColumns",components:{Aside:V,Header:U,Main:z,ColumnsAside:ue},setup(){const n=N();return{isFixedHeader:B(()=>n.state.themeConfig.themeConfig.isFixedHeader)}}}),de={class:"layout-columns-warp"};function me(n,h,O,r,i,k){const C=c("ColumnsAside"),t=c("Aside"),o=c("Header"),u=c("Main"),_=c("el-scrollbar"),m=c("el-container"),A=c("el-backtop");return p(),x(m,{class:"layout-container"},{default:b(()=>[d(C),y("div",de,[d(t),d(m,{class:H(["flex-center layout-backtop",{"layout-backtop":!n.isFixedHeader}])},{default:b(()=>[n.isFixedHeader?(p(),x(o,{key:0})):T("",!0),d(_,{class:H({"layout-backtop":n.isFixedHeader})},{default:b(()=>[n.isFixedHeader?T("",!0):(p(),x(o,{key:0})),d(u)]),_:1},8,["class"])]),_:1},8,["class"])]),d(A,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}var Ae=D(ce,[["render",me]]);export{Ae as default};
