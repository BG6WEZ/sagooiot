import N from"./editRole.1701184304695.js";import Q from"./editPer.1701184304695.js";import U from"./permission.1701184304695.js";import{_ as q,b as C,h as G,E as $}from"./index.1701184304695.js";import{L as j,h as E,a2 as I,k as Y,ab as H,a as J,_ as e,T as t,ae as K,ai as l,as as A,o as u,b as W,U as n,S as i,j as X,Y as c}from"./vue.1701184304695.js";const Z=j({name:"apiV1SystemRoleList",components:{EditRole:N,permissionVue:U,EditPer:Q},setup(){const{proxy:a}=X(),p=E(),R=E(),F=E(),v=E(),y=E(),m=I({deptData:[],tableData:{data:[],loading:!1,param:{name:"",status:-1}}}),f=()=>{_(),C.dept.getList({status:1}).then(o=>{m.deptData=o})},_=()=>{m.tableData.loading=!0,C.role.getList(m.tableData.param).then(o=>{m.tableData.data=o||[]}).finally(()=>m.tableData.loading=!1)},w=()=>{F.value.openDialog()},g=o=>{F.value.openDialog(K(o))},h=o=>{G.confirm(`\u6B64\u64CD\u4F5C\u5C06\u6C38\u4E45\u5220\u9664\u89D2\u8272\uFF1A\u201C${o.name}\u201D\uFF0C\u662F\u5426\u7EE7\u7EED?`,"\u63D0\u793A",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{C.role.deleteRole(o.id).then(()=>{$.success("\u5220\u9664\u6210\u529F"),a.$refs.editRoleRef.resetMenuSession(),_()})})},r=async o=>{const{isAllow:d}=await C.role.auth.isAllow(o.id);d?v.value.openDialog(o):$.error("\u8BE5\u89D2\u8272\u7981\u6B62\u88AB\u6388\u6743")},k=async o=>{y.value.openDialog(o)};return Y(()=>{f()}),{queryRef:R,resetQuery:()=>{R.value.resetFields(),f()},addRoleRef:p,editRoleRef:F,permissionRef:v,dataPermissionRef:y,dataPermission:k,permission:r,onOpenAddRole:w,onOpenEditRole:g,onRowDel:h,roleList:_,...H(m)}}}),x={class:"system-role-container"},ee={class:"system-user-search mb15"},te=c(" \u67E5\u8BE2 "),ae=c(" \u91CD\u7F6E "),le=c(" \u65B0\u589E\u89D2\u8272 "),oe=c("\u542F\u7528"),ne=c("\u7981\u7528"),se=c("\u4FEE\u6539"),ue=c("\u5220\u9664"),ie=c("\u89D2\u8272\u6743\u9650"),re=c("\u6570\u636E\u6743\u9650");function de(a,p,R,F,v,y){const m=l("el-input"),f=l("el-form-item"),_=l("el-option"),w=l("el-select"),g=l("ele-Search"),h=l("el-icon"),r=l("el-button"),k=l("ele-Refresh"),V=l("ele-FolderAdd"),o=l("el-form"),d=l("el-table-column"),z=l("el-tag"),L=l("el-table"),P=l("el-card"),O=l("EditRole"),S=l("permissionVue"),T=l("EditPer"),b=A("auth"),D=A("col"),M=A("loading");return u(),J("div",x,[e(P,{shadow:"hover"},{default:t(()=>[W("div",ee,[e(o,{model:a.tableData.param,inline:!0,ref:"queryRef"},{default:t(()=>[e(f,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:t(()=>[e(m,{size:"default",modelValue:a.tableData.param.name,"onUpdate:modelValue":p[0]||(p[0]=s=>a.tableData.param.name=s),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0",class:"w-50",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[e(w,{size:"default",placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",class:"w-50",modelValue:a.tableData.param.status,"onUpdate:modelValue":p[1]||(p[1]=s=>a.tableData.param.status=s)},{default:t(()=>[e(_,{label:"\u5168\u90E8",value:-1}),e(_,{label:"\u542F\u7528",value:1}),e(_,{label:"\u7981\u7528",value:0})]),_:1},8,["modelValue"])]),_:1}),e(f,null,{default:t(()=>[e(r,{size:"default",type:"primary",class:"ml10",onClick:a.roleList},{default:t(()=>[e(h,null,{default:t(()=>[e(g)]),_:1}),te]),_:1},8,["onClick"]),e(r,{size:"default",onClick:p[2]||(p[2]=s=>a.resetQuery())},{default:t(()=>[e(h,null,{default:t(()=>[e(k)]),_:1}),ae]),_:1}),n((u(),i(r,{size:"default",type:"success",class:"ml10",onClick:a.onOpenAddRole},{default:t(()=>[e(h,null,{default:t(()=>[e(V)]),_:1}),le]),_:1},8,["onClick"])),[[b,"add"]])]),_:1})]),_:1},8,["model"])]),n((u(),i(L,{data:a.tableData.data,style:{width:"100%"},"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:t(()=>[e(d,{type:"index",label:"\u5E8F\u53F7",width:"60",align:"center"}),n(e(d,{prop:"name",label:"\u89D2\u8272\u540D\u79F0","show-overflow-tooltip":""},null,512),[[D,"name"]]),n(e(d,{prop:"remark",label:"\u89D2\u8272\u63CF\u8FF0","show-overflow-tooltip":""},null,512),[[D,"remark"]]),n(e(d,{prop:"listOrder",label:"\u6392\u5E8F",width:"60",align:"center"},null,512),[[D,"listOrder"]]),n((u(),i(d,{prop:"status",label:"\u89D2\u8272\u72B6\u6001",width:"100",align:"center"},{default:t(s=>[s.row.status===1?(u(),i(z,{key:0,type:"success",size:"small"},{default:t(()=>[oe]),_:1})):(u(),i(z,{key:1,type:"info",size:"small"},{default:t(()=>[ne]),_:1}))]),_:1})),[[D,"status"]]),n(e(d,{prop:"createdAt",label:"\u521B\u5EFA\u65F6\u95F4",width:"170",align:"center"},null,512),[[D,"createdAt"]]),n((u(),i(d,{label:"\u64CD\u4F5C",width:"220",align:"center",fixed:"right"},{default:t(s=>[n((u(),i(r,{size:"small",type:"text",onClick:B=>a.onOpenEditRole(s.row)},{default:t(()=>[se]),_:2},1032,["onClick"])),[[b,"edit"]]),n((u(),i(r,{size:"small",text:"",type:"danger",onClick:B=>a.onRowDel(s.row)},{default:t(()=>[ue]),_:2},1032,["onClick"])),[[b,"del"]]),n((u(),i(r,{size:"small",text:"",type:"success",onClick:B=>a.permission(s.row)},{default:t(()=>[ie]),_:2},1032,["onClick"])),[[b,"role-premission"]]),n((u(),i(r,{size:"small",text:"",type:"info",onClick:B=>a.dataPermission(s.row)},{default:t(()=>[re]),_:2},1032,["onClick"])),[[b,"data-premission"]])]),_:1})),[[D,"handle"]])]),_:1},8,["data"])),[[M,a.tableData.loading]])]),_:1}),e(O,{ref:"editRoleRef",onGetList:a.roleList,list:a.tableData.data},null,8,["onGetList","list"]),e(S,{ref:"permissionRef"},null,512),e(T,{ref:"dataPermissionRef","dept-data":a.deptData},null,8,["dept-data"])])}var De=q(Z,[["render",de]]);export{De as default};
